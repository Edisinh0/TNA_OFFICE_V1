{"ast":null,"code":"var _jsxFileName = \"/Users/eddiecerpa/Downloads/TNAOffice_MariaDB-2/frontend/src/pages/Tickets.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect, useRef } from 'react';\nimport { useSearchParams } from 'react-router-dom';\nimport apiClient from '../utils/api';\nimport { Card, CardContent } from '../components/ui/card';\nimport { Button } from '../components/ui/button';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '../components/ui/dialog';\nimport { Input } from '../components/ui/input';\nimport { Label } from '../components/ui/label';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '../components/ui/select';\nimport { Textarea } from '../components/ui/textarea';\nimport { Plus, Search, X, Building2, Trash2, Edit2, Package, DollarSign, CheckCircle, AlertCircle, CreditCard, Banknote, FileText, Receipt, History, ChevronDown, ChevronUp, TrendingUp, Clock } from 'lucide-react';\nimport { toast } from 'sonner';\nimport { getUser } from '../utils/auth';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PAYMENT_METHODS = [{\n  id: 'getnet',\n  label: 'Getnet',\n  icon: CreditCard\n}, {\n  id: 'efectivo',\n  label: 'Efectivo',\n  icon: Banknote\n}, {\n  id: 'factura_mensual',\n  label: 'Agregar a Factura Mensual',\n  icon: FileText\n}];\nexport const Tickets = () => {\n  _s();\n  const [searchParams, setSearchParams] = useSearchParams();\n  const [tickets, setTickets] = useState([]);\n  const [products, setProducts] = useState([]);\n  const [clients, setClients] = useState([]);\n  const [comisionistas, setComisionistas] = useState([]);\n  const [showModal, setShowModal] = useState(false);\n  const [editingTicket, setEditingTicket] = useState(null);\n  const [selectedCategory, setSelectedCategory] = useState('');\n\n  // Estados para facturas\n  const [pendingInvoices, setPendingInvoices] = useState([]);\n  const [invoiceHistory, setInvoiceHistory] = useState([]);\n  const [showInvoiceHistory, setShowInvoiceHistory] = useState(false);\n  const [selectedInvoice, setSelectedInvoice] = useState(null);\n\n  // Estados para métricas y filtros\n  const [selectedMonth, setSelectedMonth] = useState(() => {\n    const now = new Date();\n    return `${now.getFullYear()}-${String(now.getMonth() + 1).padStart(2, '0')}`;\n  });\n  const [filterPending, setFilterPending] = useState(false);\n\n  // Estados para items de la venta\n  const [ticketItems, setTicketItems] = useState([]);\n\n  // Estados para autocompletado de producto\n  const [productSearch, setProductSearch] = useState('');\n  const [showProductSuggestions, setShowProductSuggestions] = useState(false);\n  const productInputRef = useRef(null);\n\n  // Estados para búsqueda de cliente\n  const [clientSearch, setClientSearch] = useState('');\n  const [showClientSuggestions, setShowClientSuggestions] = useState(false);\n  const [selectedClient, setSelectedClient] = useState(null);\n  const clientInputRef = useRef(null);\n  const [form, setForm] = useState({\n    comisionista_id: '',\n    client_name: '',\n    client_email: '',\n    notes: ''\n  });\n  const [deleteConfirm, setDeleteConfirm] = useState(null);\n  const [paymentModal, setPaymentModal] = useState(null);\n  const user = getUser();\n\n  // Generar lista de meses disponibles (últimos 12 meses)\n  const getAvailableMonths = () => {\n    const months = [];\n    const now = new Date();\n    for (let i = 0; i < 12; i++) {\n      const date = new Date(now.getFullYear(), now.getMonth() - i, 1);\n      const value = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}`;\n      const label = date.toLocaleDateString('es-CL', {\n        month: 'long',\n        year: 'numeric'\n      });\n      months.push({\n        value,\n        label: label.charAt(0).toUpperCase() + label.slice(1)\n      });\n    }\n    return months;\n  };\n  const availableMonths = getAvailableMonths();\n  const loadData = async () => {\n    try {\n      const [ticketsRes, productsRes, comisionistasRes, clientsRes, pendingInvoicesRes] = await Promise.all([apiClient.get('/tickets'), apiClient.get('/products'), apiClient.get('/comisionistas'), apiClient.get('/clients'), apiClient.get('/invoices/pending')]);\n      setTickets(ticketsRes.data);\n      setProducts(productsRes.data);\n      setComisionistas(comisionistasRes.data);\n      setClients(clientsRes.data);\n      setPendingInvoices(pendingInvoicesRes.data);\n    } catch (error) {\n      toast.error('Error al cargar datos');\n    }\n  };\n  const loadInvoiceHistory = async () => {\n    try {\n      const res = await apiClient.get('/invoices/history');\n      setInvoiceHistory(res.data);\n    } catch (error) {\n      toast.error('Error al cargar historial');\n    }\n  };\n  useEffect(() => {\n    loadData();\n  }, []);\n\n  // Detectar parámetro newSale para abrir modal automáticamente\n  useEffect(() => {\n    if (searchParams.get('newSale') === 'true') {\n      setShowModal(true);\n      // Limpiar el parámetro de la URL\n      searchParams.delete('newSale');\n      setSearchParams(searchParams, {\n        replace: true\n      });\n    }\n  }, [searchParams, setSearchParams]);\n\n  // Filtrar productos según búsqueda y categoría\n  const filteredProducts = products.filter(p => {\n    const searchTerm = productSearch.toLowerCase();\n    const matchesSearch = !searchTerm || p.name.toLowerCase().includes(searchTerm) || p.category.toLowerCase().includes(searchTerm);\n    const matchesCategory = !selectedCategory || selectedCategory === 'all' || p.category === selectedCategory;\n    return matchesSearch && matchesCategory;\n  });\n\n  // Mostrar sugerencias cuando hay categoría seleccionada O cuando hay texto de búsqueda\n  const shouldShowSuggestions = showProductSuggestions && (productSearch || selectedCategory && selectedCategory !== 'all');\n\n  // Filtrar clientes según búsqueda\n  const filteredClients = clients.filter(c => c.company_name.toLowerCase().includes(clientSearch.toLowerCase()) || c.rut && c.rut.toLowerCase().includes(clientSearch.toLowerCase()));\n  const handleAddProduct = product => {\n    // Verificar si el producto ya está en la lista\n    const existingIndex = ticketItems.findIndex(item => item.product_id === product.id);\n    if (existingIndex >= 0) {\n      // Incrementar cantidad si ya existe\n      const updatedItems = [...ticketItems];\n      updatedItems[existingIndex].quantity += 1;\n      updatedItems[existingIndex].subtotal = updatedItems[existingIndex].quantity * product.sale_price;\n      setTicketItems(updatedItems);\n    } else {\n      // Agregar nuevo producto\n      setTicketItems([...ticketItems, {\n        product_id: product.id,\n        product_name: product.name,\n        category: product.category,\n        quantity: 1,\n        unit_price: product.sale_price,\n        subtotal: product.sale_price\n      }]);\n    }\n    setProductSearch('');\n    setShowProductSuggestions(false);\n    toast.success(`${product.name} agregado`);\n  };\n  const handleRemoveItem = index => {\n    const updatedItems = ticketItems.filter((_, i) => i !== index);\n    setTicketItems(updatedItems);\n  };\n  const handleUpdateQuantity = (index, newQuantity) => {\n    if (newQuantity < 1) return;\n    const updatedItems = [...ticketItems];\n    updatedItems[index].quantity = newQuantity;\n    updatedItems[index].subtotal = newQuantity * updatedItems[index].unit_price;\n    setTicketItems(updatedItems);\n  };\n  const handleSelectClient = client => {\n    var _client$contacts, _client$contacts$;\n    setSelectedClient(client);\n    setClientSearch(client.company_name);\n    setForm({\n      ...form,\n      client_name: client.company_name,\n      client_email: ((_client$contacts = client.contacts) === null || _client$contacts === void 0 ? void 0 : (_client$contacts$ = _client$contacts[0]) === null || _client$contacts$ === void 0 ? void 0 : _client$contacts$.email) || ''\n    });\n    setShowClientSuggestions(false);\n  };\n  const clearClient = () => {\n    setSelectedClient(null);\n    setClientSearch('');\n    setForm({\n      ...form,\n      client_name: '',\n      client_email: ''\n    });\n  };\n  const calculateTotal = () => {\n    return ticketItems.reduce((sum, item) => sum + item.subtotal, 0);\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (ticketItems.length === 0) {\n      toast.error('Agrega al menos un producto');\n      return;\n    }\n    if (!form.client_name && !clientSearch) {\n      toast.error('Ingresa el nombre del cliente');\n      return;\n    }\n    const ticketData = {\n      items: ticketItems.map(item => ({\n        product_id: item.product_id,\n        quantity: item.quantity\n      })),\n      comisionista_id: form.comisionista_id || '',\n      client_id: (selectedClient === null || selectedClient === void 0 ? void 0 : selectedClient.id) || '',\n      // Incluir ID del cliente si fue seleccionado\n      client_name: form.client_name || clientSearch,\n      client_email: form.client_email || '',\n      notes: form.notes || ''\n    };\n    try {\n      if (editingTicket) {\n        await apiClient.put(`/tickets/${editingTicket.id}`, ticketData);\n        toast.success('Venta actualizada');\n      } else {\n        await apiClient.post('/tickets', ticketData);\n        toast.success('Venta creada');\n      }\n      setShowModal(false);\n      resetForm();\n      loadData();\n    } catch (error) {\n      toast.error(editingTicket ? 'Error al actualizar venta' : 'Error al crear venta');\n    }\n  };\n  const resetForm = () => {\n    setForm({\n      comisionista_id: '',\n      client_name: '',\n      client_email: '',\n      notes: ''\n    });\n    setTicketItems([]);\n    setSelectedClient(null);\n    setClientSearch('');\n    setProductSearch('');\n    setSelectedCategory('');\n    setEditingTicket(null);\n  };\n  const handleEdit = ticket => {\n    setEditingTicket(ticket);\n    setTicketItems(ticket.items.map(item => ({\n      product_id: item.product_id,\n      product_name: item.product_name,\n      category: item.category,\n      quantity: item.quantity,\n      unit_price: item.unit_price,\n      subtotal: item.subtotal\n    })));\n    setForm({\n      comisionista_id: ticket.comisionista_id || '',\n      client_name: ticket.client_name,\n      client_email: ticket.client_email || '',\n      notes: ticket.notes || ''\n    });\n    setClientSearch(ticket.client_name);\n    setShowModal(true);\n  };\n  const handleDelete = async ticketId => {\n    try {\n      await apiClient.delete(`/tickets/${ticketId}`);\n      toast.success('Venta eliminada');\n      setDeleteConfirm(null);\n      loadData();\n    } catch (error) {\n      toast.error('Error al eliminar venta');\n    }\n  };\n  const handlePayment = async paymentMethod => {\n    if (!paymentModal) return;\n    try {\n      var _PAYMENT_METHODS$find;\n      await apiClient.put(`/tickets/${paymentModal.ticketId}/payment?payment_status=paid&payment_method=${paymentMethod}`);\n      toast.success(`Pago registrado: ${(_PAYMENT_METHODS$find = PAYMENT_METHODS.find(m => m.id === paymentMethod)) === null || _PAYMENT_METHODS$find === void 0 ? void 0 : _PAYMENT_METHODS$find.label}`);\n      setPaymentModal(null);\n      loadData();\n    } catch (error) {\n      toast.error('Error al actualizar estado de pago');\n    }\n  };\n  const updateCommissionStatus = async (ticketId, status) => {\n    try {\n      await apiClient.put(`/tickets/${ticketId}/commission?commission_status=${status}`);\n      toast.success('Estado de comisión actualizado');\n      loadData();\n    } catch (error) {\n      toast.error('Error al actualizar comisión');\n    }\n  };\n  const formatCurrency = amount => {\n    return new Intl.NumberFormat('es-CL', {\n      style: 'currency',\n      currency: 'CLP'\n    }).format(amount);\n  };\n  const getPaymentMethodLabel = method => {\n    const found = PAYMENT_METHODS.find(m => m.id === method);\n    return found ? found.label : method;\n  };\n  const markInvoiceAsInvoiced = async invoiceId => {\n    try {\n      await apiClient.put(`/invoices/${invoiceId}/status?status=invoiced`);\n      toast.success('Factura marcada como FACTURADA');\n      loadData();\n      if (showInvoiceHistory) {\n        loadInvoiceHistory();\n      }\n    } catch (error) {\n      toast.error('Error al actualizar factura');\n    }\n  };\n  const toggleInvoiceHistory = () => {\n    if (!showInvoiceHistory) {\n      loadInvoiceHistory();\n    }\n    setShowInvoiceHistory(!showInvoiceHistory);\n  };\n\n  // Calcular métricas de ventas\n  const calculateMetrics = () => {\n    // Parsear mes seleccionado\n    const [year, month] = selectedMonth.split('-').map(Number);\n    const selectedMonthIndex = month - 1; // Los meses en JS son 0-indexed\n\n    // Filtrar ventas del mes seleccionado\n    const monthSales = tickets.filter(ticket => {\n      const saleDate = new Date(ticket.ticket_date);\n      return saleDate.getMonth() === selectedMonthIndex && saleDate.getFullYear() === year;\n    });\n\n    // Total del mes\n    const totalMonth = monthSales.reduce((sum, ticket) => sum + ticket.total_amount, 0);\n\n    // Ventas pendientes de pago (todas, no solo del mes)\n    const pendingSales = tickets.filter(ticket => ticket.payment_status === 'pending');\n    const totalPending = pendingSales.reduce((sum, ticket) => sum + ticket.total_amount, 0);\n\n    // Desglose por forma de pago (solo pagadas)\n    const paidSales = tickets.filter(ticket => ticket.payment_status === 'paid');\n    const byPaymentMethod = {\n      getnet: {\n        count: 0,\n        total: 0\n      },\n      efectivo: {\n        count: 0,\n        total: 0\n      },\n      factura_mensual: {\n        count: 0,\n        total: 0\n      },\n      otro: {\n        count: 0,\n        total: 0\n      }\n    };\n    paidSales.forEach(ticket => {\n      const method = ticket.payment_method || 'otro';\n      if (byPaymentMethod[method]) {\n        byPaymentMethod[method].count++;\n        byPaymentMethod[method].total += ticket.total_amount;\n      } else {\n        byPaymentMethod.otro.count++;\n        byPaymentMethod.otro.total += ticket.total_amount;\n      }\n    });\n    return {\n      totalMonth,\n      monthSalesCount: monthSales.length,\n      pendingCount: pendingSales.length,\n      totalPending,\n      paidCount: paidSales.length,\n      byPaymentMethod\n    };\n  };\n  const metrics = calculateMetrics();\n\n  // Filtrar ventas para mostrar\n  const filteredTickets = filterPending ? tickets.filter(ticket => ticket.payment_status === 'pending') : tickets;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-6\",\n    \"data-testid\": \"ventas-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-between\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"font-secondary text-4xl md:text-5xl font-black uppercase text-black tracking-tight\",\n          children: \"VENTAS\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 403,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"h-1 w-32 tna-gradient mt-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 406,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 402,\n        columnNumber: 9\n      }, this), (user === null || user === void 0 ? void 0 : user.role) !== 'comisionista' && /*#__PURE__*/_jsxDEV(Button, {\n        \"data-testid\": \"add-venta-button\",\n        onClick: () => setShowModal(true),\n        className: \"bg-white text-black hover:bg-zinc-200 rounded-sm font-bold uppercase tracking-wide font-secondary\",\n        children: [/*#__PURE__*/_jsxDEV(Plus, {\n          className: \"w-4 h-4 mr-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 414,\n          columnNumber: 13\n        }, this), \"NUEVA VENTA\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 409,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 401,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\",\n      children: [/*#__PURE__*/_jsxDEV(Card, {\n        className: \"bg-white border-gray-200 rounded-sm\",\n        children: /*#__PURE__*/_jsxDEV(CardContent, {\n          className: \"p-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between mb-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-gray-500 font-primary uppercase\",\n              children: \"Ventas del Mes\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 426,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: selectedMonth,\n              onChange: e => setSelectedMonth(e.target.value),\n              className: \"text-xs bg-gray-100 border-0 rounded px-2 py-1 font-primary text-gray-600 cursor-pointer hover:bg-gray-200 transition-colors\",\n              children: availableMonths.map(month => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: month.value,\n                children: month.label\n              }, month.value, false, {\n                fileName: _jsxFileName,\n                lineNumber: 433,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 427,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 425,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-2xl font-bold text-black font-secondary\",\n                children: formatCurrency(metrics.totalMonth)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 439,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-xs text-gray-400 font-primary\",\n                children: [metrics.monthSalesCount, \" ventas\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 440,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 438,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-12 h-12 bg-green-100 rounded-sm flex items-center justify-center\",\n              children: /*#__PURE__*/_jsxDEV(TrendingUp, {\n                className: \"w-6 h-6 text-green-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 443,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 442,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 437,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 424,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 423,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        className: `bg-white border-gray-200 rounded-sm cursor-pointer transition-all hover:shadow-md ${filterPending ? 'ring-2 ring-amber-400 border-amber-400' : ''}`,\n        onClick: () => setFilterPending(!filterPending),\n        children: /*#__PURE__*/_jsxDEV(CardContent, {\n          className: \"p-4\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-xs text-gray-500 font-primary uppercase\",\n                  children: \"Pendientes de Pago\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 460,\n                  columnNumber: 19\n                }, this), filterPending && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-xs bg-amber-100 text-amber-700 px-1.5 py-0.5 rounded font-primary\",\n                  children: \"Filtro activo\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 462,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 459,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-2xl font-bold text-black font-secondary\",\n                children: formatCurrency(metrics.totalPending)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 467,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-xs text-gray-400 font-primary\",\n                children: [metrics.pendingCount, \" ventas \\u2022 Click para filtrar\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 468,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 458,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `w-12 h-12 rounded-sm flex items-center justify-center ${filterPending ? 'bg-amber-400' : 'bg-amber-100'}`,\n              children: /*#__PURE__*/_jsxDEV(Clock, {\n                className: `w-6 h-6 ${filterPending ? 'text-white' : 'text-amber-600'}`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 473,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 470,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 457,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 456,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 450,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        className: \"bg-white border-gray-200 rounded-sm lg:col-span-2\",\n        children: /*#__PURE__*/_jsxDEV(CardContent, {\n          className: \"p-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-xs text-gray-500 font-primary uppercase mb-3\",\n            children: \"Formas de Pago\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 482,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-3 gap-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center justify-center gap-1 mb-1\",\n                children: [/*#__PURE__*/_jsxDEV(CreditCard, {\n                  className: \"w-4 h-4 text-blue-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 486,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-xs font-primary text-gray-600\",\n                  children: \"Getnet\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 487,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 485,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"font-bold text-black font-secondary\",\n                children: formatCurrency(metrics.byPaymentMethod.getnet.total)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 489,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-xs text-gray-400 font-primary\",\n                children: [metrics.byPaymentMethod.getnet.count, \" ventas\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 490,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 484,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center justify-center gap-1 mb-1\",\n                children: [/*#__PURE__*/_jsxDEV(Banknote, {\n                  className: \"w-4 h-4 text-green-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 494,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-xs font-primary text-gray-600\",\n                  children: \"Efectivo\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 495,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 493,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"font-bold text-black font-secondary\",\n                children: formatCurrency(metrics.byPaymentMethod.efectivo.total)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 497,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-xs text-gray-400 font-primary\",\n                children: [metrics.byPaymentMethod.efectivo.count, \" ventas\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 498,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 492,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center justify-center gap-1 mb-1\",\n                children: [/*#__PURE__*/_jsxDEV(FileText, {\n                  className: \"w-4 h-4 text-orange-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 502,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-xs font-primary text-gray-600\",\n                  children: \"Factura\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 503,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 501,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"font-bold text-black font-secondary\",\n                children: formatCurrency(metrics.byPaymentMethod.factura_mensual.total)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 505,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-xs text-gray-400 font-primary\",\n                children: [metrics.byPaymentMethod.factura_mensual.count, \" ventas\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 506,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 500,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 483,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 481,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 480,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 421,\n      columnNumber: 7\n    }, this), pendingInvoices.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-amber-50 border-2 border-amber-400 rounded-sm p-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-2 mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(Receipt, {\n          className: \"w-5 h-5 text-amber-600\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 517,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"font-secondary text-lg font-bold text-amber-800 uppercase\",\n          children: [\"Facturas Pendientes de Facturar (\", pendingInvoices.length, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 518,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 516,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-3\",\n        children: pendingInvoices.map(invoice => /*#__PURE__*/_jsxDEV(Card, {\n          className: \"bg-white border-amber-200 rounded-sm\",\n          children: /*#__PURE__*/_jsxDEV(CardContent, {\n            className: \"p-4\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-start justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center gap-3 mb-2\",\n                  children: [/*#__PURE__*/_jsxDEV(Building2, {\n                    className: \"w-5 h-5 text-amber-600\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 529,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"font-secondary font-bold text-black\",\n                    children: invoice.client_name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 530,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-xs bg-amber-100 text-amber-700 px-2 py-1 rounded-sm font-primary\",\n                    children: \"PENDIENTE DE FACTURAR\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 531,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 528,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-sm text-gray-600 font-primary mb-2\",\n                  children: [invoice.items.length, \" producto(s) \\u2022 \", invoice.sales_ids.length, \" venta(s)\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 535,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex flex-wrap gap-2\",\n                  children: [invoice.items.slice(0, 5).map((item, idx) => /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded-sm font-primary\",\n                    children: [item.quantity, \"x \", item.product_name]\n                  }, idx, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 540,\n                    columnNumber: 27\n                  }, this)), invoice.items.length > 5 && /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-xs bg-gray-100 text-gray-500 px-2 py-1 rounded-sm font-primary\",\n                    children: [\"+\", invoice.items.length - 5, \" m\\xE1s\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 545,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 538,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 527,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex flex-col items-end gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-right\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-xs text-gray-500 font-primary\",\n                    children: \"Total a Facturar\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 553,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-xl font-bold text-black font-secondary\",\n                    children: formatCurrency(invoice.total_amount)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 554,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 552,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex gap-2\",\n                  children: [/*#__PURE__*/_jsxDEV(Button, {\n                    size: \"sm\",\n                    variant: \"outline\",\n                    onClick: () => setSelectedInvoice(invoice),\n                    className: \"text-gray-600 font-secondary text-xs\",\n                    children: \"VER DETALLE\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 559,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(Button, {\n                    size: \"sm\",\n                    onClick: () => markInvoiceAsInvoiced(invoice.id),\n                    className: \"bg-green-600 hover:bg-green-700 text-white font-secondary text-xs\",\n                    children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n                      className: \"w-3 h-3 mr-1\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 572,\n                      columnNumber: 27\n                    }, this), \"MARCAR FACTURADA\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 567,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 558,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 551,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 526,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 525,\n            columnNumber: 17\n          }, this)\n        }, invoice.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 524,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 522,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 515,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"border border-gray-200 rounded-sm\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: toggleInvoiceHistory,\n        className: \"w-full flex items-center justify-between p-4 bg-gray-50 hover:bg-gray-100 transition-colors\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(History, {\n            className: \"w-5 h-5 text-gray-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 592,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-secondary font-bold text-gray-700 uppercase\",\n            children: \"Historial de Facturas\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 593,\n            columnNumber: 13\n          }, this), invoiceHistory.length > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-xs bg-gray-200 text-gray-600 px-2 py-1 rounded-sm font-primary\",\n            children: invoiceHistory.length\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 597,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 591,\n          columnNumber: 11\n        }, this), showInvoiceHistory ? /*#__PURE__*/_jsxDEV(ChevronUp, {\n          className: \"w-5 h-5 text-gray-500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 602,\n          columnNumber: 33\n        }, this) : /*#__PURE__*/_jsxDEV(ChevronDown, {\n          className: \"w-5 h-5 text-gray-500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 602,\n          columnNumber: 83\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 587,\n        columnNumber: 9\n      }, this), showInvoiceHistory && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-4 border-t border-gray-200 bg-white\",\n        children: invoiceHistory.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-3\",\n          children: invoiceHistory.map(invoice => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between p-3 bg-gray-50 rounded-sm\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-3\",\n              children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n                className: \"w-5 h-5 text-green-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 612,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-primary font-medium text-black\",\n                  children: invoice.client_name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 614,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs text-gray-500 font-primary\",\n                  children: [\"Facturada el \", new Date(invoice.invoiced_at).toLocaleDateString('es-CL')]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 615,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 613,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 611,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-secondary font-bold text-black\",\n                children: formatCurrency(invoice.total_amount)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 621,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                size: \"sm\",\n                variant: \"ghost\",\n                onClick: () => setSelectedInvoice(invoice),\n                className: \"text-gray-500 text-xs\",\n                children: \"Ver\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 622,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 620,\n              columnNumber: 21\n            }, this)]\n          }, invoice.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 610,\n            columnNumber: 19\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 608,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-500 text-center font-primary py-4\",\n          children: \"No hay facturas en el historial\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 635,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 606,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 586,\n      columnNumber: 7\n    }, this), filterPending && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-between bg-amber-50 border border-amber-200 rounded-sm px-4 py-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text-sm font-primary text-amber-800\",\n        children: [\"Mostrando solo ventas pendientes de pago (\", filteredTickets.length, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 644,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setFilterPending(false),\n        className: \"text-xs text-amber-700 hover:text-amber-900 font-primary underline\",\n        children: \"Mostrar todas\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 647,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 643,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-4\",\n      children: filteredTickets.map(ticket => /*#__PURE__*/_jsxDEV(Card, {\n        className: \"bg-white border-gray-200 rounded-sm overflow-hidden\",\n        children: /*#__PURE__*/_jsxDEV(CardContent, {\n          className: \"p-0\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-gray-50 px-6 py-3 border-b border-gray-200 flex items-center justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-secondary font-bold text-lg text-black\",\n                children: [\"VENTA #\", ticket.ticket_number]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 663,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-gray-500 text-sm font-primary\",\n                children: new Date(ticket.ticket_date).toLocaleDateString('es-CL')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 666,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 662,\n              columnNumber: 17\n            }, this), (user === null || user === void 0 ? void 0 : user.role) === 'admin' && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                size: \"sm\",\n                variant: \"ghost\",\n                onClick: () => handleEdit(ticket),\n                className: \"text-gray-600 hover:text-black\",\n                children: /*#__PURE__*/_jsxDEV(Edit2, {\n                  className: \"w-4 h-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 678,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 672,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                size: \"sm\",\n                variant: \"ghost\",\n                onClick: () => setDeleteConfirm(ticket.id),\n                className: \"text-gray-600 hover:text-red-600\",\n                children: /*#__PURE__*/_jsxDEV(Trash2, {\n                  className: \"w-4 h-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 686,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 680,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 671,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 661,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-6\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-1 lg:grid-cols-4 gap-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"lg:col-span-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs text-gray-500 font-primary mb-2 uppercase\",\n                  children: \"Productos\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 697,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"space-y-2\",\n                  children: ticket.items.map((item, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center justify-between text-sm\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex items-center gap-2\",\n                      children: [/*#__PURE__*/_jsxDEV(Package, {\n                        className: \"w-4 h-4 text-orange-500\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 702,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"font-primary text-black\",\n                        children: [item.quantity, \"x \", item.product_name]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 703,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"text-xs text-gray-400\",\n                        children: [\"[\", item.category, \"]\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 706,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 701,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"font-primary text-gray-600\",\n                      children: formatCurrency(item.subtotal)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 708,\n                      columnNumber: 27\n                    }, this)]\n                  }, idx, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 700,\n                    columnNumber: 25\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 698,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 696,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs text-gray-500 font-primary mb-2 uppercase\",\n                  children: \"Cliente\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 718,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-black font-primary font-medium\",\n                  children: ticket.client_name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 719,\n                  columnNumber: 21\n                }, this), ticket.client_email && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-gray-500 text-xs font-primary\",\n                  children: ticket.client_email\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 721,\n                  columnNumber: 23\n                }, this), ticket.comisionista_name && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-xs text-gray-500 font-primary\",\n                    children: \"Comisionista\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 725,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-black font-primary text-sm\",\n                    children: ticket.comisionista_name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 726,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-[#00E5FF] font-bold text-sm\",\n                    children: formatCurrency(ticket.total_commission)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 727,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 724,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 717,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex flex-col items-end gap-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-right\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-xs text-gray-500 font-primary\",\n                    children: \"Total\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 735,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-2xl font-bold text-black font-secondary\",\n                    children: formatCurrency(ticket.total_amount)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 736,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 734,\n                  columnNumber: 21\n                }, this), (user === null || user === void 0 ? void 0 : user.role) === 'admin' && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex gap-2\",\n                  children: [ticket.payment_status === 'pending' && /*#__PURE__*/_jsxDEV(Button, {\n                    size: \"sm\",\n                    onClick: () => setPaymentModal({\n                      ticketId: ticket.id,\n                      ticketNumber: ticket.ticket_number,\n                      hasClientId: !!ticket.client_id\n                    }),\n                    className: \"bg-green-900 hover:bg-green-800 text-white rounded-sm text-xs font-secondary\",\n                    children: [/*#__PURE__*/_jsxDEV(DollarSign, {\n                      className: \"w-3 h-3 mr-1\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 753,\n                      columnNumber: 29\n                    }, this), \"PAGAR\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 744,\n                    columnNumber: 27\n                  }, this), ticket.payment_status === 'paid' && ticket.commission_status === 'pending' && ticket.comisionista_id && /*#__PURE__*/_jsxDEV(Button, {\n                    size: \"sm\",\n                    onClick: () => updateCommissionStatus(ticket.id, 'paid'),\n                    className: \"bg-blue-900 hover:bg-blue-800 text-white rounded-sm text-xs font-secondary\",\n                    children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n                      className: \"w-3 h-3 mr-1\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 763,\n                      columnNumber: 29\n                    }, this), \"COMISI\\xD3N\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 758,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 742,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex gap-2 flex-wrap justify-end\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: `text-xs px-2 py-1 rounded-sm font-primary ${ticket.payment_status === 'paid' ? 'bg-green-100 text-green-700' : 'bg-gray-100 text-gray-600'}`,\n                    children: ticket.payment_status === 'paid' ? `✓ ${ticket.payment_method ? getPaymentMethodLabel(ticket.payment_method) : 'Pagado'}` : 'Pendiente'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 771,\n                    columnNumber: 23\n                  }, this), ticket.comisionista_id && /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: `text-xs px-2 py-1 rounded-sm font-primary ${ticket.commission_status === 'paid' ? 'bg-blue-100 text-blue-700' : 'bg-gray-100 text-gray-600'}`,\n                    children: [\"Com: \", ticket.commission_status === 'paid' ? '✓ Pagada' : 'Pendiente']\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 779,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 770,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 733,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 694,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 693,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 659,\n          columnNumber: 13\n        }, this)\n      }, ticket.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 658,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 656,\n      columnNumber: 7\n    }, this), filteredTickets.length === 0 && /*#__PURE__*/_jsxDEV(Card, {\n      className: \"bg-white border-gray-200 rounded-sm\",\n      children: /*#__PURE__*/_jsxDEV(CardContent, {\n        className: \"py-12 text-center\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-500 font-primary\",\n          children: filterPending ? 'No hay ventas pendientes de pago' : 'No hay ventas registradas'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 797,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 796,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 795,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: showModal,\n      onOpenChange: open => {\n        setShowModal(open);\n        if (!open) resetForm();\n      },\n      children: /*#__PURE__*/_jsxDEV(DialogContent, {\n        className: \"bg-white border-gray-200 text-black max-w-3xl max-h-[90vh] overflow-y-auto\",\n        children: [/*#__PURE__*/_jsxDEV(DialogHeader, {\n          children: /*#__PURE__*/_jsxDEV(DialogTitle, {\n            className: \"font-secondary uppercase text-xl text-black\",\n            children: editingTicket ? 'EDITAR VENTA' : 'NUEVA VENTA'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 811,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 810,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit,\n          className: \"space-y-4 mt-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"border border-gray-200 rounded-sm p-4 bg-gray-50\",\n            children: [/*#__PURE__*/_jsxDEV(Label, {\n              className: \"text-black font-primary font-medium mb-3 block\",\n              children: \"Agregar Productos\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 818,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex gap-3 mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(Select, {\n                value: selectedCategory,\n                onValueChange: value => {\n                  setSelectedCategory(value);\n                  setShowProductSuggestions(true);\n                },\n                children: [/*#__PURE__*/_jsxDEV(SelectTrigger, {\n                  className: \"bg-white border-gray-300 text-black w-48\",\n                  children: /*#__PURE__*/_jsxDEV(SelectValue, {\n                    placeholder: \"Categor\\xEDa\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 830,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 829,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(SelectContent, {\n                  className: \"bg-white border-gray-300 text-black max-h-60\",\n                  children: [/*#__PURE__*/_jsxDEV(SelectItem, {\n                    value: \"all\",\n                    children: \"Todas\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 833,\n                    columnNumber: 21\n                  }, this), [...new Set(products.map(p => p.category))].sort().map(category => /*#__PURE__*/_jsxDEV(SelectItem, {\n                    value: category,\n                    children: category\n                  }, category, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 835,\n                    columnNumber: 23\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 832,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 822,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"relative flex-1\",\n                children: [/*#__PURE__*/_jsxDEV(Search, {\n                  className: \"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 842,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Input, {\n                  ref: productInputRef,\n                  value: productSearch,\n                  onChange: e => {\n                    setProductSearch(e.target.value);\n                    setShowProductSuggestions(true);\n                  },\n                  onFocus: () => setShowProductSuggestions(true),\n                  className: \"bg-white border-gray-300 text-black pl-10\",\n                  placeholder: \"Buscar producto...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 843,\n                  columnNumber: 19\n                }, this), shouldShowSuggestions && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-sm shadow-lg max-h-48 overflow-y-auto\",\n                  children: filteredProducts.length > 0 ? filteredProducts.slice(0, 10).map(product => /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    onClick: () => handleAddProduct(product),\n                    className: \"w-full text-left px-4 py-2 hover:bg-gray-50 border-b border-gray-100 last:border-b-0\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex justify-between items-center\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"text-xs text-orange-600 font-primary\",\n                          children: [\"[\", product.category, \"]\"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 868,\n                          columnNumber: 33\n                        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"ml-2 font-primary text-black\",\n                          children: product.name\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 869,\n                          columnNumber: 33\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 867,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"text-green-600 font-bold font-primary\",\n                        children: formatCurrency(product.sale_price)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 871,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 866,\n                      columnNumber: 29\n                    }, this)\n                  }, product.id, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 860,\n                    columnNumber: 27\n                  }, this)) : /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"px-4 py-3 text-gray-500 text-sm font-primary\",\n                    children: \"No se encontraron productos\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 876,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 857,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 841,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 821,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 817,\n            columnNumber: 13\n          }, this), ticketItems.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"border border-gray-200 rounded-sm overflow-hidden\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-gray-100 px-4 py-2 font-secondary text-sm uppercase text-gray-600\",\n              children: [\"Productos en la venta (\", ticketItems.length, \")\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 889,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"divide-y divide-gray-100\",\n              children: ticketItems.map((item, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center justify-between px-4 py-3 bg-white\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center gap-3 flex-1\",\n                  children: [/*#__PURE__*/_jsxDEV(Package, {\n                    className: \"w-4 h-4 text-orange-500\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 896,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"font-primary text-black\",\n                      children: item.product_name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 898,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-xs text-gray-400 ml-2\",\n                      children: [\"[\", item.category, \"]\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 899,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 897,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 895,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center gap-4\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center gap-2\",\n                    children: [/*#__PURE__*/_jsxDEV(Button, {\n                      type: \"button\",\n                      size: \"sm\",\n                      variant: \"outline\",\n                      onClick: () => handleUpdateQuantity(index, item.quantity - 1),\n                      className: \"h-7 w-7 p-0\",\n                      children: \"-\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 905,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"w-8 text-center font-primary\",\n                      children: item.quantity\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 914,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(Button, {\n                      type: \"button\",\n                      size: \"sm\",\n                      variant: \"outline\",\n                      onClick: () => handleUpdateQuantity(index, item.quantity + 1),\n                      className: \"h-7 w-7 p-0\",\n                      children: \"+\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 915,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 904,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"font-primary font-bold text-black w-24 text-right\",\n                    children: formatCurrency(item.subtotal)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 926,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(Button, {\n                    type: \"button\",\n                    size: \"sm\",\n                    variant: \"ghost\",\n                    onClick: () => handleRemoveItem(index),\n                    className: \"text-gray-400 hover:text-red-600\",\n                    children: /*#__PURE__*/_jsxDEV(X, {\n                      className: \"w-4 h-4\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 937,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 930,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 903,\n                  columnNumber: 23\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 894,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 892,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-gray-50 px-4 py-3 flex justify-between items-center border-t border-gray-200\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-secondary uppercase text-gray-600\",\n                children: \"Total\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 944,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-secondary text-xl font-bold text-black\",\n                children: formatCurrency(calculateTotal())\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 945,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 943,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 888,\n            columnNumber: 15\n          }, this), ticketItems.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"border border-dashed border-gray-300 rounded-sm py-8 text-center\",\n            children: [/*#__PURE__*/_jsxDEV(Package, {\n              className: \"w-8 h-8 text-gray-300 mx-auto mb-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 952,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-gray-400 font-primary text-sm\",\n              children: \"Busca y agrega productos a la venta\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 953,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 951,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(Label, {\n              className: \"text-black font-primary font-medium\",\n              children: \"Comisionista (opcional)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 959,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Select, {\n              value: form.comisionista_id || 'none',\n              onValueChange: value => setForm({\n                ...form,\n                comisionista_id: value === 'none' ? '' : value\n              }),\n              children: [/*#__PURE__*/_jsxDEV(SelectTrigger, {\n                className: \"bg-white border-gray-300 text-black\",\n                children: /*#__PURE__*/_jsxDEV(SelectValue, {\n                  placeholder: \"Sin comisionista\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 962,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 961,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(SelectContent, {\n                className: \"bg-white border-gray-300 text-black\",\n                children: [/*#__PURE__*/_jsxDEV(SelectItem, {\n                  value: \"none\",\n                  children: \"Sin comisionista\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 965,\n                  columnNumber: 19\n                }, this), comisionistas.map(c => /*#__PURE__*/_jsxDEV(SelectItem, {\n                  value: c.id,\n                  children: c.name\n                }, c.id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 967,\n                  columnNumber: 21\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 964,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 960,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 958,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative\",\n            children: [/*#__PURE__*/_jsxDEV(Label, {\n              className: \"text-black font-primary font-medium\",\n              children: \"Cliente *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 975,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"relative\",\n              children: [/*#__PURE__*/_jsxDEV(Building2, {\n                className: \"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 977,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Input, {\n                ref: clientInputRef,\n                value: clientSearch,\n                onChange: e => {\n                  setClientSearch(e.target.value);\n                  setForm({\n                    ...form,\n                    client_name: e.target.value\n                  });\n                  setShowClientSuggestions(true);\n                  if (!e.target.value) clearClient();\n                },\n                onFocus: () => setShowClientSuggestions(true),\n                className: \"bg-white border-gray-300 text-black pl-10 pr-10\",\n                placeholder: \"Buscar cliente o escribir nombre...\",\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 978,\n                columnNumber: 17\n              }, this), selectedClient && /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: clearClient,\n                className: \"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600\",\n                children: /*#__PURE__*/_jsxDEV(X, {\n                  className: \"w-4 h-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 998,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 993,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 976,\n              columnNumber: 15\n            }, this), showClientSuggestions && clientSearch && filteredClients.length > 0 && !selectedClient && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-sm shadow-lg max-h-48 overflow-y-auto\",\n              children: filteredClients.slice(0, 8).map(client => /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => handleSelectClient(client),\n                className: \"w-full text-left px-4 py-2 hover:bg-gray-50 border-b border-gray-100 last:border-b-0\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center gap-2\",\n                  children: [/*#__PURE__*/_jsxDEV(Building2, {\n                    className: \"w-4 h-4 text-blue-500\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1013,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"font-primary text-black font-medium\",\n                    children: client.company_name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1014,\n                    columnNumber: 25\n                  }, this), client.rut && /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-xs text-gray-500\",\n                    children: client.rut\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1015,\n                    columnNumber: 40\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1012,\n                  columnNumber: 23\n                }, this)\n              }, client.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1006,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1004,\n              columnNumber: 17\n            }, this), selectedClient && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-2 p-2 bg-blue-50 border border-blue-200 rounded-sm\",\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm font-primary flex items-center gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(Building2, {\n                  className: \"w-4 h-4 text-blue-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1025,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-bold text-black\",\n                  children: selectedClient.company_name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1026,\n                  columnNumber: 21\n                }, this), selectedClient.rut && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-500\",\n                  children: [\"(\", selectedClient.rut, \")\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1027,\n                  columnNumber: 44\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1024,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1023,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 974,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(Label, {\n              className: \"text-black font-primary font-medium\",\n              children: \"Email (opcional)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1035,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              type: \"email\",\n              value: form.client_email,\n              onChange: e => setForm({\n                ...form,\n                client_email: e.target.value\n              }),\n              className: \"bg-white border-gray-300 text-black\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1036,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1034,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(Label, {\n              className: \"text-black font-primary font-medium\",\n              children: \"Notas (opcional)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1046,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Textarea, {\n              value: form.notes,\n              onChange: e => setForm({\n                ...form,\n                notes: e.target.value\n              }),\n              className: \"bg-white border-gray-300 text-black\",\n              rows: 2\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1047,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1045,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            type: \"submit\",\n            disabled: ticketItems.length === 0,\n            className: \"w-full bg-black text-white hover:bg-gray-800 rounded-sm font-bold uppercase tracking-wide font-secondary disabled:opacity-50\",\n            children: editingTicket ? 'ACTUALIZAR VENTA' : 'CREAR VENTA'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1055,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 815,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 809,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 805,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: !!deleteConfirm,\n      onOpenChange: () => setDeleteConfirm(null),\n      children: /*#__PURE__*/_jsxDEV(DialogContent, {\n        className: \"bg-white border-gray-200 text-black max-w-md\",\n        children: [/*#__PURE__*/_jsxDEV(DialogHeader, {\n          children: /*#__PURE__*/_jsxDEV(DialogTitle, {\n            className: \"font-secondary uppercase text-xl text-black flex items-center gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n              className: \"w-5 h-5 text-red-500\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1071,\n              columnNumber: 15\n            }, this), \"ELIMINAR VENTA\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1070,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1069,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"py-4\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"font-primary text-gray-600\",\n            children: \"\\xBFEst\\xE1s seguro de que deseas eliminar esta venta? Esta acci\\xF3n no se puede deshacer.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1076,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1075,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex gap-3 justify-end\",\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outline\",\n            onClick: () => setDeleteConfirm(null),\n            className: \"font-secondary uppercase\",\n            children: \"Cancelar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1081,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: () => handleDelete(deleteConfirm),\n            className: \"bg-red-600 hover:bg-red-700 text-white font-secondary uppercase\",\n            children: \"Eliminar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1088,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1080,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1068,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1067,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: !!paymentModal,\n      onOpenChange: () => setPaymentModal(null),\n      children: /*#__PURE__*/_jsxDEV(DialogContent, {\n        className: \"bg-white border-gray-200 text-black max-w-md\",\n        children: [/*#__PURE__*/_jsxDEV(DialogHeader, {\n          children: /*#__PURE__*/_jsxDEV(DialogTitle, {\n            className: \"font-secondary uppercase text-xl text-black flex items-center gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(DollarSign, {\n              className: \"w-5 h-5 text-green-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1103,\n              columnNumber: 15\n            }, this), \"REGISTRAR PAGO - VENTA #\", paymentModal === null || paymentModal === void 0 ? void 0 : paymentModal.ticketNumber]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1102,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1101,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"py-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"font-primary text-gray-600 mb-4\",\n            children: \"Selecciona la forma de pago:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1108,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-3\",\n            children: PAYMENT_METHODS.map(method => {\n              const Icon = method.icon;\n              // Solo mostrar \"Agregar a Factura Mensual\" si el cliente está registrado\n              const isInvoiceMethod = method.id === 'factura_mensual';\n              const isDisabled = isInvoiceMethod && !(paymentModal !== null && paymentModal !== void 0 && paymentModal.hasClientId);\n              if (isDisabled) {\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-full flex items-center gap-4 p-4 border border-gray-100 rounded-sm bg-gray-50 opacity-50 cursor-not-allowed\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center\",\n                    children: /*#__PURE__*/_jsxDEV(Icon, {\n                      className: \"w-5 h-5 text-gray-400\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1125,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1124,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"font-primary font-medium text-gray-400\",\n                      children: method.label\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1128,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-xs text-gray-400 font-primary\",\n                      children: \"Solo disponible para clientes registrados\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1129,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1127,\n                    columnNumber: 23\n                  }, this)]\n                }, method.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1120,\n                  columnNumber: 21\n                }, this);\n              }\n              return /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handlePayment(method.id),\n                className: \"w-full flex items-center gap-4 p-4 border border-gray-200 rounded-sm hover:bg-gray-50 hover:border-green-500 transition-colors\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center\",\n                  children: /*#__PURE__*/_jsxDEV(Icon, {\n                    className: \"w-5 h-5 text-gray-600\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1142,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1141,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-primary font-medium text-black\",\n                  children: method.label\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1144,\n                  columnNumber: 21\n                }, this)]\n              }, method.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1136,\n                columnNumber: 19\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1111,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1107,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-end\",\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outline\",\n            onClick: () => setPaymentModal(null),\n            className: \"font-secondary uppercase\",\n            children: \"Cancelar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1151,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1150,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1100,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1099,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: !!selectedInvoice,\n      onOpenChange: () => setSelectedInvoice(null),\n      children: /*#__PURE__*/_jsxDEV(DialogContent, {\n        className: \"bg-white border-gray-200 text-black max-w-2xl max-h-[80vh] overflow-y-auto\",\n        children: [/*#__PURE__*/_jsxDEV(DialogHeader, {\n          children: /*#__PURE__*/_jsxDEV(DialogTitle, {\n            className: \"font-secondary uppercase text-xl text-black flex items-center gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(Receipt, {\n              className: \"w-5 h-5 text-amber-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1167,\n              columnNumber: 15\n            }, this), \"DETALLE DE FACTURA\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1166,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1165,\n          columnNumber: 11\n        }, this), selectedInvoice && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-4 mt-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-gray-50 p-4 rounded-sm\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs text-gray-500 font-primary uppercase\",\n                  children: \"Cliente\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1177,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"font-secondary font-bold text-lg text-black\",\n                  children: selectedInvoice.client_name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1178,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1176,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: `px-3 py-1 rounded-sm text-sm font-primary ${selectedInvoice.status === 'pending' ? 'bg-amber-100 text-amber-700' : 'bg-green-100 text-green-700'}`,\n                children: selectedInvoice.status === 'pending' ? 'PENDIENTE DE FACTURAR' : 'FACTURADA'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1180,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1175,\n              columnNumber: 17\n            }, this), selectedInvoice.invoiced_at && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs text-gray-500 font-primary mt-2\",\n              children: [\"Facturada el \", new Date(selectedInvoice.invoiced_at).toLocaleDateString('es-CL')]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1189,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1174,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"border border-gray-200 rounded-sm overflow-hidden\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-gray-100 px-4 py-2 font-secondary text-sm uppercase text-gray-600\",\n              children: [\"Productos (\", selectedInvoice.items.length, \")\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1197,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"divide-y divide-gray-100\",\n              children: selectedInvoice.items.map((item, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"px-4 py-3 bg-white\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center justify-between\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center gap-2\",\n                    children: [/*#__PURE__*/_jsxDEV(Package, {\n                      className: \"w-4 h-4 text-orange-500\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1205,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"font-primary text-black\",\n                      children: [item.quantity, \"x \", item.product_name]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1206,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-xs text-gray-400\",\n                      children: [\"[\", item.category, \"]\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1207,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1204,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"font-primary font-bold text-black\",\n                    children: formatCurrency(item.subtotal)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1209,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1203,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs text-gray-500 font-primary mt-1 ml-6\",\n                  children: [\"Venta #\", item.sale_number, \" \\u2022 \", new Date(item.sale_date).toLocaleDateString('es-CL')]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1211,\n                  columnNumber: 23\n                }, this)]\n              }, idx, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1202,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1200,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-gray-50 px-4 py-3 flex justify-between items-center border-t border-gray-200\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-secondary uppercase text-gray-600\",\n                children: \"Total\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1218,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-secondary text-xl font-bold text-black\",\n                children: formatCurrency(selectedInvoice.total_amount)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1219,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1217,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1196,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-end gap-3\",\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              variant: \"outline\",\n              onClick: () => setSelectedInvoice(null),\n              className: \"font-secondary uppercase\",\n              children: \"Cerrar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1225,\n              columnNumber: 17\n            }, this), selectedInvoice.status === 'pending' && /*#__PURE__*/_jsxDEV(Button, {\n              onClick: () => {\n                markInvoiceAsInvoiced(selectedInvoice.id);\n                setSelectedInvoice(null);\n              },\n              className: \"bg-green-600 hover:bg-green-700 text-white font-secondary uppercase\",\n              children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n                className: \"w-4 h-4 mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1240,\n                columnNumber: 21\n              }, this), \"Marcar como Facturada\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1233,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1224,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1172,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1164,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1163,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 399,\n    columnNumber: 5\n  }, this);\n};\n_s(Tickets, \"Snml/HNiqRaRti8mg+YbK+pA79o=\", false, function () {\n  return [useSearchParams];\n});\n_c = Tickets;\nvar _c;\n$RefreshReg$(_c, \"Tickets\");","map":{"version":3,"names":["useState","useEffect","useRef","useSearchParams","apiClient","Card","CardContent","Button","Dialog","DialogContent","DialogHeader","DialogTitle","Input","Label","Select","SelectContent","SelectItem","SelectTrigger","SelectValue","Textarea","Plus","Search","X","Building2","Trash2","Edit2","Package","DollarSign","CheckCircle","AlertCircle","CreditCard","Banknote","FileText","Receipt","History","ChevronDown","ChevronUp","TrendingUp","Clock","toast","getUser","jsxDEV","_jsxDEV","PAYMENT_METHODS","id","label","icon","Tickets","_s","searchParams","setSearchParams","tickets","setTickets","products","setProducts","clients","setClients","comisionistas","setComisionistas","showModal","setShowModal","editingTicket","setEditingTicket","selectedCategory","setSelectedCategory","pendingInvoices","setPendingInvoices","invoiceHistory","setInvoiceHistory","showInvoiceHistory","setShowInvoiceHistory","selectedInvoice","setSelectedInvoice","selectedMonth","setSelectedMonth","now","Date","getFullYear","String","getMonth","padStart","filterPending","setFilterPending","ticketItems","setTicketItems","productSearch","setProductSearch","showProductSuggestions","setShowProductSuggestions","productInputRef","clientSearch","setClientSearch","showClientSuggestions","setShowClientSuggestions","selectedClient","setSelectedClient","clientInputRef","form","setForm","comisionista_id","client_name","client_email","notes","deleteConfirm","setDeleteConfirm","paymentModal","setPaymentModal","user","getAvailableMonths","months","i","date","value","toLocaleDateString","month","year","push","charAt","toUpperCase","slice","availableMonths","loadData","ticketsRes","productsRes","comisionistasRes","clientsRes","pendingInvoicesRes","Promise","all","get","data","error","loadInvoiceHistory","res","delete","replace","filteredProducts","filter","p","searchTerm","toLowerCase","matchesSearch","name","includes","category","matchesCategory","shouldShowSuggestions","filteredClients","c","company_name","rut","handleAddProduct","product","existingIndex","findIndex","item","product_id","updatedItems","quantity","subtotal","sale_price","product_name","unit_price","success","handleRemoveItem","index","_","handleUpdateQuantity","newQuantity","handleSelectClient","client","_client$contacts","_client$contacts$","contacts","email","clearClient","calculateTotal","reduce","sum","handleSubmit","e","preventDefault","length","ticketData","items","map","client_id","put","post","resetForm","handleEdit","ticket","handleDelete","ticketId","handlePayment","paymentMethod","_PAYMENT_METHODS$find","find","m","updateCommissionStatus","status","formatCurrency","amount","Intl","NumberFormat","style","currency","format","getPaymentMethodLabel","method","found","markInvoiceAsInvoiced","invoiceId","toggleInvoiceHistory","calculateMetrics","split","Number","selectedMonthIndex","monthSales","saleDate","ticket_date","totalMonth","total_amount","pendingSales","payment_status","totalPending","paidSales","byPaymentMethod","getnet","count","total","efectivo","factura_mensual","otro","forEach","payment_method","monthSalesCount","pendingCount","paidCount","metrics","filteredTickets","className","children","fileName","_jsxFileName","lineNumber","columnNumber","role","onClick","onChange","target","invoice","sales_ids","idx","size","variant","invoiced_at","ticket_number","comisionista_name","total_commission","ticketNumber","hasClientId","commission_status","open","onOpenChange","onSubmit","onValueChange","placeholder","Set","sort","ref","onFocus","type","required","rows","disabled","Icon","isInvoiceMethod","isDisabled","sale_number","sale_date","_c","$RefreshReg$"],"sources":["/Users/eddiecerpa/Downloads/TNAOffice_MariaDB-2/frontend/src/pages/Tickets.js"],"sourcesContent":["import { useState, useEffect, useRef } from 'react';\nimport { useSearchParams } from 'react-router-dom';\nimport apiClient from '../utils/api';\nimport { Card, CardContent } from '../components/ui/card';\nimport { Button } from '../components/ui/button';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '../components/ui/dialog';\nimport { Input } from '../components/ui/input';\nimport { Label } from '../components/ui/label';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '../components/ui/select';\nimport { Textarea } from '../components/ui/textarea';\nimport { Plus, Search, X, Building2, Trash2, Edit2, Package, DollarSign, CheckCircle, AlertCircle, CreditCard, Banknote, FileText, Receipt, History, ChevronDown, ChevronUp, TrendingUp, Clock } from 'lucide-react';\nimport { toast } from 'sonner';\nimport { getUser } from '../utils/auth';\n\nconst PAYMENT_METHODS = [\n  { id: 'getnet', label: 'Getnet', icon: CreditCard },\n  { id: 'efectivo', label: 'Efectivo', icon: Banknote },\n  { id: 'factura_mensual', label: 'Agregar a Factura Mensual', icon: FileText },\n];\n\nexport const Tickets = () => {\n  const [searchParams, setSearchParams] = useSearchParams();\n  const [tickets, setTickets] = useState([]);\n  const [products, setProducts] = useState([]);\n  const [clients, setClients] = useState([]);\n  const [comisionistas, setComisionistas] = useState([]);\n  const [showModal, setShowModal] = useState(false);\n  const [editingTicket, setEditingTicket] = useState(null);\n  const [selectedCategory, setSelectedCategory] = useState('');\n  \n  // Estados para facturas\n  const [pendingInvoices, setPendingInvoices] = useState([]);\n  const [invoiceHistory, setInvoiceHistory] = useState([]);\n  const [showInvoiceHistory, setShowInvoiceHistory] = useState(false);\n  const [selectedInvoice, setSelectedInvoice] = useState(null);\n  \n  // Estados para métricas y filtros\n  const [selectedMonth, setSelectedMonth] = useState(() => {\n    const now = new Date();\n    return `${now.getFullYear()}-${String(now.getMonth() + 1).padStart(2, '0')}`;\n  });\n  const [filterPending, setFilterPending] = useState(false);\n  \n  // Estados para items de la venta\n  const [ticketItems, setTicketItems] = useState([]);\n  \n  // Estados para autocompletado de producto\n  const [productSearch, setProductSearch] = useState('');\n  const [showProductSuggestions, setShowProductSuggestions] = useState(false);\n  const productInputRef = useRef(null);\n  \n  // Estados para búsqueda de cliente\n  const [clientSearch, setClientSearch] = useState('');\n  const [showClientSuggestions, setShowClientSuggestions] = useState(false);\n  const [selectedClient, setSelectedClient] = useState(null);\n  const clientInputRef = useRef(null);\n  \n  const [form, setForm] = useState({\n    comisionista_id: '',\n    client_name: '',\n    client_email: '',\n    notes: ''\n  });\n  \n  const [deleteConfirm, setDeleteConfirm] = useState(null);\n  const [paymentModal, setPaymentModal] = useState(null);\n  const user = getUser();\n\n  // Generar lista de meses disponibles (últimos 12 meses)\n  const getAvailableMonths = () => {\n    const months = [];\n    const now = new Date();\n    for (let i = 0; i < 12; i++) {\n      const date = new Date(now.getFullYear(), now.getMonth() - i, 1);\n      const value = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}`;\n      const label = date.toLocaleDateString('es-CL', { month: 'long', year: 'numeric' });\n      months.push({ value, label: label.charAt(0).toUpperCase() + label.slice(1) });\n    }\n    return months;\n  };\n\n  const availableMonths = getAvailableMonths();\n\n  const loadData = async () => {\n    try {\n      const [ticketsRes, productsRes, comisionistasRes, clientsRes, pendingInvoicesRes] = await Promise.all([\n        apiClient.get('/tickets'),\n        apiClient.get('/products'),\n        apiClient.get('/comisionistas'),\n        apiClient.get('/clients'),\n        apiClient.get('/invoices/pending')\n      ]);\n      setTickets(ticketsRes.data);\n      setProducts(productsRes.data);\n      setComisionistas(comisionistasRes.data);\n      setClients(clientsRes.data);\n      setPendingInvoices(pendingInvoicesRes.data);\n    } catch (error) {\n      toast.error('Error al cargar datos');\n    }\n  };\n\n  const loadInvoiceHistory = async () => {\n    try {\n      const res = await apiClient.get('/invoices/history');\n      setInvoiceHistory(res.data);\n    } catch (error) {\n      toast.error('Error al cargar historial');\n    }\n  };\n\n  useEffect(() => {\n    loadData();\n  }, []);\n\n  // Detectar parámetro newSale para abrir modal automáticamente\n  useEffect(() => {\n    if (searchParams.get('newSale') === 'true') {\n      setShowModal(true);\n      // Limpiar el parámetro de la URL\n      searchParams.delete('newSale');\n      setSearchParams(searchParams, { replace: true });\n    }\n  }, [searchParams, setSearchParams]);\n\n  // Filtrar productos según búsqueda y categoría\n  const filteredProducts = products.filter(p => {\n    const searchTerm = productSearch.toLowerCase();\n    const matchesSearch = !searchTerm || \n                         p.name.toLowerCase().includes(searchTerm) ||\n                         p.category.toLowerCase().includes(searchTerm);\n    const matchesCategory = !selectedCategory || selectedCategory === 'all' || p.category === selectedCategory;\n    return matchesSearch && matchesCategory;\n  });\n\n  // Mostrar sugerencias cuando hay categoría seleccionada O cuando hay texto de búsqueda\n  const shouldShowSuggestions = showProductSuggestions && \n    (productSearch || (selectedCategory && selectedCategory !== 'all'));\n\n  // Filtrar clientes según búsqueda\n  const filteredClients = clients.filter(c => \n    c.company_name.toLowerCase().includes(clientSearch.toLowerCase()) ||\n    (c.rut && c.rut.toLowerCase().includes(clientSearch.toLowerCase()))\n  );\n\n  const handleAddProduct = (product) => {\n    // Verificar si el producto ya está en la lista\n    const existingIndex = ticketItems.findIndex(item => item.product_id === product.id);\n    \n    if (existingIndex >= 0) {\n      // Incrementar cantidad si ya existe\n      const updatedItems = [...ticketItems];\n      updatedItems[existingIndex].quantity += 1;\n      updatedItems[existingIndex].subtotal = updatedItems[existingIndex].quantity * product.sale_price;\n      setTicketItems(updatedItems);\n    } else {\n      // Agregar nuevo producto\n      setTicketItems([...ticketItems, {\n        product_id: product.id,\n        product_name: product.name,\n        category: product.category,\n        quantity: 1,\n        unit_price: product.sale_price,\n        subtotal: product.sale_price\n      }]);\n    }\n    \n    setProductSearch('');\n    setShowProductSuggestions(false);\n    toast.success(`${product.name} agregado`);\n  };\n\n  const handleRemoveItem = (index) => {\n    const updatedItems = ticketItems.filter((_, i) => i !== index);\n    setTicketItems(updatedItems);\n  };\n\n  const handleUpdateQuantity = (index, newQuantity) => {\n    if (newQuantity < 1) return;\n    const updatedItems = [...ticketItems];\n    updatedItems[index].quantity = newQuantity;\n    updatedItems[index].subtotal = newQuantity * updatedItems[index].unit_price;\n    setTicketItems(updatedItems);\n  };\n\n  const handleSelectClient = (client) => {\n    setSelectedClient(client);\n    setClientSearch(client.company_name);\n    setForm({ ...form, client_name: client.company_name, client_email: client.contacts?.[0]?.email || '' });\n    setShowClientSuggestions(false);\n  };\n\n  const clearClient = () => {\n    setSelectedClient(null);\n    setClientSearch('');\n    setForm({ ...form, client_name: '', client_email: '' });\n  };\n\n  const calculateTotal = () => {\n    return ticketItems.reduce((sum, item) => sum + item.subtotal, 0);\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    if (ticketItems.length === 0) {\n      toast.error('Agrega al menos un producto');\n      return;\n    }\n    \n    if (!form.client_name && !clientSearch) {\n      toast.error('Ingresa el nombre del cliente');\n      return;\n    }\n    \n    const ticketData = {\n      items: ticketItems.map(item => ({\n        product_id: item.product_id,\n        quantity: item.quantity\n      })),\n      comisionista_id: form.comisionista_id || '',\n      client_id: selectedClient?.id || '',  // Incluir ID del cliente si fue seleccionado\n      client_name: form.client_name || clientSearch,\n      client_email: form.client_email || '',\n      notes: form.notes || ''\n    };\n    \n    try {\n      if (editingTicket) {\n        await apiClient.put(`/tickets/${editingTicket.id}`, ticketData);\n        toast.success('Venta actualizada');\n      } else {\n        await apiClient.post('/tickets', ticketData);\n        toast.success('Venta creada');\n      }\n      setShowModal(false);\n      resetForm();\n      loadData();\n    } catch (error) {\n      toast.error(editingTicket ? 'Error al actualizar venta' : 'Error al crear venta');\n    }\n  };\n\n  const resetForm = () => {\n    setForm({\n      comisionista_id: '',\n      client_name: '',\n      client_email: '',\n      notes: ''\n    });\n    setTicketItems([]);\n    setSelectedClient(null);\n    setClientSearch('');\n    setProductSearch('');\n    setSelectedCategory('');\n    setEditingTicket(null);\n  };\n\n  const handleEdit = (ticket) => {\n    setEditingTicket(ticket);\n    setTicketItems(ticket.items.map(item => ({\n      product_id: item.product_id,\n      product_name: item.product_name,\n      category: item.category,\n      quantity: item.quantity,\n      unit_price: item.unit_price,\n      subtotal: item.subtotal\n    })));\n    setForm({\n      comisionista_id: ticket.comisionista_id || '',\n      client_name: ticket.client_name,\n      client_email: ticket.client_email || '',\n      notes: ticket.notes || ''\n    });\n    setClientSearch(ticket.client_name);\n    setShowModal(true);\n  };\n\n  const handleDelete = async (ticketId) => {\n    try {\n      await apiClient.delete(`/tickets/${ticketId}`);\n      toast.success('Venta eliminada');\n      setDeleteConfirm(null);\n      loadData();\n    } catch (error) {\n      toast.error('Error al eliminar venta');\n    }\n  };\n\n  const handlePayment = async (paymentMethod) => {\n    if (!paymentModal) return;\n    \n    try {\n      await apiClient.put(`/tickets/${paymentModal.ticketId}/payment?payment_status=paid&payment_method=${paymentMethod}`);\n      toast.success(`Pago registrado: ${PAYMENT_METHODS.find(m => m.id === paymentMethod)?.label}`);\n      setPaymentModal(null);\n      loadData();\n    } catch (error) {\n      toast.error('Error al actualizar estado de pago');\n    }\n  };\n\n  const updateCommissionStatus = async (ticketId, status) => {\n    try {\n      await apiClient.put(`/tickets/${ticketId}/commission?commission_status=${status}`);\n      toast.success('Estado de comisión actualizado');\n      loadData();\n    } catch (error) {\n      toast.error('Error al actualizar comisión');\n    }\n  };\n\n  const formatCurrency = (amount) => {\n    return new Intl.NumberFormat('es-CL', { style: 'currency', currency: 'CLP' }).format(amount);\n  };\n\n  const getPaymentMethodLabel = (method) => {\n    const found = PAYMENT_METHODS.find(m => m.id === method);\n    return found ? found.label : method;\n  };\n\n  const markInvoiceAsInvoiced = async (invoiceId) => {\n    try {\n      await apiClient.put(`/invoices/${invoiceId}/status?status=invoiced`);\n      toast.success('Factura marcada como FACTURADA');\n      loadData();\n      if (showInvoiceHistory) {\n        loadInvoiceHistory();\n      }\n    } catch (error) {\n      toast.error('Error al actualizar factura');\n    }\n  };\n\n  const toggleInvoiceHistory = () => {\n    if (!showInvoiceHistory) {\n      loadInvoiceHistory();\n    }\n    setShowInvoiceHistory(!showInvoiceHistory);\n  };\n\n  // Calcular métricas de ventas\n  const calculateMetrics = () => {\n    // Parsear mes seleccionado\n    const [year, month] = selectedMonth.split('-').map(Number);\n    const selectedMonthIndex = month - 1; // Los meses en JS son 0-indexed\n    \n    // Filtrar ventas del mes seleccionado\n    const monthSales = tickets.filter(ticket => {\n      const saleDate = new Date(ticket.ticket_date);\n      return saleDate.getMonth() === selectedMonthIndex && saleDate.getFullYear() === year;\n    });\n    \n    // Total del mes\n    const totalMonth = monthSales.reduce((sum, ticket) => sum + ticket.total_amount, 0);\n    \n    // Ventas pendientes de pago (todas, no solo del mes)\n    const pendingSales = tickets.filter(ticket => ticket.payment_status === 'pending');\n    const totalPending = pendingSales.reduce((sum, ticket) => sum + ticket.total_amount, 0);\n    \n    // Desglose por forma de pago (solo pagadas)\n    const paidSales = tickets.filter(ticket => ticket.payment_status === 'paid');\n    const byPaymentMethod = {\n      getnet: { count: 0, total: 0 },\n      efectivo: { count: 0, total: 0 },\n      factura_mensual: { count: 0, total: 0 },\n      otro: { count: 0, total: 0 }\n    };\n    \n    paidSales.forEach(ticket => {\n      const method = ticket.payment_method || 'otro';\n      if (byPaymentMethod[method]) {\n        byPaymentMethod[method].count++;\n        byPaymentMethod[method].total += ticket.total_amount;\n      } else {\n        byPaymentMethod.otro.count++;\n        byPaymentMethod.otro.total += ticket.total_amount;\n      }\n    });\n    \n    return {\n      totalMonth,\n      monthSalesCount: monthSales.length,\n      pendingCount: pendingSales.length,\n      totalPending,\n      paidCount: paidSales.length,\n      byPaymentMethod\n    };\n  };\n\n  const metrics = calculateMetrics();\n\n  // Filtrar ventas para mostrar\n  const filteredTickets = filterPending \n    ? tickets.filter(ticket => ticket.payment_status === 'pending')\n    : tickets;\n\n  return (\n    <div className=\"space-y-6\" data-testid=\"ventas-page\">\n      {/* TÍTULO Y BOTÓN NUEVA VENTA - SIEMPRE EN LA PARTE SUPERIOR */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"font-secondary text-4xl md:text-5xl font-black uppercase text-black tracking-tight\">\n            VENTAS\n          </h1>\n          <div className=\"h-1 w-32 tna-gradient mt-4\"></div>\n        </div>\n        {user?.role !== 'comisionista' && (\n          <Button\n            data-testid=\"add-venta-button\"\n            onClick={() => setShowModal(true)}\n            className=\"bg-white text-black hover:bg-zinc-200 rounded-sm font-bold uppercase tracking-wide font-secondary\"\n          >\n            <Plus className=\"w-4 h-4 mr-2\" />\n            NUEVA VENTA\n          </Button>\n        )}\n      </div>\n\n      {/* MÉTRICAS DE VENTAS */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n        {/* Total del Mes con selector */}\n        <Card className=\"bg-white border-gray-200 rounded-sm\">\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-center justify-between mb-2\">\n              <p className=\"text-xs text-gray-500 font-primary uppercase\">Ventas del Mes</p>\n              <select\n                value={selectedMonth}\n                onChange={(e) => setSelectedMonth(e.target.value)}\n                className=\"text-xs bg-gray-100 border-0 rounded px-2 py-1 font-primary text-gray-600 cursor-pointer hover:bg-gray-200 transition-colors\"\n              >\n                {availableMonths.map(month => (\n                  <option key={month.value} value={month.value}>{month.label}</option>\n                ))}\n              </select>\n            </div>\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-2xl font-bold text-black font-secondary\">{formatCurrency(metrics.totalMonth)}</p>\n                <p className=\"text-xs text-gray-400 font-primary\">{metrics.monthSalesCount} ventas</p>\n              </div>\n              <div className=\"w-12 h-12 bg-green-100 rounded-sm flex items-center justify-center\">\n                <TrendingUp className=\"w-6 h-6 text-green-600\" />\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Pendientes de Pago - Clickeable para filtrar */}\n        <Card \n          className={`bg-white border-gray-200 rounded-sm cursor-pointer transition-all hover:shadow-md ${\n            filterPending ? 'ring-2 ring-amber-400 border-amber-400' : ''\n          }`}\n          onClick={() => setFilterPending(!filterPending)}\n        >\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <div className=\"flex items-center gap-2\">\n                  <p className=\"text-xs text-gray-500 font-primary uppercase\">Pendientes de Pago</p>\n                  {filterPending && (\n                    <span className=\"text-xs bg-amber-100 text-amber-700 px-1.5 py-0.5 rounded font-primary\">\n                      Filtro activo\n                    </span>\n                  )}\n                </div>\n                <p className=\"text-2xl font-bold text-black font-secondary\">{formatCurrency(metrics.totalPending)}</p>\n                <p className=\"text-xs text-gray-400 font-primary\">{metrics.pendingCount} ventas • Click para filtrar</p>\n              </div>\n              <div className={`w-12 h-12 rounded-sm flex items-center justify-center ${\n                filterPending ? 'bg-amber-400' : 'bg-amber-100'\n              }`}>\n                <Clock className={`w-6 h-6 ${filterPending ? 'text-white' : 'text-amber-600'}`} />\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Por Forma de Pago */}\n        <Card className=\"bg-white border-gray-200 rounded-sm lg:col-span-2\">\n          <CardContent className=\"p-4\">\n            <p className=\"text-xs text-gray-500 font-primary uppercase mb-3\">Formas de Pago</p>\n            <div className=\"grid grid-cols-3 gap-4\">\n              <div className=\"text-center\">\n                <div className=\"flex items-center justify-center gap-1 mb-1\">\n                  <CreditCard className=\"w-4 h-4 text-blue-500\" />\n                  <span className=\"text-xs font-primary text-gray-600\">Getnet</span>\n                </div>\n                <p className=\"font-bold text-black font-secondary\">{formatCurrency(metrics.byPaymentMethod.getnet.total)}</p>\n                <p className=\"text-xs text-gray-400 font-primary\">{metrics.byPaymentMethod.getnet.count} ventas</p>\n              </div>\n              <div className=\"text-center\">\n                <div className=\"flex items-center justify-center gap-1 mb-1\">\n                  <Banknote className=\"w-4 h-4 text-green-500\" />\n                  <span className=\"text-xs font-primary text-gray-600\">Efectivo</span>\n                </div>\n                <p className=\"font-bold text-black font-secondary\">{formatCurrency(metrics.byPaymentMethod.efectivo.total)}</p>\n                <p className=\"text-xs text-gray-400 font-primary\">{metrics.byPaymentMethod.efectivo.count} ventas</p>\n              </div>\n              <div className=\"text-center\">\n                <div className=\"flex items-center justify-center gap-1 mb-1\">\n                  <FileText className=\"w-4 h-4 text-orange-500\" />\n                  <span className=\"text-xs font-primary text-gray-600\">Factura</span>\n                </div>\n                <p className=\"font-bold text-black font-secondary\">{formatCurrency(metrics.byPaymentMethod.factura_mensual.total)}</p>\n                <p className=\"text-xs text-gray-400 font-primary\">{metrics.byPaymentMethod.factura_mensual.count} ventas</p>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* SECCIÓN DE FACTURAS PENDIENTES */}\n      {pendingInvoices.length > 0 && (\n        <div className=\"bg-amber-50 border-2 border-amber-400 rounded-sm p-4\">\n          <div className=\"flex items-center gap-2 mb-4\">\n            <Receipt className=\"w-5 h-5 text-amber-600\" />\n            <h2 className=\"font-secondary text-lg font-bold text-amber-800 uppercase\">\n              Facturas Pendientes de Facturar ({pendingInvoices.length})\n            </h2>\n          </div>\n          <div className=\"space-y-3\">\n            {pendingInvoices.map((invoice) => (\n              <Card key={invoice.id} className=\"bg-white border-amber-200 rounded-sm\">\n                <CardContent className=\"p-4\">\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center gap-3 mb-2\">\n                        <Building2 className=\"w-5 h-5 text-amber-600\" />\n                        <span className=\"font-secondary font-bold text-black\">{invoice.client_name}</span>\n                        <span className=\"text-xs bg-amber-100 text-amber-700 px-2 py-1 rounded-sm font-primary\">\n                          PENDIENTE DE FACTURAR\n                        </span>\n                      </div>\n                      <div className=\"text-sm text-gray-600 font-primary mb-2\">\n                        {invoice.items.length} producto(s) • {invoice.sales_ids.length} venta(s)\n                      </div>\n                      <div className=\"flex flex-wrap gap-2\">\n                        {invoice.items.slice(0, 5).map((item, idx) => (\n                          <span key={idx} className=\"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded-sm font-primary\">\n                            {item.quantity}x {item.product_name}\n                          </span>\n                        ))}\n                        {invoice.items.length > 5 && (\n                          <span className=\"text-xs bg-gray-100 text-gray-500 px-2 py-1 rounded-sm font-primary\">\n                            +{invoice.items.length - 5} más\n                          </span>\n                        )}\n                      </div>\n                    </div>\n                    <div className=\"flex flex-col items-end gap-2\">\n                      <div className=\"text-right\">\n                        <div className=\"text-xs text-gray-500 font-primary\">Total a Facturar</div>\n                        <div className=\"text-xl font-bold text-black font-secondary\">\n                          {formatCurrency(invoice.total_amount)}\n                        </div>\n                      </div>\n                      <div className=\"flex gap-2\">\n                        <Button\n                          size=\"sm\"\n                          variant=\"outline\"\n                          onClick={() => setSelectedInvoice(invoice)}\n                          className=\"text-gray-600 font-secondary text-xs\"\n                        >\n                          VER DETALLE\n                        </Button>\n                        <Button\n                          size=\"sm\"\n                          onClick={() => markInvoiceAsInvoiced(invoice.id)}\n                          className=\"bg-green-600 hover:bg-green-700 text-white font-secondary text-xs\"\n                        >\n                          <CheckCircle className=\"w-3 h-3 mr-1\" />\n                          MARCAR FACTURADA\n                        </Button>\n                      </div>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* HISTORIAL DE FACTURAS */}\n      <div className=\"border border-gray-200 rounded-sm\">\n        <button\n          onClick={toggleInvoiceHistory}\n          className=\"w-full flex items-center justify-between p-4 bg-gray-50 hover:bg-gray-100 transition-colors\"\n        >\n          <div className=\"flex items-center gap-2\">\n            <History className=\"w-5 h-5 text-gray-500\" />\n            <span className=\"font-secondary font-bold text-gray-700 uppercase\">\n              Historial de Facturas\n            </span>\n            {invoiceHistory.length > 0 && (\n              <span className=\"text-xs bg-gray-200 text-gray-600 px-2 py-1 rounded-sm font-primary\">\n                {invoiceHistory.length}\n              </span>\n            )}\n          </div>\n          {showInvoiceHistory ? <ChevronUp className=\"w-5 h-5 text-gray-500\" /> : <ChevronDown className=\"w-5 h-5 text-gray-500\" />}\n        </button>\n        \n        {showInvoiceHistory && (\n          <div className=\"p-4 border-t border-gray-200 bg-white\">\n            {invoiceHistory.length > 0 ? (\n              <div className=\"space-y-3\">\n                {invoiceHistory.map((invoice) => (\n                  <div key={invoice.id} className=\"flex items-center justify-between p-3 bg-gray-50 rounded-sm\">\n                    <div className=\"flex items-center gap-3\">\n                      <CheckCircle className=\"w-5 h-5 text-green-500\" />\n                      <div>\n                        <span className=\"font-primary font-medium text-black\">{invoice.client_name}</span>\n                        <div className=\"text-xs text-gray-500 font-primary\">\n                          Facturada el {new Date(invoice.invoiced_at).toLocaleDateString('es-CL')}\n                        </div>\n                      </div>\n                    </div>\n                    <div className=\"flex items-center gap-4\">\n                      <span className=\"font-secondary font-bold text-black\">{formatCurrency(invoice.total_amount)}</span>\n                      <Button\n                        size=\"sm\"\n                        variant=\"ghost\"\n                        onClick={() => setSelectedInvoice(invoice)}\n                        className=\"text-gray-500 text-xs\"\n                      >\n                        Ver\n                      </Button>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            ) : (\n              <p className=\"text-gray-500 text-center font-primary py-4\">No hay facturas en el historial</p>\n            )}\n          </div>\n        )}\n      </div>\n\n      {/* LISTA DE VENTAS */}\n      {filterPending && (\n        <div className=\"flex items-center justify-between bg-amber-50 border border-amber-200 rounded-sm px-4 py-2\">\n          <span className=\"text-sm font-primary text-amber-800\">\n            Mostrando solo ventas pendientes de pago ({filteredTickets.length})\n          </span>\n          <button\n            onClick={() => setFilterPending(false)}\n            className=\"text-xs text-amber-700 hover:text-amber-900 font-primary underline\"\n          >\n            Mostrar todas\n          </button>\n        </div>\n      )}\n      \n      <div className=\"space-y-4\">\n        {filteredTickets.map((ticket) => (\n          <Card key={ticket.id} className=\"bg-white border-gray-200 rounded-sm overflow-hidden\">\n            <CardContent className=\"p-0\">\n              {/* Header de la venta */}\n              <div className=\"bg-gray-50 px-6 py-3 border-b border-gray-200 flex items-center justify-between\">\n                <div className=\"flex items-center gap-4\">\n                  <span className=\"font-secondary font-bold text-lg text-black\">\n                    VENTA #{ticket.ticket_number}\n                  </span>\n                  <span className=\"text-gray-500 text-sm font-primary\">\n                    {new Date(ticket.ticket_date).toLocaleDateString('es-CL')}\n                  </span>\n                </div>\n                {user?.role === 'admin' && (\n                  <div className=\"flex items-center gap-2\">\n                    <Button\n                      size=\"sm\"\n                      variant=\"ghost\"\n                      onClick={() => handleEdit(ticket)}\n                      className=\"text-gray-600 hover:text-black\"\n                    >\n                      <Edit2 className=\"w-4 h-4\" />\n                    </Button>\n                    <Button\n                      size=\"sm\"\n                      variant=\"ghost\"\n                      onClick={() => setDeleteConfirm(ticket.id)}\n                      className=\"text-gray-600 hover:text-red-600\"\n                    >\n                      <Trash2 className=\"w-4 h-4\" />\n                    </Button>\n                  </div>\n                )}\n              </div>\n              \n              {/* Contenido de la venta */}\n              <div className=\"p-6\">\n                <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-6\">\n                  {/* Items de la venta */}\n                  <div className=\"lg:col-span-2\">\n                    <div className=\"text-xs text-gray-500 font-primary mb-2 uppercase\">Productos</div>\n                    <div className=\"space-y-2\">\n                      {ticket.items.map((item, idx) => (\n                        <div key={idx} className=\"flex items-center justify-between text-sm\">\n                          <div className=\"flex items-center gap-2\">\n                            <Package className=\"w-4 h-4 text-orange-500\" />\n                            <span className=\"font-primary text-black\">\n                              {item.quantity}x {item.product_name}\n                            </span>\n                            <span className=\"text-xs text-gray-400\">[{item.category}]</span>\n                          </div>\n                          <span className=\"font-primary text-gray-600\">\n                            {formatCurrency(item.subtotal)}\n                          </span>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                  \n                  {/* Cliente */}\n                  <div>\n                    <div className=\"text-xs text-gray-500 font-primary mb-2 uppercase\">Cliente</div>\n                    <div className=\"text-black font-primary font-medium\">{ticket.client_name}</div>\n                    {ticket.client_email && (\n                      <div className=\"text-gray-500 text-xs font-primary\">{ticket.client_email}</div>\n                    )}\n                    {ticket.comisionista_name && (\n                      <div className=\"mt-2\">\n                        <div className=\"text-xs text-gray-500 font-primary\">Comisionista</div>\n                        <div className=\"text-black font-primary text-sm\">{ticket.comisionista_name}</div>\n                        <div className=\"text-[#00E5FF] font-bold text-sm\">{formatCurrency(ticket.total_commission)}</div>\n                      </div>\n                    )}\n                  </div>\n                  \n                  {/* Total y acciones */}\n                  <div className=\"flex flex-col items-end gap-3\">\n                    <div className=\"text-right\">\n                      <div className=\"text-xs text-gray-500 font-primary\">Total</div>\n                      <div className=\"text-2xl font-bold text-black font-secondary\">\n                        {formatCurrency(ticket.total_amount)}\n                      </div>\n                    </div>\n                    \n                    {user?.role === 'admin' && (\n                      <div className=\"flex gap-2\">\n                        {ticket.payment_status === 'pending' && (\n                          <Button\n                            size=\"sm\"\n                            onClick={() => setPaymentModal({ \n                              ticketId: ticket.id, \n                              ticketNumber: ticket.ticket_number,\n                              hasClientId: !!ticket.client_id\n                            })}\n                            className=\"bg-green-900 hover:bg-green-800 text-white rounded-sm text-xs font-secondary\"\n                          >\n                            <DollarSign className=\"w-3 h-3 mr-1\" />\n                            PAGAR\n                          </Button>\n                        )}\n                        {ticket.payment_status === 'paid' && ticket.commission_status === 'pending' && ticket.comisionista_id && (\n                          <Button\n                            size=\"sm\"\n                            onClick={() => updateCommissionStatus(ticket.id, 'paid')}\n                            className=\"bg-blue-900 hover:bg-blue-800 text-white rounded-sm text-xs font-secondary\"\n                          >\n                            <CheckCircle className=\"w-3 h-3 mr-1\" />\n                            COMISIÓN\n                          </Button>\n                        )}\n                      </div>\n                    )}\n                    \n                    <div className=\"flex gap-2 flex-wrap justify-end\">\n                      <span className={`text-xs px-2 py-1 rounded-sm font-primary ${\n                        ticket.payment_status === 'paid' ? 'bg-green-100 text-green-700' : 'bg-gray-100 text-gray-600'\n                      }`}>\n                        {ticket.payment_status === 'paid' \n                          ? `✓ ${ticket.payment_method ? getPaymentMethodLabel(ticket.payment_method) : 'Pagado'}` \n                          : 'Pendiente'}\n                      </span>\n                      {ticket.comisionista_id && (\n                        <span className={`text-xs px-2 py-1 rounded-sm font-primary ${\n                          ticket.commission_status === 'paid' ? 'bg-blue-100 text-blue-700' : 'bg-gray-100 text-gray-600'\n                        }`}>\n                          Com: {ticket.commission_status === 'paid' ? '✓ Pagada' : 'Pendiente'}\n                        </span>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n\n      {filteredTickets.length === 0 && (\n        <Card className=\"bg-white border-gray-200 rounded-sm\">\n          <CardContent className=\"py-12 text-center\">\n            <p className=\"text-gray-500 font-primary\">\n              {filterPending ? 'No hay ventas pendientes de pago' : 'No hay ventas registradas'}\n            </p>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Modal de creación/edición */}\n      <Dialog open={showModal} onOpenChange={(open) => {\n        setShowModal(open);\n        if (!open) resetForm();\n      }}>\n        <DialogContent className=\"bg-white border-gray-200 text-black max-w-3xl max-h-[90vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle className=\"font-secondary uppercase text-xl text-black\">\n              {editingTicket ? 'EDITAR VENTA' : 'NUEVA VENTA'}\n            </DialogTitle>\n          </DialogHeader>\n          <form onSubmit={handleSubmit} className=\"space-y-4 mt-4\">\n            {/* Sección de agregar productos */}\n            <div className=\"border border-gray-200 rounded-sm p-4 bg-gray-50\">\n              <Label className=\"text-black font-primary font-medium mb-3 block\">Agregar Productos</Label>\n              \n              {/* Filtro de categoría */}\n              <div className=\"flex gap-3 mb-3\">\n                <Select \n                  value={selectedCategory} \n                  onValueChange={(value) => {\n                    setSelectedCategory(value);\n                    setShowProductSuggestions(true);\n                  }}\n                >\n                  <SelectTrigger className=\"bg-white border-gray-300 text-black w-48\">\n                    <SelectValue placeholder=\"Categoría\" />\n                  </SelectTrigger>\n                  <SelectContent className=\"bg-white border-gray-300 text-black max-h-60\">\n                    <SelectItem value=\"all\">Todas</SelectItem>\n                    {[...new Set(products.map(p => p.category))].sort().map(category => (\n                      <SelectItem key={category} value={category}>{category}</SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n                \n                {/* Búsqueda de producto */}\n                <div className=\"relative flex-1\">\n                  <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400\" />\n                  <Input\n                    ref={productInputRef}\n                    value={productSearch}\n                    onChange={(e) => {\n                      setProductSearch(e.target.value);\n                      setShowProductSuggestions(true);\n                    }}\n                    onFocus={() => setShowProductSuggestions(true)}\n                    className=\"bg-white border-gray-300 text-black pl-10\"\n                    placeholder=\"Buscar producto...\"\n                  />\n                  \n                  {/* Lista de sugerencias - muestra cuando hay categoría seleccionada o texto de búsqueda */}\n                  {shouldShowSuggestions && (\n                    <div className=\"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-sm shadow-lg max-h-48 overflow-y-auto\">\n                      {filteredProducts.length > 0 ? (\n                        filteredProducts.slice(0, 10).map(product => (\n                          <button\n                            key={product.id}\n                            type=\"button\"\n                            onClick={() => handleAddProduct(product)}\n                            className=\"w-full text-left px-4 py-2 hover:bg-gray-50 border-b border-gray-100 last:border-b-0\"\n                          >\n                            <div className=\"flex justify-between items-center\">\n                              <div>\n                                <span className=\"text-xs text-orange-600 font-primary\">[{product.category}]</span>\n                                <span className=\"ml-2 font-primary text-black\">{product.name}</span>\n                              </div>\n                              <span className=\"text-green-600 font-bold font-primary\">{formatCurrency(product.sale_price)}</span>\n                            </div>\n                          </button>\n                        ))\n                      ) : (\n                        <div className=\"px-4 py-3 text-gray-500 text-sm font-primary\">\n                          No se encontraron productos\n                        </div>\n                      )}\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n\n            {/* Lista de items de la venta */}\n            {ticketItems.length > 0 && (\n              <div className=\"border border-gray-200 rounded-sm overflow-hidden\">\n                <div className=\"bg-gray-100 px-4 py-2 font-secondary text-sm uppercase text-gray-600\">\n                  Productos en la venta ({ticketItems.length})\n                </div>\n                <div className=\"divide-y divide-gray-100\">\n                  {ticketItems.map((item, index) => (\n                    <div key={index} className=\"flex items-center justify-between px-4 py-3 bg-white\">\n                      <div className=\"flex items-center gap-3 flex-1\">\n                        <Package className=\"w-4 h-4 text-orange-500\" />\n                        <div>\n                          <span className=\"font-primary text-black\">{item.product_name}</span>\n                          <span className=\"text-xs text-gray-400 ml-2\">[{item.category}]</span>\n                        </div>\n                      </div>\n                      \n                      <div className=\"flex items-center gap-4\">\n                        <div className=\"flex items-center gap-2\">\n                          <Button\n                            type=\"button\"\n                            size=\"sm\"\n                            variant=\"outline\"\n                            onClick={() => handleUpdateQuantity(index, item.quantity - 1)}\n                            className=\"h-7 w-7 p-0\"\n                          >\n                            -\n                          </Button>\n                          <span className=\"w-8 text-center font-primary\">{item.quantity}</span>\n                          <Button\n                            type=\"button\"\n                            size=\"sm\"\n                            variant=\"outline\"\n                            onClick={() => handleUpdateQuantity(index, item.quantity + 1)}\n                            className=\"h-7 w-7 p-0\"\n                          >\n                            +\n                          </Button>\n                        </div>\n                        \n                        <span className=\"font-primary font-bold text-black w-24 text-right\">\n                          {formatCurrency(item.subtotal)}\n                        </span>\n                        \n                        <Button\n                          type=\"button\"\n                          size=\"sm\"\n                          variant=\"ghost\"\n                          onClick={() => handleRemoveItem(index)}\n                          className=\"text-gray-400 hover:text-red-600\"\n                        >\n                          <X className=\"w-4 h-4\" />\n                        </Button>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n                <div className=\"bg-gray-50 px-4 py-3 flex justify-between items-center border-t border-gray-200\">\n                  <span className=\"font-secondary uppercase text-gray-600\">Total</span>\n                  <span className=\"font-secondary text-xl font-bold text-black\">{formatCurrency(calculateTotal())}</span>\n                </div>\n              </div>\n            )}\n\n            {ticketItems.length === 0 && (\n              <div className=\"border border-dashed border-gray-300 rounded-sm py-8 text-center\">\n                <Package className=\"w-8 h-8 text-gray-300 mx-auto mb-2\" />\n                <p className=\"text-gray-400 font-primary text-sm\">Busca y agrega productos a la venta</p>\n              </div>\n            )}\n\n            {/* Comisionista */}\n            <div>\n              <Label className=\"text-black font-primary font-medium\">Comisionista (opcional)</Label>\n              <Select value={form.comisionista_id || 'none'} onValueChange={(value) => setForm({ ...form, comisionista_id: value === 'none' ? '' : value })}>\n                <SelectTrigger className=\"bg-white border-gray-300 text-black\">\n                  <SelectValue placeholder=\"Sin comisionista\" />\n                </SelectTrigger>\n                <SelectContent className=\"bg-white border-gray-300 text-black\">\n                  <SelectItem value=\"none\">Sin comisionista</SelectItem>\n                  {comisionistas.map(c => (\n                    <SelectItem key={c.id} value={c.id}>{c.name}</SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n\n            {/* Cliente */}\n            <div className=\"relative\">\n              <Label className=\"text-black font-primary font-medium\">Cliente *</Label>\n              <div className=\"relative\">\n                <Building2 className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400\" />\n                <Input\n                  ref={clientInputRef}\n                  value={clientSearch}\n                  onChange={(e) => {\n                    setClientSearch(e.target.value);\n                    setForm({ ...form, client_name: e.target.value });\n                    setShowClientSuggestions(true);\n                    if (!e.target.value) clearClient();\n                  }}\n                  onFocus={() => setShowClientSuggestions(true)}\n                  className=\"bg-white border-gray-300 text-black pl-10 pr-10\"\n                  placeholder=\"Buscar cliente o escribir nombre...\"\n                  required\n                />\n                {selectedClient && (\n                  <button\n                    type=\"button\"\n                    onClick={clearClient}\n                    className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600\"\n                  >\n                    <X className=\"w-4 h-4\" />\n                  </button>\n                )}\n              </div>\n              \n              {showClientSuggestions && clientSearch && filteredClients.length > 0 && !selectedClient && (\n                <div className=\"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-sm shadow-lg max-h-48 overflow-y-auto\">\n                  {filteredClients.slice(0, 8).map(client => (\n                    <button\n                      key={client.id}\n                      type=\"button\"\n                      onClick={() => handleSelectClient(client)}\n                      className=\"w-full text-left px-4 py-2 hover:bg-gray-50 border-b border-gray-100 last:border-b-0\"\n                    >\n                      <div className=\"flex items-center gap-2\">\n                        <Building2 className=\"w-4 h-4 text-blue-500\" />\n                        <span className=\"font-primary text-black font-medium\">{client.company_name}</span>\n                        {client.rut && <span className=\"text-xs text-gray-500\">{client.rut}</span>}\n                      </div>\n                    </button>\n                  ))}\n                </div>\n              )}\n              \n              {selectedClient && (\n                <div className=\"mt-2 p-2 bg-blue-50 border border-blue-200 rounded-sm\">\n                  <p className=\"text-sm font-primary flex items-center gap-2\">\n                    <Building2 className=\"w-4 h-4 text-blue-500\" />\n                    <span className=\"font-bold text-black\">{selectedClient.company_name}</span>\n                    {selectedClient.rut && <span className=\"text-gray-500\">({selectedClient.rut})</span>}\n                  </p>\n                </div>\n              )}\n            </div>\n\n            {/* Email */}\n            <div>\n              <Label className=\"text-black font-primary font-medium\">Email (opcional)</Label>\n              <Input\n                type=\"email\"\n                value={form.client_email}\n                onChange={(e) => setForm({ ...form, client_email: e.target.value })}\n                className=\"bg-white border-gray-300 text-black\"\n              />\n            </div>\n\n            {/* Notas */}\n            <div>\n              <Label className=\"text-black font-primary font-medium\">Notas (opcional)</Label>\n              <Textarea\n                value={form.notes}\n                onChange={(e) => setForm({ ...form, notes: e.target.value })}\n                className=\"bg-white border-gray-300 text-black\"\n                rows={2}\n              />\n            </div>\n\n            <Button\n              type=\"submit\"\n              disabled={ticketItems.length === 0}\n              className=\"w-full bg-black text-white hover:bg-gray-800 rounded-sm font-bold uppercase tracking-wide font-secondary disabled:opacity-50\"\n            >\n              {editingTicket ? 'ACTUALIZAR VENTA' : 'CREAR VENTA'}\n            </Button>\n          </form>\n        </DialogContent>\n      </Dialog>\n\n      {/* Modal de confirmación de eliminación */}\n      <Dialog open={!!deleteConfirm} onOpenChange={() => setDeleteConfirm(null)}>\n        <DialogContent className=\"bg-white border-gray-200 text-black max-w-md\">\n          <DialogHeader>\n            <DialogTitle className=\"font-secondary uppercase text-xl text-black flex items-center gap-2\">\n              <AlertCircle className=\"w-5 h-5 text-red-500\" />\n              ELIMINAR VENTA\n            </DialogTitle>\n          </DialogHeader>\n          <div className=\"py-4\">\n            <p className=\"font-primary text-gray-600\">\n              ¿Estás seguro de que deseas eliminar esta venta? Esta acción no se puede deshacer.\n            </p>\n          </div>\n          <div className=\"flex gap-3 justify-end\">\n            <Button\n              variant=\"outline\"\n              onClick={() => setDeleteConfirm(null)}\n              className=\"font-secondary uppercase\"\n            >\n              Cancelar\n            </Button>\n            <Button\n              onClick={() => handleDelete(deleteConfirm)}\n              className=\"bg-red-600 hover:bg-red-700 text-white font-secondary uppercase\"\n            >\n              Eliminar\n            </Button>\n          </div>\n        </DialogContent>\n      </Dialog>\n\n      {/* Modal de forma de pago */}\n      <Dialog open={!!paymentModal} onOpenChange={() => setPaymentModal(null)}>\n        <DialogContent className=\"bg-white border-gray-200 text-black max-w-md\">\n          <DialogHeader>\n            <DialogTitle className=\"font-secondary uppercase text-xl text-black flex items-center gap-2\">\n              <DollarSign className=\"w-5 h-5 text-green-600\" />\n              REGISTRAR PAGO - VENTA #{paymentModal?.ticketNumber}\n            </DialogTitle>\n          </DialogHeader>\n          <div className=\"py-4\">\n            <p className=\"font-primary text-gray-600 mb-4\">\n              Selecciona la forma de pago:\n            </p>\n            <div className=\"space-y-3\">\n              {PAYMENT_METHODS.map((method) => {\n                const Icon = method.icon;\n                // Solo mostrar \"Agregar a Factura Mensual\" si el cliente está registrado\n                const isInvoiceMethod = method.id === 'factura_mensual';\n                const isDisabled = isInvoiceMethod && !paymentModal?.hasClientId;\n                \n                if (isDisabled) {\n                  return (\n                    <div\n                      key={method.id}\n                      className=\"w-full flex items-center gap-4 p-4 border border-gray-100 rounded-sm bg-gray-50 opacity-50 cursor-not-allowed\"\n                    >\n                      <div className=\"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center\">\n                        <Icon className=\"w-5 h-5 text-gray-400\" />\n                      </div>\n                      <div>\n                        <span className=\"font-primary font-medium text-gray-400\">{method.label}</span>\n                        <p className=\"text-xs text-gray-400 font-primary\">Solo disponible para clientes registrados</p>\n                      </div>\n                    </div>\n                  );\n                }\n                \n                return (\n                  <button\n                    key={method.id}\n                    onClick={() => handlePayment(method.id)}\n                    className=\"w-full flex items-center gap-4 p-4 border border-gray-200 rounded-sm hover:bg-gray-50 hover:border-green-500 transition-colors\"\n                  >\n                    <div className=\"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center\">\n                      <Icon className=\"w-5 h-5 text-gray-600\" />\n                    </div>\n                    <span className=\"font-primary font-medium text-black\">{method.label}</span>\n                  </button>\n                );\n              })}\n            </div>\n          </div>\n          <div className=\"flex justify-end\">\n            <Button\n              variant=\"outline\"\n              onClick={() => setPaymentModal(null)}\n              className=\"font-secondary uppercase\"\n            >\n              Cancelar\n            </Button>\n          </div>\n        </DialogContent>\n      </Dialog>\n\n      {/* Modal de detalle de factura */}\n      <Dialog open={!!selectedInvoice} onOpenChange={() => setSelectedInvoice(null)}>\n        <DialogContent className=\"bg-white border-gray-200 text-black max-w-2xl max-h-[80vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle className=\"font-secondary uppercase text-xl text-black flex items-center gap-2\">\n              <Receipt className=\"w-5 h-5 text-amber-600\" />\n              DETALLE DE FACTURA\n            </DialogTitle>\n          </DialogHeader>\n          {selectedInvoice && (\n            <div className=\"space-y-4 mt-4\">\n              {/* Info del cliente */}\n              <div className=\"bg-gray-50 p-4 rounded-sm\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <div className=\"text-xs text-gray-500 font-primary uppercase\">Cliente</div>\n                    <div className=\"font-secondary font-bold text-lg text-black\">{selectedInvoice.client_name}</div>\n                  </div>\n                  <span className={`px-3 py-1 rounded-sm text-sm font-primary ${\n                    selectedInvoice.status === 'pending' \n                      ? 'bg-amber-100 text-amber-700' \n                      : 'bg-green-100 text-green-700'\n                  }`}>\n                    {selectedInvoice.status === 'pending' ? 'PENDIENTE DE FACTURAR' : 'FACTURADA'}\n                  </span>\n                </div>\n                {selectedInvoice.invoiced_at && (\n                  <div className=\"text-xs text-gray-500 font-primary mt-2\">\n                    Facturada el {new Date(selectedInvoice.invoiced_at).toLocaleDateString('es-CL')}\n                  </div>\n                )}\n              </div>\n\n              {/* Lista de items */}\n              <div className=\"border border-gray-200 rounded-sm overflow-hidden\">\n                <div className=\"bg-gray-100 px-4 py-2 font-secondary text-sm uppercase text-gray-600\">\n                  Productos ({selectedInvoice.items.length})\n                </div>\n                <div className=\"divide-y divide-gray-100\">\n                  {selectedInvoice.items.map((item, idx) => (\n                    <div key={idx} className=\"px-4 py-3 bg-white\">\n                      <div className=\"flex items-center justify-between\">\n                        <div className=\"flex items-center gap-2\">\n                          <Package className=\"w-4 h-4 text-orange-500\" />\n                          <span className=\"font-primary text-black\">{item.quantity}x {item.product_name}</span>\n                          <span className=\"text-xs text-gray-400\">[{item.category}]</span>\n                        </div>\n                        <span className=\"font-primary font-bold text-black\">{formatCurrency(item.subtotal)}</span>\n                      </div>\n                      <div className=\"text-xs text-gray-500 font-primary mt-1 ml-6\">\n                        Venta #{item.sale_number} • {new Date(item.sale_date).toLocaleDateString('es-CL')}\n                      </div>\n                    </div>\n                  ))}\n                </div>\n                <div className=\"bg-gray-50 px-4 py-3 flex justify-between items-center border-t border-gray-200\">\n                  <span className=\"font-secondary uppercase text-gray-600\">Total</span>\n                  <span className=\"font-secondary text-xl font-bold text-black\">{formatCurrency(selectedInvoice.total_amount)}</span>\n                </div>\n              </div>\n\n              {/* Acciones */}\n              <div className=\"flex justify-end gap-3\">\n                <Button\n                  variant=\"outline\"\n                  onClick={() => setSelectedInvoice(null)}\n                  className=\"font-secondary uppercase\"\n                >\n                  Cerrar\n                </Button>\n                {selectedInvoice.status === 'pending' && (\n                  <Button\n                    onClick={() => {\n                      markInvoiceAsInvoiced(selectedInvoice.id);\n                      setSelectedInvoice(null);\n                    }}\n                    className=\"bg-green-600 hover:bg-green-700 text-white font-secondary uppercase\"\n                  >\n                    <CheckCircle className=\"w-4 h-4 mr-2\" />\n                    Marcar como Facturada\n                  </Button>\n                )}\n              </div>\n            </div>\n          )}\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}