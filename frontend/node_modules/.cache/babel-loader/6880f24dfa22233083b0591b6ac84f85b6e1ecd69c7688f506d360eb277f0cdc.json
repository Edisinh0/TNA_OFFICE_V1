{"ast":null,"code":"var _jsxFileName = \"/Users/eddiecerpa/Downloads/TNAOffice_MariaDB-2/frontend/src/components/OfficeFloorPlan.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport { Card } from './ui/card';\nimport { Building2, Edit3, Save, X, Move, Maximize2 } from 'lucide-react';\nimport { Button } from './ui/button';\nimport { getToken } from '../utils/auth';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const OfficeFloorPlan = ({\n  offices,\n  filteredOffices,\n  selectedOfficeIds = [],\n  onOfficeSelect\n}) => {\n  _s();\n  const [hoveredOffice, setHoveredOffice] = useState(null);\n  const [tooltipPosition, setTooltipPosition] = useState({\n    x: 0,\n    y: 0\n  });\n  const [editMode, setEditMode] = useState(false);\n  const [selectedOffice, setSelectedOffice] = useState(null);\n  const [isDragging, setIsDragging] = useState(false);\n  const [isResizing, setIsResizing] = useState(false);\n  const [dragStart, setDragStart] = useState({\n    x: 0,\n    y: 0\n  });\n  const [customCoordinates, setCustomCoordinates] = useState({});\n\n  // Load custom coordinates from database on mount\n  useEffect(() => {\n    const loadCoordinates = async () => {\n      try {\n        const token = getToken();\n        if (!token) return;\n        const response = await fetch(`${process.env.REACT_APP_BACKEND_URL}/api/floor-plan/coordinates`, {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n        if (response.ok) {\n          const data = await response.json();\n          if (data.coordinates && Object.keys(data.coordinates).length > 0) {\n            setCustomCoordinates(data.coordinates);\n          }\n        }\n      } catch (e) {\n        console.error('Error loading saved coordinates:', e);\n      }\n    };\n    loadCoordinates();\n  }, []);\n\n  // Save coordinates to database\n  const saveCoordinates = async () => {\n    try {\n      const token = getToken();\n      if (!token) {\n        alert('❌ No estás autenticado. Por favor, vuelve a iniciar sesión.');\n        window.location.href = '/login';\n        return;\n      }\n      console.log('Guardando coordenadas...', Object.keys(customCoordinates).length, 'oficinas');\n      const response = await fetch(`${process.env.REACT_APP_BACKEND_URL}/api/floor-plan/coordinates`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          coordinates: customCoordinates\n        })\n      });\n      if (response.ok) {\n        const result = await response.json();\n        alert('✅ ¡Coordenadas guardadas exitosamente en la base de datos!');\n        console.log('Guardado exitoso:', result);\n      } else {\n        const error = await response.json().catch(() => ({\n          detail: 'Error desconocido'\n        }));\n        console.error('Error del servidor:', response.status, error);\n        if (response.status === 401) {\n          alert('❌ Tu sesión ha expirado. Por favor, vuelve a iniciar sesión.');\n          window.location.href = '/login';\n        } else if (response.status === 403) {\n          alert('❌ No tienes permisos de administrador para guardar coordenadas.');\n        } else {\n          alert('❌ Error al guardar: ' + (error.detail || 'Error desconocido'));\n        }\n      }\n    } catch (e) {\n      console.error('Error saving coordinates:', e);\n      alert('❌ Error de conexión al guardar las coordenadas. Verifica tu conexión a internet.');\n    }\n  };\n\n  // Reset to default coordinates\n  const resetCoordinates = async () => {\n    if (window.confirm('¿Restaurar coordenadas por defecto? Se perderán los cambios guardados de la base de datos.')) {\n      try {\n        const token = getToken();\n        if (token) {\n          // Save empty coordinates to database\n          await fetch(`${process.env.REACT_APP_BACKEND_URL}/api/floor-plan/coordinates`, {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n              'Authorization': `Bearer ${token}`\n            },\n            body: JSON.stringify({\n              coordinates: {}\n            })\n          });\n        }\n        setCustomCoordinates({});\n        setSelectedOffice(null);\n        alert('Coordenadas restauradas a valores por defecto');\n      } catch (e) {\n        console.error('Error resetting coordinates:', e);\n        setCustomCoordinates({});\n        setSelectedOffice(null);\n      }\n    }\n  };\n\n  // Export coordinates to console for development\n  const exportCoordinates = () => {\n    const coords = {\n      ...defaultOfficeCoordinates,\n      ...customCoordinates\n    };\n    console.log('Current coordinates:', JSON.stringify(coords, null, 2));\n    alert('Coordenadas exportadas a la consola del navegador (F12)');\n  };\n\n  // Coordenadas ajustadas manualmente basadas en el plano (viewBox 2500x1000)\n  // Mapeo preciso de cada oficina visible en el plano arquitectónico\n  const defaultOfficeCoordinates = {\n    // Lado izquierdo - Fila superior\n    '1715': {\n      x: 80,\n      y: 355,\n      width: 190,\n      height: 170\n    },\n    '1716': {\n      x: 280,\n      y: 355,\n      width: 150,\n      height: 170\n    },\n    '1717': {\n      x: 440,\n      y: 355,\n      width: 155,\n      height: 170\n    },\n    '1718': {\n      x: 605,\n      y: 355,\n      width: 155,\n      height: 170\n    },\n    '1719': {\n      x: 770,\n      y: 355,\n      width: 155,\n      height: 170\n    },\n    // Lado izquierdo - Fila media\n    '1712': {\n      x: 85,\n      y: 560,\n      width: 180,\n      height: 195\n    },\n    '1713': {\n      x: 275,\n      y: 560,\n      width: 205,\n      height: 195\n    },\n    '1714': {\n      x: 490,\n      y: 560,\n      width: 220,\n      height: 195\n    },\n    '1722': {\n      x: 720,\n      y: 560,\n      width: 165,\n      height: 195\n    },\n    '1724': {\n      x: 895,\n      y: 560,\n      width: 165,\n      height: 195\n    },\n    '1720': {\n      x: 1070,\n      y: 560,\n      width: 165,\n      height: 195\n    },\n    '1732': {\n      x: 1245,\n      y: 560,\n      width: 180,\n      height: 195\n    },\n    // Lado izquierdo - Fila inferior\n    '1711': {\n      x: 105,\n      y: 775,\n      width: 155,\n      height: 155\n    },\n    '1710': {\n      x: 270,\n      y: 775,\n      width: 300,\n      height: 155\n    },\n    '1709': {\n      x: 580,\n      y: 775,\n      width: 285,\n      height: 155\n    },\n    '1705': {\n      x: 875,\n      y: 775,\n      width: 140,\n      height: 155\n    },\n    '1707': {\n      x: 1025,\n      y: 775,\n      width: 140,\n      height: 155\n    },\n    '1703': {\n      x: 1175,\n      y: 775,\n      width: 140,\n      height: 155\n    },\n    '1702': {\n      x: 1325,\n      y: 775,\n      width: 135,\n      height: 155\n    },\n    '1701': {\n      x: 1470,\n      y: 775,\n      width: 130,\n      height: 155\n    },\n    // Centro - Fila media\n    '1737': {\n      x: 935,\n      y: 355,\n      width: 155,\n      height: 170\n    },\n    '1721': {\n      x: 1100,\n      y: 355,\n      width: 155,\n      height: 170\n    },\n    '1723': {\n      x: 1265,\n      y: 355,\n      width: 155,\n      height: 170\n    },\n    '1725': {\n      x: 1430,\n      y: 355,\n      width: 155,\n      height: 170\n    },\n    '1726': {\n      x: 1595,\n      y: 355,\n      width: 155,\n      height: 170\n    },\n    '1727': {\n      x: 1760,\n      y: 355,\n      width: 155,\n      height: 170\n    },\n    // Centro superior\n    '1728': {\n      x: 800,\n      y: 180,\n      width: 185,\n      height: 145\n    },\n    '1729': {\n      x: 995,\n      y: 180,\n      width: 185,\n      height: 145\n    },\n    '1731': {\n      x: 1190,\n      y: 180,\n      width: 180,\n      height: 145\n    },\n    '1730': {\n      x: 1380,\n      y: 180,\n      width: 180,\n      height: 145\n    },\n    '1736': {\n      x: 1570,\n      y: 180,\n      width: 175,\n      height: 145\n    },\n    '1735': {\n      x: 1755,\n      y: 180,\n      width: 175,\n      height: 145\n    },\n    '1734': {\n      x: 1940,\n      y: 180,\n      width: 175,\n      height: 145\n    },\n    '1733': {\n      x: 2125,\n      y: 180,\n      width: 175,\n      height: 145\n    },\n    // Lado derecho\n    '1738': {\n      x: 475,\n      y: 610,\n      width: 125,\n      height: 145\n    },\n    '1708': {\n      x: 1630,\n      y: 610,\n      width: 140,\n      height: 145\n    },\n    '1706': {\n      x: 1780,\n      y: 610,\n      width: 140,\n      height: 145\n    },\n    '1704': {\n      x: 1930,\n      y: 610,\n      width: 140,\n      height: 145\n    },\n    // Oficina 1780 (si existe en DB)\n    '1780': {\n      x: 610,\n      y: 610,\n      width: 105,\n      height: 145\n    }\n  };\n\n  // Merge default coordinates with custom coordinates\n  const officeCoordinates = {\n    ...defaultOfficeCoordinates,\n    ...customCoordinates\n  };\n\n  // Check if filters are active (if filteredOffices is different from offices)\n  const hasActiveFilters = filteredOffices && filteredOffices.length !== offices.length;\n\n  // Create set of filtered office numbers for quick lookup\n  const filteredOfficeNumbers = new Set(filteredOffices ? filteredOffices.map(o => o.office_number) : []);\n  const formatUF = amount => {\n    return new Intl.NumberFormat('es-CL', {\n      minimumFractionDigits: 2,\n      maximumFractionDigits: 2\n    }).format(amount) + ' UF';\n  };\n  const getOfficeColor = office => {\n    if (!office) return 'rgba(229, 231, 235, 0.3)';\n    if (office.status === 'available') {\n      return 'rgba(147, 197, 253, 0.6)'; // Azul translúcido para disponibles\n    }\n    if (office.margin_percentage > 0) {\n      return 'rgba(134, 239, 172, 0.6)'; // Verde para margen positivo\n    } else if (office.margin_percentage < 0) {\n      return 'rgba(252, 165, 165, 0.6)'; // Rojo para margen negativo\n    }\n    return 'rgba(203, 213, 225, 0.5)';\n  };\n  const handleOfficeHover = (officeNum, event) => {\n    const office = offices.find(o => o.office_number === officeNum);\n    setHoveredOffice(office);\n    const rect = event.currentTarget.getBoundingClientRect();\n    setTooltipPosition({\n      x: rect.left + rect.width / 2,\n      y: rect.top - 10\n    });\n  };\n  const handleOfficeClick = (officeNum, event) => {\n    if (editMode) {\n      event.stopPropagation();\n      setSelectedOffice(officeNum);\n      return;\n    }\n    const office = offices.find(o => o.office_number === officeNum);\n    if (office && onOfficeSelect) {\n      onOfficeSelect(office);\n    }\n  };\n\n  // Handle mouse down for dragging\n  const handleMouseDown = (officeNum, event, isResize = false) => {\n    if (!editMode) return;\n    event.stopPropagation();\n    const svg = event.currentTarget.ownerSVGElement;\n    const pt = svg.createSVGPoint();\n    pt.x = event.clientX;\n    pt.y = event.clientY;\n    const svgP = pt.matrixTransform(svg.getScreenCTM().inverse());\n    setSelectedOffice(officeNum);\n    if (isResize) {\n      setIsResizing(true);\n    } else {\n      setIsDragging(true);\n    }\n    setDragStart({\n      x: svgP.x,\n      y: svgP.y\n    });\n  };\n\n  // Handle mouse move for dragging/resizing\n  const handleMouseMove = event => {\n    if (!editMode || !isDragging && !isResizing || !selectedOffice) return;\n    const svg = event.currentTarget;\n    const pt = svg.createSVGPoint();\n    pt.x = event.clientX;\n    pt.y = event.clientY;\n    const svgP = pt.matrixTransform(svg.getScreenCTM().inverse());\n    const currentCoords = officeCoordinates[selectedOffice];\n    if (!currentCoords) return;\n    const dx = svgP.x - dragStart.x;\n    const dy = svgP.y - dragStart.y;\n    if (isDragging) {\n      // Update position\n      setCustomCoordinates(prev => ({\n        ...prev,\n        [selectedOffice]: {\n          ...currentCoords,\n          x: Math.max(0, Math.min(2500 - currentCoords.width, currentCoords.x + dx)),\n          y: Math.max(0, Math.min(1000 - currentCoords.height, currentCoords.y + dy))\n        }\n      }));\n    } else if (isResizing) {\n      // Update size\n      setCustomCoordinates(prev => ({\n        ...prev,\n        [selectedOffice]: {\n          ...currentCoords,\n          width: Math.max(20, currentCoords.width + dx),\n          height: Math.max(20, currentCoords.height + dy)\n        }\n      }));\n    }\n    setDragStart({\n      x: svgP.x,\n      y: svgP.y\n    });\n  };\n\n  // Handle mouse up\n  const handleMouseUp = () => {\n    setIsDragging(false);\n    setIsResizing(false);\n  };\n  return /*#__PURE__*/_jsxDEV(Card, {\n    className: \"bg-white border-gray-200 rounded-sm overflow-hidden\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 border-b border-gray-200 bg-gray-50\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between flex-wrap gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(Building2, {\n            className: \"w-5 h-5 text-gray-700\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"font-secondary uppercase text-black text-sm\",\n            children: \"Plano Interactivo - Piso 17\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 311,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-2\",\n          children: [!editMode && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex gap-4 text-xs font-primary\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-3 h-3 bg-green-300 rounded-sm border border-gray-400\",\n                style: {\n                  opacity: 0.6\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 318,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Margen +\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 319,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 317,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-3 h-3 bg-red-300 rounded-sm border border-gray-400\",\n                style: {\n                  opacity: 0.6\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 322,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Margen -\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 323,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 321,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-3 h-3 bg-blue-300 rounded-sm border border-gray-400\",\n                style: {\n                  opacity: 0.6\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 326,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Disponible\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 327,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 325,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: () => {\n              setEditMode(!editMode);\n              setSelectedOffice(null);\n            },\n            size: \"sm\",\n            variant: editMode ? \"default\" : \"outline\",\n            className: `font-secondary text-xs uppercase ${editMode ? 'bg-blue-600 hover:bg-blue-700 text-white' : 'bg-white border-gray-300 text-gray-700 hover:bg-gray-50'} rounded-sm`,\n            children: editMode ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(X, {\n                className: \"w-3 h-3 mr-1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 347,\n                columnNumber: 19\n              }, this), \"Salir de Edici\\xF3n\"]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(Edit3, {\n                className: \"w-3 h-3 mr-1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 352,\n                columnNumber: 19\n              }, this), \"Modo Edici\\xF3n\"]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 332,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 9\n      }, this), editMode && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-sm\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between flex-wrap gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-xs font-primary text-blue-900\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"font-bold mb-1\",\n              children: \"Modo Edici\\xF3n Activo\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 364,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"space-y-1 text-blue-800\",\n              children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                children: \"\\u2022 Click en un \\xE1rea para seleccionarla\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 366,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                children: \"\\u2022 Arrastra el \\xE1rea para moverla\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 367,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                children: \"\\u2022 Arrastra la esquina inferior derecha para redimensionar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 368,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 365,\n              columnNumber: 17\n            }, this), selectedOffice && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"mt-2 font-bold text-blue-900\",\n              children: [\"Editando: Oficina \", selectedOffice, officeCoordinates[selectedOffice] && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-normal ml-2\",\n                children: [\"(x: \", Math.round(officeCoordinates[selectedOffice].x), \", y: \", Math.round(officeCoordinates[selectedOffice].y), \", w: \", Math.round(officeCoordinates[selectedOffice].width), \", h: \", Math.round(officeCoordinates[selectedOffice].height), \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 374,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 371,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 363,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              onClick: saveCoordinates,\n              size: \"sm\",\n              className: \"bg-green-600 hover:bg-green-700 text-white rounded-sm font-secondary text-xs uppercase\",\n              children: [/*#__PURE__*/_jsxDEV(Save, {\n                className: \"w-3 h-3 mr-1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 391,\n                columnNumber: 19\n              }, this), \"Guardar\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 386,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              onClick: exportCoordinates,\n              size: \"sm\",\n              variant: \"outline\",\n              className: \"bg-white border-gray-300 text-gray-700 hover:bg-gray-50 rounded-sm font-secondary text-xs uppercase\",\n              children: \"Exportar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 394,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              onClick: resetCoordinates,\n              size: \"sm\",\n              variant: \"outline\",\n              className: \"bg-white border-red-300 text-red-700 hover:bg-red-50 rounded-sm font-secondary text-xs uppercase\",\n              children: \"Reset\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 402,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 385,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative\",\n      style: {\n        backgroundColor: '#fafafa'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative w-full\",\n        style: {\n          paddingBottom: '40%'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"https://customer-assets.emergentagent.com/job_373fee87-468b-4940-ac57-79ceed35c83a/artifacts/dg3ddtli_Captura%20de%20pantalla%202025-12-10%20a%20la%28s%29%2019.03.21.png\",\n          alt: \"Plano Piso 17\",\n          className: \"absolute inset-0 w-full h-full object-contain\",\n          style: {\n            opacity: 0.95\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 418,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n          viewBox: \"0 0 2500 1000\",\n          className: \"absolute inset-0 w-full h-full\",\n          style: {\n            pointerEvents: 'none'\n          },\n          preserveAspectRatio: \"xMidYMid meet\",\n          onMouseMove: handleMouseMove,\n          onMouseUp: handleMouseUp,\n          onMouseLeave: handleMouseUp,\n          children: Object.entries(officeCoordinates).map(([officeNum, coords]) => {\n            const office = offices.find(o => o.office_number === officeNum);\n            const color = getOfficeColor(office);\n            const isHovered = (hoveredOffice === null || hoveredOffice === void 0 ? void 0 : hoveredOffice.office_number) === officeNum;\n            const isSelected = selectedOffice === officeNum && editMode;\n\n            // Determine visual style based on selection state\n            const isOfficeInSelection = office && selectedOfficeIds.includes(office.id);\n            const strokeColor = isOfficeInSelection ? '#f97316' : isSelected ? '#2563eb' : isHovered ? '#000' : 'rgba(107, 114, 128, 0.4)';\n            const strokeWidth = isOfficeInSelection ? '6' : isSelected ? '6' : isHovered ? '4' : '2';\n\n            // Check if this office should be visible based on filters\n            const isVisible = !hasActiveFilters || filteredOfficeNumbers.has(officeNum) || editMode;\n\n            // Check if this office is selected in the table\n            const isOfficeSelected = office && selectedOfficeIds.includes(office.id);\n\n            // If not visible and filters are active, don't render\n            if (!isVisible && !editMode) {\n              return null;\n            }\n\n            // Calculate opacity based on both filters and selection\n            let opacity = 1;\n            if (!editMode) {\n              if (selectedOfficeIds.length > 0 && !isOfficeSelected) {\n                // If there are selections but this office isn't selected, dim it\n                opacity = 0.15;\n              } else if (!isVisible) {\n                // If filtered out, also dim it\n                opacity = 0.15;\n              }\n            }\n            return /*#__PURE__*/_jsxDEV(\"g\", {\n              style: {\n                opacity\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"rect\", {\n                x: coords.x,\n                y: coords.y,\n                width: coords.width,\n                height: coords.height,\n                fill: color,\n                stroke: strokeColor,\n                strokeWidth: strokeWidth,\n                className: editMode ? \"cursor-move\" : \"cursor-pointer\",\n                style: {\n                  pointerEvents: 'all',\n                  filter: isOfficeInSelection ? 'brightness(1.2) drop-shadow(0 0 12px rgba(249, 115, 22, 0.8))' : isSelected ? 'brightness(1.1) drop-shadow(0 0 12px rgba(37, 99, 235, 0.8))' : isHovered ? 'brightness(1.2) drop-shadow(0 4px 8px rgba(0,0,0,0.4))' : 'none',\n                  transition: editMode ? 'none' : 'all 0.15s'\n                },\n                onMouseEnter: e => !editMode && handleOfficeHover(officeNum, e),\n                onMouseLeave: () => !editMode && setHoveredOffice(null),\n                onClick: e => handleOfficeClick(officeNum, e),\n                onMouseDown: e => handleMouseDown(officeNum, e, false)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 470,\n                columnNumber: 19\n              }, this), isSelected && editMode && /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"rect\", {\n                  x: coords.x + coords.width - 15,\n                  y: coords.y + coords.height - 15,\n                  width: \"15\",\n                  height: \"15\",\n                  fill: \"#2563eb\",\n                  stroke: \"#fff\",\n                  strokeWidth: \"2\",\n                  className: \"cursor-nwse-resize\",\n                  style: {\n                    pointerEvents: 'all'\n                  },\n                  onMouseDown: e => handleMouseDown(officeNum, e, true)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 494,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Maximize2, {\n                  x: coords.x + coords.width - 12,\n                  y: coords.y + coords.height - 12,\n                  width: \"9\",\n                  height: \"9\",\n                  stroke: \"#fff\",\n                  strokeWidth: \"2\",\n                  className: \"pointer-events-none\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 506,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Move, {\n                  x: coords.x + coords.width / 2 - 8,\n                  y: coords.y + coords.height / 2 - 8,\n                  width: \"16\",\n                  height: \"16\",\n                  stroke: \"#2563eb\",\n                  fill: \"#fff\",\n                  strokeWidth: \"2\",\n                  className: \"pointer-events-none\",\n                  style: {\n                    filter: 'drop-shadow(0 2px 4px rgba(0,0,0,0.3))'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 517,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true), !editMode && /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"text\", {\n                  x: coords.x + coords.width / 2,\n                  y: coords.y + coords.height / 2,\n                  textAnchor: \"middle\",\n                  dominantBaseline: \"middle\",\n                  fill: \"#1f2937\",\n                  fontSize: isHovered ? \"28\" : \"24\",\n                  fontWeight: \"900\",\n                  fontFamily: \"system-ui, -apple-system, sans-serif\",\n                  className: \"pointer-events-none select-none\",\n                  style: {\n                    textShadow: '0 0 6px white, 0 0 6px white, 0 0 6px white, 0 0 8px white, 0 1px 2px rgba(0,0,0,0.3)',\n                    transition: 'font-size 0.15s',\n                    paintOrder: 'stroke fill'\n                  },\n                  children: officeNum\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 534,\n                  columnNumber: 23\n                }, this), isHovered && office && /*#__PURE__*/_jsxDEV(\"text\", {\n                  x: coords.x + coords.width / 2,\n                  y: coords.y + coords.height / 2 + 22,\n                  textAnchor: \"middle\",\n                  dominantBaseline: \"middle\",\n                  fill: office.margin_percentage < 0 ? '#dc2626' : '#16a34a',\n                  fontSize: \"14\",\n                  fontWeight: \"bold\",\n                  fontFamily: \"system-ui, sans-serif\",\n                  className: \"pointer-events-none select-none\",\n                  style: {\n                    textShadow: '0 0 4px white, 0 0 4px white, 0 0 4px white'\n                  },\n                  children: [office.margin_percentage.toFixed(1), \"%\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 554,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true), isSelected && editMode && /*#__PURE__*/_jsxDEV(\"text\", {\n                x: coords.x + coords.width / 2,\n                y: coords.y - 10,\n                textAnchor: \"middle\",\n                fill: \"#2563eb\",\n                fontSize: \"18\",\n                fontWeight: \"bold\",\n                fontFamily: \"system-ui, sans-serif\",\n                className: \"pointer-events-none select-none\",\n                style: {\n                  textShadow: '0 0 4px white, 0 0 4px white'\n                },\n                children: [\"Oficina \", officeNum]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 574,\n                columnNumber: 21\n              }, this)]\n            }, officeNum, true, {\n              fileName: _jsxFileName,\n              lineNumber: 469,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 425,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 417,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 416,\n      columnNumber: 7\n    }, this), hoveredOffice && !editMode && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed z-50 bg-white border-2 border-black rounded-sm shadow-2xl p-3 pointer-events-none\",\n      style: {\n        left: `${tooltipPosition.x}px`,\n        top: `${tooltipPosition.y}px`,\n        transform: 'translate(-50%, -100%)',\n        minWidth: '240px'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-1\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"font-secondary text-black font-bold text-sm border-b border-gray-200 pb-1 mb-2\",\n          children: [\"Oficina \", hoveredOffice.office_number]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 606,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-xs font-primary text-gray-500\",\n            children: \"Cliente:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 610,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-xs font-primary font-semibold text-black\",\n            children: hoveredOffice.client_name || /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"italic text-gray-400\",\n              children: \"Disponible\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 612,\n              columnNumber: 47\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 611,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 609,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-xs font-primary text-gray-500\",\n            children: \"Dimensi\\xF3n:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 616,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-xs font-primary text-gray-700\",\n            children: [hoveredOffice.square_meters, \"m\\xB2\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 617,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 615,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-xs font-primary text-gray-500\",\n            children: \"Capacidad:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 622,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-xs font-primary text-gray-700\",\n            children: [hoveredOffice.capacity || Math.floor(hoveredOffice.square_meters / 3), \" personas\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 623,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 621,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-xs font-primary text-gray-500\",\n            children: \"Ubicaci\\xF3n:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 628,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-xs font-primary text-gray-700\",\n            children: hoveredOffice.location\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 629,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 627,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"border-t border-gray-200 pt-1 mt-1\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-xs font-primary text-gray-500\",\n              children: \"Venta Esperada:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 635,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-xs font-primary font-bold text-purple-600\",\n              children: formatUF(hoveredOffice.sale_value_uf)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 636,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 634,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between items-center mt-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-xs font-primary text-gray-500\",\n              children: \"Facturado:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 641,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-xs font-primary font-bold text-green-600\",\n              children: formatUF(hoveredOffice.billed_value_uf)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 642,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 640,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between items-center mt-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-xs font-primary text-gray-500\",\n              children: \"Costo:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 647,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-xs font-primary font-bold text-orange-600\",\n              children: formatUF(hoveredOffice.cost_uf)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 648,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 646,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between items-center mt-1 pt-1 border-t border-gray-100\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-xs font-primary text-gray-600 font-semibold\",\n              children: \"Margen:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 653,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: `text-sm font-primary font-bold ${hoveredOffice.margin_percentage < 0 ? 'text-red-600' : 'text-green-600'}`,\n              children: [hoveredOffice.margin_percentage.toFixed(2), \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 654,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 652,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 633,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 605,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 596,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 306,\n    columnNumber: 5\n  }, this);\n};\n_s(OfficeFloorPlan, \"nXp0S/y/agVSl8aMjl6EQz+ZSi4=\");\n_c = OfficeFloorPlan;\nvar _c;\n$RefreshReg$(_c, \"OfficeFloorPlan\");","map":{"version":3,"names":["useState","useEffect","Card","Building2","Edit3","Save","X","Move","Maximize2","Button","getToken","jsxDEV","_jsxDEV","Fragment","_Fragment","OfficeFloorPlan","offices","filteredOffices","selectedOfficeIds","onOfficeSelect","_s","hoveredOffice","setHoveredOffice","tooltipPosition","setTooltipPosition","x","y","editMode","setEditMode","selectedOffice","setSelectedOffice","isDragging","setIsDragging","isResizing","setIsResizing","dragStart","setDragStart","customCoordinates","setCustomCoordinates","loadCoordinates","token","response","fetch","process","env","REACT_APP_BACKEND_URL","headers","ok","data","json","coordinates","Object","keys","length","e","console","error","saveCoordinates","alert","window","location","href","log","method","body","JSON","stringify","result","catch","detail","status","resetCoordinates","confirm","exportCoordinates","coords","defaultOfficeCoordinates","width","height","officeCoordinates","hasActiveFilters","filteredOfficeNumbers","Set","map","o","office_number","formatUF","amount","Intl","NumberFormat","minimumFractionDigits","maximumFractionDigits","format","getOfficeColor","office","margin_percentage","handleOfficeHover","officeNum","event","find","rect","currentTarget","getBoundingClientRect","left","top","handleOfficeClick","stopPropagation","handleMouseDown","isResize","svg","ownerSVGElement","pt","createSVGPoint","clientX","clientY","svgP","matrixTransform","getScreenCTM","inverse","handleMouseMove","currentCoords","dx","dy","prev","Math","max","min","handleMouseUp","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","opacity","onClick","size","variant","round","backgroundColor","paddingBottom","src","alt","viewBox","pointerEvents","preserveAspectRatio","onMouseMove","onMouseUp","onMouseLeave","entries","color","isHovered","isSelected","isOfficeInSelection","includes","id","strokeColor","strokeWidth","isVisible","has","isOfficeSelected","fill","stroke","filter","transition","onMouseEnter","onMouseDown","textAnchor","dominantBaseline","fontSize","fontWeight","fontFamily","textShadow","paintOrder","toFixed","transform","minWidth","client_name","square_meters","capacity","floor","sale_value_uf","billed_value_uf","cost_uf","_c","$RefreshReg$"],"sources":["/Users/eddiecerpa/Downloads/TNAOffice_MariaDB-2/frontend/src/components/OfficeFloorPlan.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { Card } from './ui/card';\nimport { Building2, Edit3, Save, X, Move, Maximize2 } from 'lucide-react';\nimport { Button } from './ui/button';\nimport { getToken } from '../utils/auth';\n\nexport const OfficeFloorPlan = ({ offices, filteredOffices, selectedOfficeIds = [], onOfficeSelect }) => {\n  const [hoveredOffice, setHoveredOffice] = useState(null);\n  const [tooltipPosition, setTooltipPosition] = useState({ x: 0, y: 0 });\n  const [editMode, setEditMode] = useState(false);\n  const [selectedOffice, setSelectedOffice] = useState(null);\n  const [isDragging, setIsDragging] = useState(false);\n  const [isResizing, setIsResizing] = useState(false);\n  const [dragStart, setDragStart] = useState({ x: 0, y: 0 });\n  const [customCoordinates, setCustomCoordinates] = useState({});\n\n  // Load custom coordinates from database on mount\n  useEffect(() => {\n    const loadCoordinates = async () => {\n      try {\n        const token = getToken();\n        if (!token) return;\n        \n        const response = await fetch(`${process.env.REACT_APP_BACKEND_URL}/api/floor-plan/coordinates`, {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n        \n        if (response.ok) {\n          const data = await response.json();\n          if (data.coordinates && Object.keys(data.coordinates).length > 0) {\n            setCustomCoordinates(data.coordinates);\n          }\n        }\n      } catch (e) {\n        console.error('Error loading saved coordinates:', e);\n      }\n    };\n    \n    loadCoordinates();\n  }, []);\n\n  // Save coordinates to database\n  const saveCoordinates = async () => {\n    try {\n      const token = getToken();\n      if (!token) {\n        alert('❌ No estás autenticado. Por favor, vuelve a iniciar sesión.');\n        window.location.href = '/login';\n        return;\n      }\n      \n      console.log('Guardando coordenadas...', Object.keys(customCoordinates).length, 'oficinas');\n      \n      const response = await fetch(`${process.env.REACT_APP_BACKEND_URL}/api/floor-plan/coordinates`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({ coordinates: customCoordinates })\n      });\n      \n      if (response.ok) {\n        const result = await response.json();\n        alert('✅ ¡Coordenadas guardadas exitosamente en la base de datos!');\n        console.log('Guardado exitoso:', result);\n      } else {\n        const error = await response.json().catch(() => ({ detail: 'Error desconocido' }));\n        console.error('Error del servidor:', response.status, error);\n        \n        if (response.status === 401) {\n          alert('❌ Tu sesión ha expirado. Por favor, vuelve a iniciar sesión.');\n          window.location.href = '/login';\n        } else if (response.status === 403) {\n          alert('❌ No tienes permisos de administrador para guardar coordenadas.');\n        } else {\n          alert('❌ Error al guardar: ' + (error.detail || 'Error desconocido'));\n        }\n      }\n    } catch (e) {\n      console.error('Error saving coordinates:', e);\n      alert('❌ Error de conexión al guardar las coordenadas. Verifica tu conexión a internet.');\n    }\n  };\n\n  // Reset to default coordinates\n  const resetCoordinates = async () => {\n    if (window.confirm('¿Restaurar coordenadas por defecto? Se perderán los cambios guardados de la base de datos.')) {\n      try {\n        const token = getToken();\n        if (token) {\n          // Save empty coordinates to database\n          await fetch(`${process.env.REACT_APP_BACKEND_URL}/api/floor-plan/coordinates`, {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n              'Authorization': `Bearer ${token}`\n            },\n            body: JSON.stringify({ coordinates: {} })\n          });\n        }\n        \n        setCustomCoordinates({});\n        setSelectedOffice(null);\n        alert('Coordenadas restauradas a valores por defecto');\n      } catch (e) {\n        console.error('Error resetting coordinates:', e);\n        setCustomCoordinates({});\n        setSelectedOffice(null);\n      }\n    }\n  };\n\n  // Export coordinates to console for development\n  const exportCoordinates = () => {\n    const coords = { ...defaultOfficeCoordinates, ...customCoordinates };\n    console.log('Current coordinates:', JSON.stringify(coords, null, 2));\n    alert('Coordenadas exportadas a la consola del navegador (F12)');\n  };\n\n  // Coordenadas ajustadas manualmente basadas en el plano (viewBox 2500x1000)\n  // Mapeo preciso de cada oficina visible en el plano arquitectónico\n  const defaultOfficeCoordinates = {\n    // Lado izquierdo - Fila superior\n    '1715': { x: 80, y: 355, width: 190, height: 170 },\n    '1716': { x: 280, y: 355, width: 150, height: 170 },\n    '1717': { x: 440, y: 355, width: 155, height: 170 },\n    '1718': { x: 605, y: 355, width: 155, height: 170 },\n    '1719': { x: 770, y: 355, width: 155, height: 170 },\n    \n    // Lado izquierdo - Fila media\n    '1712': { x: 85, y: 560, width: 180, height: 195 },\n    '1713': { x: 275, y: 560, width: 205, height: 195 },\n    '1714': { x: 490, y: 560, width: 220, height: 195 },\n    '1722': { x: 720, y: 560, width: 165, height: 195 },\n    '1724': { x: 895, y: 560, width: 165, height: 195 },\n    '1720': { x: 1070, y: 560, width: 165, height: 195 },\n    '1732': { x: 1245, y: 560, width: 180, height: 195 },\n    \n    // Lado izquierdo - Fila inferior\n    '1711': { x: 105, y: 775, width: 155, height: 155 },\n    '1710': { x: 270, y: 775, width: 300, height: 155 },\n    '1709': { x: 580, y: 775, width: 285, height: 155 },\n    '1705': { x: 875, y: 775, width: 140, height: 155 },\n    '1707': { x: 1025, y: 775, width: 140, height: 155 },\n    '1703': { x: 1175, y: 775, width: 140, height: 155 },\n    '1702': { x: 1325, y: 775, width: 135, height: 155 },\n    '1701': { x: 1470, y: 775, width: 130, height: 155 },\n    \n    // Centro - Fila media\n    '1737': { x: 935, y: 355, width: 155, height: 170 },\n    '1721': { x: 1100, y: 355, width: 155, height: 170 },\n    '1723': { x: 1265, y: 355, width: 155, height: 170 },\n    '1725': { x: 1430, y: 355, width: 155, height: 170 },\n    '1726': { x: 1595, y: 355, width: 155, height: 170 },\n    '1727': { x: 1760, y: 355, width: 155, height: 170 },\n    \n    // Centro superior\n    '1728': { x: 800, y: 180, width: 185, height: 145 },\n    '1729': { x: 995, y: 180, width: 185, height: 145 },\n    '1731': { x: 1190, y: 180, width: 180, height: 145 },\n    '1730': { x: 1380, y: 180, width: 180, height: 145 },\n    '1736': { x: 1570, y: 180, width: 175, height: 145 },\n    '1735': { x: 1755, y: 180, width: 175, height: 145 },\n    '1734': { x: 1940, y: 180, width: 175, height: 145 },\n    '1733': { x: 2125, y: 180, width: 175, height: 145 },\n    \n    // Lado derecho\n    '1738': { x: 475, y: 610, width: 125, height: 145 },\n    '1708': { x: 1630, y: 610, width: 140, height: 145 },\n    '1706': { x: 1780, y: 610, width: 140, height: 145 },\n    '1704': { x: 1930, y: 610, width: 140, height: 145 },\n    \n    // Oficina 1780 (si existe en DB)\n    '1780': { x: 610, y: 610, width: 105, height: 145 },\n  };\n\n  // Merge default coordinates with custom coordinates\n  const officeCoordinates = { ...defaultOfficeCoordinates, ...customCoordinates };\n\n  // Check if filters are active (if filteredOffices is different from offices)\n  const hasActiveFilters = filteredOffices && filteredOffices.length !== offices.length;\n  \n  // Create set of filtered office numbers for quick lookup\n  const filteredOfficeNumbers = new Set(\n    filteredOffices ? filteredOffices.map(o => o.office_number) : []\n  );\n\n  const formatUF = (amount) => {\n    return new Intl.NumberFormat('es-CL', {\n      minimumFractionDigits: 2,\n      maximumFractionDigits: 2\n    }).format(amount) + ' UF';\n  };\n\n  const getOfficeColor = (office) => {\n    if (!office) return 'rgba(229, 231, 235, 0.3)';\n    \n    if (office.status === 'available') {\n      return 'rgba(147, 197, 253, 0.6)'; // Azul translúcido para disponibles\n    }\n    \n    if (office.margin_percentage > 0) {\n      return 'rgba(134, 239, 172, 0.6)'; // Verde para margen positivo\n    } else if (office.margin_percentage < 0) {\n      return 'rgba(252, 165, 165, 0.6)'; // Rojo para margen negativo\n    }\n    \n    return 'rgba(203, 213, 225, 0.5)';\n  };\n\n  const handleOfficeHover = (officeNum, event) => {\n    const office = offices.find(o => o.office_number === officeNum);\n    setHoveredOffice(office);\n    \n    const rect = event.currentTarget.getBoundingClientRect();\n    setTooltipPosition({ \n      x: rect.left + rect.width / 2, \n      y: rect.top - 10 \n    });\n  };\n\n  const handleOfficeClick = (officeNum, event) => {\n    if (editMode) {\n      event.stopPropagation();\n      setSelectedOffice(officeNum);\n      return;\n    }\n    \n    const office = offices.find(o => o.office_number === officeNum);\n    if (office && onOfficeSelect) {\n      onOfficeSelect(office);\n    }\n  };\n\n  // Handle mouse down for dragging\n  const handleMouseDown = (officeNum, event, isResize = false) => {\n    if (!editMode) return;\n    \n    event.stopPropagation();\n    const svg = event.currentTarget.ownerSVGElement;\n    const pt = svg.createSVGPoint();\n    pt.x = event.clientX;\n    pt.y = event.clientY;\n    const svgP = pt.matrixTransform(svg.getScreenCTM().inverse());\n    \n    setSelectedOffice(officeNum);\n    if (isResize) {\n      setIsResizing(true);\n    } else {\n      setIsDragging(true);\n    }\n    setDragStart({ x: svgP.x, y: svgP.y });\n  };\n\n  // Handle mouse move for dragging/resizing\n  const handleMouseMove = (event) => {\n    if (!editMode || (!isDragging && !isResizing) || !selectedOffice) return;\n    \n    const svg = event.currentTarget;\n    const pt = svg.createSVGPoint();\n    pt.x = event.clientX;\n    pt.y = event.clientY;\n    const svgP = pt.matrixTransform(svg.getScreenCTM().inverse());\n    \n    const currentCoords = officeCoordinates[selectedOffice];\n    if (!currentCoords) return;\n    \n    const dx = svgP.x - dragStart.x;\n    const dy = svgP.y - dragStart.y;\n    \n    if (isDragging) {\n      // Update position\n      setCustomCoordinates(prev => ({\n        ...prev,\n        [selectedOffice]: {\n          ...currentCoords,\n          x: Math.max(0, Math.min(2500 - currentCoords.width, currentCoords.x + dx)),\n          y: Math.max(0, Math.min(1000 - currentCoords.height, currentCoords.y + dy))\n        }\n      }));\n    } else if (isResizing) {\n      // Update size\n      setCustomCoordinates(prev => ({\n        ...prev,\n        [selectedOffice]: {\n          ...currentCoords,\n          width: Math.max(20, currentCoords.width + dx),\n          height: Math.max(20, currentCoords.height + dy)\n        }\n      }));\n    }\n    \n    setDragStart({ x: svgP.x, y: svgP.y });\n  };\n\n  // Handle mouse up\n  const handleMouseUp = () => {\n    setIsDragging(false);\n    setIsResizing(false);\n  };\n\n  return (\n    <Card className=\"bg-white border-gray-200 rounded-sm overflow-hidden\">\n      <div className=\"p-4 border-b border-gray-200 bg-gray-50\">\n        <div className=\"flex items-center justify-between flex-wrap gap-2\">\n          <div className=\"flex items-center gap-2\">\n            <Building2 className=\"w-5 h-5 text-gray-700\" />\n            <h3 className=\"font-secondary uppercase text-black text-sm\">Plano Interactivo - Piso 17</h3>\n          </div>\n          \n          <div className=\"flex items-center gap-2\">\n            {!editMode && (\n              <div className=\"flex gap-4 text-xs font-primary\">\n                <div className=\"flex items-center gap-1\">\n                  <div className=\"w-3 h-3 bg-green-300 rounded-sm border border-gray-400\" style={{ opacity: 0.6 }}></div>\n                  <span>Margen +</span>\n                </div>\n                <div className=\"flex items-center gap-1\">\n                  <div className=\"w-3 h-3 bg-red-300 rounded-sm border border-gray-400\" style={{ opacity: 0.6 }}></div>\n                  <span>Margen -</span>\n                </div>\n                <div className=\"flex items-center gap-1\">\n                  <div className=\"w-3 h-3 bg-blue-300 rounded-sm border border-gray-400\" style={{ opacity: 0.6 }}></div>\n                  <span>Disponible</span>\n                </div>\n              </div>\n            )}\n            \n            <Button\n              onClick={() => {\n                setEditMode(!editMode);\n                setSelectedOffice(null);\n              }}\n              size=\"sm\"\n              variant={editMode ? \"default\" : \"outline\"}\n              className={`font-secondary text-xs uppercase ${\n                editMode \n                  ? 'bg-blue-600 hover:bg-blue-700 text-white' \n                  : 'bg-white border-gray-300 text-gray-700 hover:bg-gray-50'\n              } rounded-sm`}\n            >\n              {editMode ? (\n                <>\n                  <X className=\"w-3 h-3 mr-1\" />\n                  Salir de Edición\n                </>\n              ) : (\n                <>\n                  <Edit3 className=\"w-3 h-3 mr-1\" />\n                  Modo Edición\n                </>\n              )}\n            </Button>\n          </div>\n        </div>\n        \n        {editMode && (\n          <div className=\"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-sm\">\n            <div className=\"flex items-center justify-between flex-wrap gap-2\">\n              <div className=\"text-xs font-primary text-blue-900\">\n                <p className=\"font-bold mb-1\">Modo Edición Activo</p>\n                <ul className=\"space-y-1 text-blue-800\">\n                  <li>• Click en un área para seleccionarla</li>\n                  <li>• Arrastra el área para moverla</li>\n                  <li>• Arrastra la esquina inferior derecha para redimensionar</li>\n                </ul>\n                {selectedOffice && (\n                  <p className=\"mt-2 font-bold text-blue-900\">\n                    Editando: Oficina {selectedOffice}\n                    {officeCoordinates[selectedOffice] && (\n                      <span className=\"font-normal ml-2\">\n                        (x: {Math.round(officeCoordinates[selectedOffice].x)}, \n                        y: {Math.round(officeCoordinates[selectedOffice].y)}, \n                        w: {Math.round(officeCoordinates[selectedOffice].width)}, \n                        h: {Math.round(officeCoordinates[selectedOffice].height)})\n                      </span>\n                    )}\n                  </p>\n                )}\n              </div>\n              \n              <div className=\"flex gap-2\">\n                <Button\n                  onClick={saveCoordinates}\n                  size=\"sm\"\n                  className=\"bg-green-600 hover:bg-green-700 text-white rounded-sm font-secondary text-xs uppercase\"\n                >\n                  <Save className=\"w-3 h-3 mr-1\" />\n                  Guardar\n                </Button>\n                <Button\n                  onClick={exportCoordinates}\n                  size=\"sm\"\n                  variant=\"outline\"\n                  className=\"bg-white border-gray-300 text-gray-700 hover:bg-gray-50 rounded-sm font-secondary text-xs uppercase\"\n                >\n                  Exportar\n                </Button>\n                <Button\n                  onClick={resetCoordinates}\n                  size=\"sm\"\n                  variant=\"outline\"\n                  className=\"bg-white border-red-300 text-red-700 hover:bg-red-50 rounded-sm font-secondary text-xs uppercase\"\n                >\n                  Reset\n                </Button>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n      \n      <div className=\"relative\" style={{ backgroundColor: '#fafafa' }}>\n        <div className=\"relative w-full\" style={{ paddingBottom: '40%' }}>\n          <img \n            src=\"https://customer-assets.emergentagent.com/job_373fee87-468b-4940-ac57-79ceed35c83a/artifacts/dg3ddtli_Captura%20de%20pantalla%202025-12-10%20a%20la%28s%29%2019.03.21.png\"\n            alt=\"Plano Piso 17\"\n            className=\"absolute inset-0 w-full h-full object-contain\"\n            style={{ opacity: 0.95 }}\n          />\n          \n          <svg \n            viewBox=\"0 0 2500 1000\" \n            className=\"absolute inset-0 w-full h-full\"\n            style={{ pointerEvents: 'none' }}\n            preserveAspectRatio=\"xMidYMid meet\"\n            onMouseMove={handleMouseMove}\n            onMouseUp={handleMouseUp}\n            onMouseLeave={handleMouseUp}\n          >\n            {Object.entries(officeCoordinates).map(([officeNum, coords]) => {\n              const office = offices.find(o => o.office_number === officeNum);\n              const color = getOfficeColor(office);\n              const isHovered = hoveredOffice?.office_number === officeNum;\n              const isSelected = selectedOffice === officeNum && editMode;\n              \n              // Determine visual style based on selection state\n              const isOfficeInSelection = office && selectedOfficeIds.includes(office.id);\n              const strokeColor = isOfficeInSelection ? '#f97316' : isSelected ? '#2563eb' : isHovered ? '#000' : 'rgba(107, 114, 128, 0.4)';\n              const strokeWidth = isOfficeInSelection ? '6' : isSelected ? '6' : isHovered ? '4' : '2';\n              \n              // Check if this office should be visible based on filters\n              const isVisible = !hasActiveFilters || filteredOfficeNumbers.has(officeNum) || editMode;\n              \n              // Check if this office is selected in the table\n              const isOfficeSelected = office && selectedOfficeIds.includes(office.id);\n              \n              // If not visible and filters are active, don't render\n              if (!isVisible && !editMode) {\n                return null;\n              }\n              \n              // Calculate opacity based on both filters and selection\n              let opacity = 1;\n              if (!editMode) {\n                if (selectedOfficeIds.length > 0 && !isOfficeSelected) {\n                  // If there are selections but this office isn't selected, dim it\n                  opacity = 0.15;\n                } else if (!isVisible) {\n                  // If filtered out, also dim it\n                  opacity = 0.15;\n                }\n              }\n              \n              return (\n                <g key={officeNum} style={{ opacity }}>\n                  <rect\n                    x={coords.x}\n                    y={coords.y}\n                    width={coords.width}\n                    height={coords.height}\n                    fill={color}\n                    stroke={strokeColor}\n                    strokeWidth={strokeWidth}\n                    className={editMode ? \"cursor-move\" : \"cursor-pointer\"}\n                    style={{ \n                      pointerEvents: 'all',\n                      filter: isOfficeInSelection ? 'brightness(1.2) drop-shadow(0 0 12px rgba(249, 115, 22, 0.8))' : isSelected ? 'brightness(1.1) drop-shadow(0 0 12px rgba(37, 99, 235, 0.8))' : isHovered ? 'brightness(1.2) drop-shadow(0 4px 8px rgba(0,0,0,0.4))' : 'none',\n                      transition: editMode ? 'none' : 'all 0.15s'\n                    }}\n                    onMouseEnter={(e) => !editMode && handleOfficeHover(officeNum, e)}\n                    onMouseLeave={() => !editMode && setHoveredOffice(null)}\n                    onClick={(e) => handleOfficeClick(officeNum, e)}\n                    onMouseDown={(e) => handleMouseDown(officeNum, e, false)}\n                  />\n                  \n                  {/* Resize handle in edit mode */}\n                  {isSelected && editMode && (\n                    <>\n                      {/* Corner resize handle */}\n                      <rect\n                        x={coords.x + coords.width - 15}\n                        y={coords.y + coords.height - 15}\n                        width=\"15\"\n                        height=\"15\"\n                        fill=\"#2563eb\"\n                        stroke=\"#fff\"\n                        strokeWidth=\"2\"\n                        className=\"cursor-nwse-resize\"\n                        style={{ pointerEvents: 'all' }}\n                        onMouseDown={(e) => handleMouseDown(officeNum, e, true)}\n                      />\n                      <Maximize2 \n                        x={coords.x + coords.width - 12}\n                        y={coords.y + coords.height - 12}\n                        width=\"9\"\n                        height=\"9\"\n                        stroke=\"#fff\"\n                        strokeWidth=\"2\"\n                        className=\"pointer-events-none\"\n                      />\n                      \n                      {/* Move icon in center */}\n                      <Move\n                        x={coords.x + coords.width/2 - 8}\n                        y={coords.y + coords.height/2 - 8}\n                        width=\"16\"\n                        height=\"16\"\n                        stroke=\"#2563eb\"\n                        fill=\"#fff\"\n                        strokeWidth=\"2\"\n                        className=\"pointer-events-none\"\n                        style={{ filter: 'drop-shadow(0 2px 4px rgba(0,0,0,0.3))' }}\n                      />\n                    </>\n                  )}\n                  \n                  {/* Office number - always visible */}\n                  {!editMode && (\n                    <>\n                      <text\n                        x={coords.x + coords.width/2}\n                        y={coords.y + coords.height/2}\n                        textAnchor=\"middle\"\n                        dominantBaseline=\"middle\"\n                        fill=\"#1f2937\"\n                        fontSize={isHovered ? \"28\" : \"24\"}\n                        fontWeight=\"900\"\n                        fontFamily=\"system-ui, -apple-system, sans-serif\"\n                        className=\"pointer-events-none select-none\"\n                        style={{ \n                          textShadow: '0 0 6px white, 0 0 6px white, 0 0 6px white, 0 0 8px white, 0 1px 2px rgba(0,0,0,0.3)',\n                          transition: 'font-size 0.15s',\n                          paintOrder: 'stroke fill'\n                        }}\n                      >\n                        {officeNum}\n                      </text>\n                      {/* Margin percentage - only on hover */}\n                      {isHovered && office && (\n                        <text\n                          x={coords.x + coords.width/2}\n                          y={coords.y + coords.height/2 + 22}\n                          textAnchor=\"middle\"\n                          dominantBaseline=\"middle\"\n                          fill={office.margin_percentage < 0 ? '#dc2626' : '#16a34a'}\n                          fontSize=\"14\"\n                          fontWeight=\"bold\"\n                          fontFamily=\"system-ui, sans-serif\"\n                          className=\"pointer-events-none select-none\"\n                          style={{ textShadow: '0 0 4px white, 0 0 4px white, 0 0 4px white' }}\n                        >\n                          {office.margin_percentage.toFixed(1)}%\n                        </text>\n                      )}\n                    </>\n                  )}\n                  \n                  {/* Office number in edit mode */}\n                  {isSelected && editMode && (\n                    <text\n                      x={coords.x + coords.width/2}\n                      y={coords.y - 10}\n                      textAnchor=\"middle\"\n                      fill=\"#2563eb\"\n                      fontSize=\"18\"\n                      fontWeight=\"bold\"\n                      fontFamily=\"system-ui, sans-serif\"\n                      className=\"pointer-events-none select-none\"\n                      style={{ textShadow: '0 0 4px white, 0 0 4px white' }}\n                    >\n                      Oficina {officeNum}\n                    </text>\n                  )}\n                </g>\n              );\n            })}\n          </svg>\n        </div>\n      </div>\n      \n      {hoveredOffice && !editMode && (\n        <div \n          className=\"fixed z-50 bg-white border-2 border-black rounded-sm shadow-2xl p-3 pointer-events-none\"\n          style={{\n            left: `${tooltipPosition.x}px`,\n            top: `${tooltipPosition.y}px`,\n            transform: 'translate(-50%, -100%)',\n            minWidth: '240px'\n          }}\n        >\n          <div className=\"space-y-1\">\n            <div className=\"font-secondary text-black font-bold text-sm border-b border-gray-200 pb-1 mb-2\">\n              Oficina {hoveredOffice.office_number}\n            </div>\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-xs font-primary text-gray-500\">Cliente:</span>\n              <span className=\"text-xs font-primary font-semibold text-black\">\n                {hoveredOffice.client_name || <span className=\"italic text-gray-400\">Disponible</span>}\n              </span>\n            </div>\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-xs font-primary text-gray-500\">Dimensión:</span>\n              <span className=\"text-xs font-primary text-gray-700\">\n                {hoveredOffice.square_meters}m²\n              </span>\n            </div>\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-xs font-primary text-gray-500\">Capacidad:</span>\n              <span className=\"text-xs font-primary text-gray-700\">\n                {hoveredOffice.capacity || Math.floor(hoveredOffice.square_meters / 3)} personas\n              </span>\n            </div>\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-xs font-primary text-gray-500\">Ubicación:</span>\n              <span className=\"text-xs font-primary text-gray-700\">\n                {hoveredOffice.location}\n              </span>\n            </div>\n            <div className=\"border-t border-gray-200 pt-1 mt-1\">\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-xs font-primary text-gray-500\">Venta Esperada:</span>\n                <span className=\"text-xs font-primary font-bold text-purple-600\">\n                  {formatUF(hoveredOffice.sale_value_uf)}\n                </span>\n              </div>\n              <div className=\"flex justify-between items-center mt-1\">\n                <span className=\"text-xs font-primary text-gray-500\">Facturado:</span>\n                <span className=\"text-xs font-primary font-bold text-green-600\">\n                  {formatUF(hoveredOffice.billed_value_uf)}\n                </span>\n              </div>\n              <div className=\"flex justify-between items-center mt-1\">\n                <span className=\"text-xs font-primary text-gray-500\">Costo:</span>\n                <span className=\"text-xs font-primary font-bold text-orange-600\">\n                  {formatUF(hoveredOffice.cost_uf)}\n                </span>\n              </div>\n              <div className=\"flex justify-between items-center mt-1 pt-1 border-t border-gray-100\">\n                <span className=\"text-xs font-primary text-gray-600 font-semibold\">Margen:</span>\n                <span className={`text-sm font-primary font-bold ${\n                  hoveredOffice.margin_percentage < 0 ? 'text-red-600' : 'text-green-600'\n                }`}>\n                  {hoveredOffice.margin_percentage.toFixed(2)}%\n                </span>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </Card>\n  );\n};"],"mappings":";;AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,SAASC,IAAI,QAAQ,WAAW;AAChC,SAASC,SAAS,EAAEC,KAAK,EAAEC,IAAI,EAAEC,CAAC,EAAEC,IAAI,EAAEC,SAAS,QAAQ,cAAc;AACzE,SAASC,MAAM,QAAQ,aAAa;AACpC,SAASC,QAAQ,QAAQ,eAAe;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAEzC,OAAO,MAAMC,eAAe,GAAGA,CAAC;EAAEC,OAAO;EAAEC,eAAe;EAAEC,iBAAiB,GAAG,EAAE;EAAEC;AAAe,CAAC,KAAK;EAAAC,EAAA;EACvG,MAAM,CAACC,aAAa,EAAEC,gBAAgB,CAAC,GAAGtB,QAAQ,CAAC,IAAI,CAAC;EACxD,MAAM,CAACuB,eAAe,EAAEC,kBAAkB,CAAC,GAAGxB,QAAQ,CAAC;IAAEyB,CAAC,EAAE,CAAC;IAAEC,CAAC,EAAE;EAAE,CAAC,CAAC;EACtE,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAG5B,QAAQ,CAAC,KAAK,CAAC;EAC/C,MAAM,CAAC6B,cAAc,EAAEC,iBAAiB,CAAC,GAAG9B,QAAQ,CAAC,IAAI,CAAC;EAC1D,MAAM,CAAC+B,UAAU,EAAEC,aAAa,CAAC,GAAGhC,QAAQ,CAAC,KAAK,CAAC;EACnD,MAAM,CAACiC,UAAU,EAAEC,aAAa,CAAC,GAAGlC,QAAQ,CAAC,KAAK,CAAC;EACnD,MAAM,CAACmC,SAAS,EAAEC,YAAY,CAAC,GAAGpC,QAAQ,CAAC;IAAEyB,CAAC,EAAE,CAAC;IAAEC,CAAC,EAAE;EAAE,CAAC,CAAC;EAC1D,MAAM,CAACW,iBAAiB,EAAEC,oBAAoB,CAAC,GAAGtC,QAAQ,CAAC,CAAC,CAAC,CAAC;;EAE9D;EACAC,SAAS,CAAC,MAAM;IACd,MAAMsC,eAAe,GAAG,MAAAA,CAAA,KAAY;MAClC,IAAI;QACF,MAAMC,KAAK,GAAG9B,QAAQ,CAAC,CAAC;QACxB,IAAI,CAAC8B,KAAK,EAAE;QAEZ,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGC,OAAO,CAACC,GAAG,CAACC,qBAAqB,6BAA6B,EAAE;UAC9FC,OAAO,EAAE;YACP,eAAe,EAAE,UAAUN,KAAK;UAClC;QACF,CAAC,CAAC;QAEF,IAAIC,QAAQ,CAACM,EAAE,EAAE;UACf,MAAMC,IAAI,GAAG,MAAMP,QAAQ,CAACQ,IAAI,CAAC,CAAC;UAClC,IAAID,IAAI,CAACE,WAAW,IAAIC,MAAM,CAACC,IAAI,CAACJ,IAAI,CAACE,WAAW,CAAC,CAACG,MAAM,GAAG,CAAC,EAAE;YAChEf,oBAAoB,CAACU,IAAI,CAACE,WAAW,CAAC;UACxC;QACF;MACF,CAAC,CAAC,OAAOI,CAAC,EAAE;QACVC,OAAO,CAACC,KAAK,CAAC,kCAAkC,EAAEF,CAAC,CAAC;MACtD;IACF,CAAC;IAEDf,eAAe,CAAC,CAAC;EACnB,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,MAAMkB,eAAe,GAAG,MAAAA,CAAA,KAAY;IAClC,IAAI;MACF,MAAMjB,KAAK,GAAG9B,QAAQ,CAAC,CAAC;MACxB,IAAI,CAAC8B,KAAK,EAAE;QACVkB,KAAK,CAAC,6DAA6D,CAAC;QACpEC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,QAAQ;QAC/B;MACF;MAEAN,OAAO,CAACO,GAAG,CAAC,0BAA0B,EAAEX,MAAM,CAACC,IAAI,CAACf,iBAAiB,CAAC,CAACgB,MAAM,EAAE,UAAU,CAAC;MAE1F,MAAMZ,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGC,OAAO,CAACC,GAAG,CAACC,qBAAqB,6BAA6B,EAAE;QAC9FkB,MAAM,EAAE,MAAM;QACdjB,OAAO,EAAE;UACP,cAAc,EAAE,kBAAkB;UAClC,eAAe,EAAE,UAAUN,KAAK;QAClC,CAAC;QACDwB,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UAAEhB,WAAW,EAAEb;QAAkB,CAAC;MACzD,CAAC,CAAC;MAEF,IAAII,QAAQ,CAACM,EAAE,EAAE;QACf,MAAMoB,MAAM,GAAG,MAAM1B,QAAQ,CAACQ,IAAI,CAAC,CAAC;QACpCS,KAAK,CAAC,4DAA4D,CAAC;QACnEH,OAAO,CAACO,GAAG,CAAC,mBAAmB,EAAEK,MAAM,CAAC;MAC1C,CAAC,MAAM;QACL,MAAMX,KAAK,GAAG,MAAMf,QAAQ,CAACQ,IAAI,CAAC,CAAC,CAACmB,KAAK,CAAC,OAAO;UAAEC,MAAM,EAAE;QAAoB,CAAC,CAAC,CAAC;QAClFd,OAAO,CAACC,KAAK,CAAC,qBAAqB,EAAEf,QAAQ,CAAC6B,MAAM,EAAEd,KAAK,CAAC;QAE5D,IAAIf,QAAQ,CAAC6B,MAAM,KAAK,GAAG,EAAE;UAC3BZ,KAAK,CAAC,8DAA8D,CAAC;UACrEC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,QAAQ;QACjC,CAAC,MAAM,IAAIpB,QAAQ,CAAC6B,MAAM,KAAK,GAAG,EAAE;UAClCZ,KAAK,CAAC,iEAAiE,CAAC;QAC1E,CAAC,MAAM;UACLA,KAAK,CAAC,sBAAsB,IAAIF,KAAK,CAACa,MAAM,IAAI,mBAAmB,CAAC,CAAC;QACvE;MACF;IACF,CAAC,CAAC,OAAOf,CAAC,EAAE;MACVC,OAAO,CAACC,KAAK,CAAC,2BAA2B,EAAEF,CAAC,CAAC;MAC7CI,KAAK,CAAC,kFAAkF,CAAC;IAC3F;EACF,CAAC;;EAED;EACA,MAAMa,gBAAgB,GAAG,MAAAA,CAAA,KAAY;IACnC,IAAIZ,MAAM,CAACa,OAAO,CAAC,4FAA4F,CAAC,EAAE;MAChH,IAAI;QACF,MAAMhC,KAAK,GAAG9B,QAAQ,CAAC,CAAC;QACxB,IAAI8B,KAAK,EAAE;UACT;UACA,MAAME,KAAK,CAAC,GAAGC,OAAO,CAACC,GAAG,CAACC,qBAAqB,6BAA6B,EAAE;YAC7EkB,MAAM,EAAE,MAAM;YACdjB,OAAO,EAAE;cACP,cAAc,EAAE,kBAAkB;cAClC,eAAe,EAAE,UAAUN,KAAK;YAClC,CAAC;YACDwB,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;cAAEhB,WAAW,EAAE,CAAC;YAAE,CAAC;UAC1C,CAAC,CAAC;QACJ;QAEAZ,oBAAoB,CAAC,CAAC,CAAC,CAAC;QACxBR,iBAAiB,CAAC,IAAI,CAAC;QACvB4B,KAAK,CAAC,+CAA+C,CAAC;MACxD,CAAC,CAAC,OAAOJ,CAAC,EAAE;QACVC,OAAO,CAACC,KAAK,CAAC,8BAA8B,EAAEF,CAAC,CAAC;QAChDhB,oBAAoB,CAAC,CAAC,CAAC,CAAC;QACxBR,iBAAiB,CAAC,IAAI,CAAC;MACzB;IACF;EACF,CAAC;;EAED;EACA,MAAM2C,iBAAiB,GAAGA,CAAA,KAAM;IAC9B,MAAMC,MAAM,GAAG;MAAE,GAAGC,wBAAwB;MAAE,GAAGtC;IAAkB,CAAC;IACpEkB,OAAO,CAACO,GAAG,CAAC,sBAAsB,EAAEG,IAAI,CAACC,SAAS,CAACQ,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;IACpEhB,KAAK,CAAC,yDAAyD,CAAC;EAClE,CAAC;;EAED;EACA;EACA,MAAMiB,wBAAwB,GAAG;IAC/B;IACA,MAAM,EAAE;MAAElD,CAAC,EAAE,EAAE;MAAEC,CAAC,EAAE,GAAG;MAAEkD,KAAK,EAAE,GAAG;MAAEC,MAAM,EAAE;IAAI,CAAC;IAClD,MAAM,EAAE;MAAEpD,CAAC,EAAE,GAAG;MAAEC,CAAC,EAAE,GAAG;MAAEkD,KAAK,EAAE,GAAG;MAAEC,MAAM,EAAE;IAAI,CAAC;IACnD,MAAM,EAAE;MAAEpD,CAAC,EAAE,GAAG;MAAEC,CAAC,EAAE,GAAG;MAAEkD,KAAK,EAAE,GAAG;MAAEC,MAAM,EAAE;IAAI,CAAC;IACnD,MAAM,EAAE;MAAEpD,CAAC,EAAE,GAAG;MAAEC,CAAC,EAAE,GAAG;MAAEkD,KAAK,EAAE,GAAG;MAAEC,MAAM,EAAE;IAAI,CAAC;IACnD,MAAM,EAAE;MAAEpD,CAAC,EAAE,GAAG;MAAEC,CAAC,EAAE,GAAG;MAAEkD,KAAK,EAAE,GAAG;MAAEC,MAAM,EAAE;IAAI,CAAC;IAEnD;IACA,MAAM,EAAE;MAAEpD,CAAC,EAAE,EAAE;MAAEC,CAAC,EAAE,GAAG;MAAEkD,KAAK,EAAE,GAAG;MAAEC,MAAM,EAAE;IAAI,CAAC;IAClD,MAAM,EAAE;MAAEpD,CAAC,EAAE,GAAG;MAAEC,CAAC,EAAE,GAAG;MAAEkD,KAAK,EAAE,GAAG;MAAEC,MAAM,EAAE;IAAI,CAAC;IACnD,MAAM,EAAE;MAAEpD,CAAC,EAAE,GAAG;MAAEC,CAAC,EAAE,GAAG;MAAEkD,KAAK,EAAE,GAAG;MAAEC,MAAM,EAAE;IAAI,CAAC;IACnD,MAAM,EAAE;MAAEpD,CAAC,EAAE,GAAG;MAAEC,CAAC,EAAE,GAAG;MAAEkD,KAAK,EAAE,GAAG;MAAEC,MAAM,EAAE;IAAI,CAAC;IACnD,MAAM,EAAE;MAAEpD,CAAC,EAAE,GAAG;MAAEC,CAAC,EAAE,GAAG;MAAEkD,KAAK,EAAE,GAAG;MAAEC,MAAM,EAAE;IAAI,CAAC;IACnD,MAAM,EAAE;MAAEpD,CAAC,EAAE,IAAI;MAAEC,CAAC,EAAE,GAAG;MAAEkD,KAAK,EAAE,GAAG;MAAEC,MAAM,EAAE;IAAI,CAAC;IACpD,MAAM,EAAE;MAAEpD,CAAC,EAAE,IAAI;MAAEC,CAAC,EAAE,GAAG;MAAEkD,KAAK,EAAE,GAAG;MAAEC,MAAM,EAAE;IAAI,CAAC;IAEpD;IACA,MAAM,EAAE;MAAEpD,CAAC,EAAE,GAAG;MAAEC,CAAC,EAAE,GAAG;MAAEkD,KAAK,EAAE,GAAG;MAAEC,MAAM,EAAE;IAAI,CAAC;IACnD,MAAM,EAAE;MAAEpD,CAAC,EAAE,GAAG;MAAEC,CAAC,EAAE,GAAG;MAAEkD,KAAK,EAAE,GAAG;MAAEC,MAAM,EAAE;IAAI,CAAC;IACnD,MAAM,EAAE;MAAEpD,CAAC,EAAE,GAAG;MAAEC,CAAC,EAAE,GAAG;MAAEkD,KAAK,EAAE,GAAG;MAAEC,MAAM,EAAE;IAAI,CAAC;IACnD,MAAM,EAAE;MAAEpD,CAAC,EAAE,GAAG;MAAEC,CAAC,EAAE,GAAG;MAAEkD,KAAK,EAAE,GAAG;MAAEC,MAAM,EAAE;IAAI,CAAC;IACnD,MAAM,EAAE;MAAEpD,CAAC,EAAE,IAAI;MAAEC,CAAC,EAAE,GAAG;MAAEkD,KAAK,EAAE,GAAG;MAAEC,MAAM,EAAE;IAAI,CAAC;IACpD,MAAM,EAAE;MAAEpD,CAAC,EAAE,IAAI;MAAEC,CAAC,EAAE,GAAG;MAAEkD,KAAK,EAAE,GAAG;MAAEC,MAAM,EAAE;IAAI,CAAC;IACpD,MAAM,EAAE;MAAEpD,CAAC,EAAE,IAAI;MAAEC,CAAC,EAAE,GAAG;MAAEkD,KAAK,EAAE,GAAG;MAAEC,MAAM,EAAE;IAAI,CAAC;IACpD,MAAM,EAAE;MAAEpD,CAAC,EAAE,IAAI;MAAEC,CAAC,EAAE,GAAG;MAAEkD,KAAK,EAAE,GAAG;MAAEC,MAAM,EAAE;IAAI,CAAC;IAEpD;IACA,MAAM,EAAE;MAAEpD,CAAC,EAAE,GAAG;MAAEC,CAAC,EAAE,GAAG;MAAEkD,KAAK,EAAE,GAAG;MAAEC,MAAM,EAAE;IAAI,CAAC;IACnD,MAAM,EAAE;MAAEpD,CAAC,EAAE,IAAI;MAAEC,CAAC,EAAE,GAAG;MAAEkD,KAAK,EAAE,GAAG;MAAEC,MAAM,EAAE;IAAI,CAAC;IACpD,MAAM,EAAE;MAAEpD,CAAC,EAAE,IAAI;MAAEC,CAAC,EAAE,GAAG;MAAEkD,KAAK,EAAE,GAAG;MAAEC,MAAM,EAAE;IAAI,CAAC;IACpD,MAAM,EAAE;MAAEpD,CAAC,EAAE,IAAI;MAAEC,CAAC,EAAE,GAAG;MAAEkD,KAAK,EAAE,GAAG;MAAEC,MAAM,EAAE;IAAI,CAAC;IACpD,MAAM,EAAE;MAAEpD,CAAC,EAAE,IAAI;MAAEC,CAAC,EAAE,GAAG;MAAEkD,KAAK,EAAE,GAAG;MAAEC,MAAM,EAAE;IAAI,CAAC;IACpD,MAAM,EAAE;MAAEpD,CAAC,EAAE,IAAI;MAAEC,CAAC,EAAE,GAAG;MAAEkD,KAAK,EAAE,GAAG;MAAEC,MAAM,EAAE;IAAI,CAAC;IAEpD;IACA,MAAM,EAAE;MAAEpD,CAAC,EAAE,GAAG;MAAEC,CAAC,EAAE,GAAG;MAAEkD,KAAK,EAAE,GAAG;MAAEC,MAAM,EAAE;IAAI,CAAC;IACnD,MAAM,EAAE;MAAEpD,CAAC,EAAE,GAAG;MAAEC,CAAC,EAAE,GAAG;MAAEkD,KAAK,EAAE,GAAG;MAAEC,MAAM,EAAE;IAAI,CAAC;IACnD,MAAM,EAAE;MAAEpD,CAAC,EAAE,IAAI;MAAEC,CAAC,EAAE,GAAG;MAAEkD,KAAK,EAAE,GAAG;MAAEC,MAAM,EAAE;IAAI,CAAC;IACpD,MAAM,EAAE;MAAEpD,CAAC,EAAE,IAAI;MAAEC,CAAC,EAAE,GAAG;MAAEkD,KAAK,EAAE,GAAG;MAAEC,MAAM,EAAE;IAAI,CAAC;IACpD,MAAM,EAAE;MAAEpD,CAAC,EAAE,IAAI;MAAEC,CAAC,EAAE,GAAG;MAAEkD,KAAK,EAAE,GAAG;MAAEC,MAAM,EAAE;IAAI,CAAC;IACpD,MAAM,EAAE;MAAEpD,CAAC,EAAE,IAAI;MAAEC,CAAC,EAAE,GAAG;MAAEkD,KAAK,EAAE,GAAG;MAAEC,MAAM,EAAE;IAAI,CAAC;IACpD,MAAM,EAAE;MAAEpD,CAAC,EAAE,IAAI;MAAEC,CAAC,EAAE,GAAG;MAAEkD,KAAK,EAAE,GAAG;MAAEC,MAAM,EAAE;IAAI,CAAC;IACpD,MAAM,EAAE;MAAEpD,CAAC,EAAE,IAAI;MAAEC,CAAC,EAAE,GAAG;MAAEkD,KAAK,EAAE,GAAG;MAAEC,MAAM,EAAE;IAAI,CAAC;IAEpD;IACA,MAAM,EAAE;MAAEpD,CAAC,EAAE,GAAG;MAAEC,CAAC,EAAE,GAAG;MAAEkD,KAAK,EAAE,GAAG;MAAEC,MAAM,EAAE;IAAI,CAAC;IACnD,MAAM,EAAE;MAAEpD,CAAC,EAAE,IAAI;MAAEC,CAAC,EAAE,GAAG;MAAEkD,KAAK,EAAE,GAAG;MAAEC,MAAM,EAAE;IAAI,CAAC;IACpD,MAAM,EAAE;MAAEpD,CAAC,EAAE,IAAI;MAAEC,CAAC,EAAE,GAAG;MAAEkD,KAAK,EAAE,GAAG;MAAEC,MAAM,EAAE;IAAI,CAAC;IACpD,MAAM,EAAE;MAAEpD,CAAC,EAAE,IAAI;MAAEC,CAAC,EAAE,GAAG;MAAEkD,KAAK,EAAE,GAAG;MAAEC,MAAM,EAAE;IAAI,CAAC;IAEpD;IACA,MAAM,EAAE;MAAEpD,CAAC,EAAE,GAAG;MAAEC,CAAC,EAAE,GAAG;MAAEkD,KAAK,EAAE,GAAG;MAAEC,MAAM,EAAE;IAAI;EACpD,CAAC;;EAED;EACA,MAAMC,iBAAiB,GAAG;IAAE,GAAGH,wBAAwB;IAAE,GAAGtC;EAAkB,CAAC;;EAE/E;EACA,MAAM0C,gBAAgB,GAAG9D,eAAe,IAAIA,eAAe,CAACoC,MAAM,KAAKrC,OAAO,CAACqC,MAAM;;EAErF;EACA,MAAM2B,qBAAqB,GAAG,IAAIC,GAAG,CACnChE,eAAe,GAAGA,eAAe,CAACiE,GAAG,CAACC,CAAC,IAAIA,CAAC,CAACC,aAAa,CAAC,GAAG,EAChE,CAAC;EAED,MAAMC,QAAQ,GAAIC,MAAM,IAAK;IAC3B,OAAO,IAAIC,IAAI,CAACC,YAAY,CAAC,OAAO,EAAE;MACpCC,qBAAqB,EAAE,CAAC;MACxBC,qBAAqB,EAAE;IACzB,CAAC,CAAC,CAACC,MAAM,CAACL,MAAM,CAAC,GAAG,KAAK;EAC3B,CAAC;EAED,MAAMM,cAAc,GAAIC,MAAM,IAAK;IACjC,IAAI,CAACA,MAAM,EAAE,OAAO,0BAA0B;IAE9C,IAAIA,MAAM,CAACvB,MAAM,KAAK,WAAW,EAAE;MACjC,OAAO,0BAA0B,CAAC,CAAC;IACrC;IAEA,IAAIuB,MAAM,CAACC,iBAAiB,GAAG,CAAC,EAAE;MAChC,OAAO,0BAA0B,CAAC,CAAC;IACrC,CAAC,MAAM,IAAID,MAAM,CAACC,iBAAiB,GAAG,CAAC,EAAE;MACvC,OAAO,0BAA0B,CAAC,CAAC;IACrC;IAEA,OAAO,0BAA0B;EACnC,CAAC;EAED,MAAMC,iBAAiB,GAAGA,CAACC,SAAS,EAAEC,KAAK,KAAK;IAC9C,MAAMJ,MAAM,GAAG7E,OAAO,CAACkF,IAAI,CAACf,CAAC,IAAIA,CAAC,CAACC,aAAa,KAAKY,SAAS,CAAC;IAC/D1E,gBAAgB,CAACuE,MAAM,CAAC;IAExB,MAAMM,IAAI,GAAGF,KAAK,CAACG,aAAa,CAACC,qBAAqB,CAAC,CAAC;IACxD7E,kBAAkB,CAAC;MACjBC,CAAC,EAAE0E,IAAI,CAACG,IAAI,GAAGH,IAAI,CAACvB,KAAK,GAAG,CAAC;MAC7BlD,CAAC,EAAEyE,IAAI,CAACI,GAAG,GAAG;IAChB,CAAC,CAAC;EACJ,CAAC;EAED,MAAMC,iBAAiB,GAAGA,CAACR,SAAS,EAAEC,KAAK,KAAK;IAC9C,IAAItE,QAAQ,EAAE;MACZsE,KAAK,CAACQ,eAAe,CAAC,CAAC;MACvB3E,iBAAiB,CAACkE,SAAS,CAAC;MAC5B;IACF;IAEA,MAAMH,MAAM,GAAG7E,OAAO,CAACkF,IAAI,CAACf,CAAC,IAAIA,CAAC,CAACC,aAAa,KAAKY,SAAS,CAAC;IAC/D,IAAIH,MAAM,IAAI1E,cAAc,EAAE;MAC5BA,cAAc,CAAC0E,MAAM,CAAC;IACxB;EACF,CAAC;;EAED;EACA,MAAMa,eAAe,GAAGA,CAACV,SAAS,EAAEC,KAAK,EAAEU,QAAQ,GAAG,KAAK,KAAK;IAC9D,IAAI,CAAChF,QAAQ,EAAE;IAEfsE,KAAK,CAACQ,eAAe,CAAC,CAAC;IACvB,MAAMG,GAAG,GAAGX,KAAK,CAACG,aAAa,CAACS,eAAe;IAC/C,MAAMC,EAAE,GAAGF,GAAG,CAACG,cAAc,CAAC,CAAC;IAC/BD,EAAE,CAACrF,CAAC,GAAGwE,KAAK,CAACe,OAAO;IACpBF,EAAE,CAACpF,CAAC,GAAGuE,KAAK,CAACgB,OAAO;IACpB,MAAMC,IAAI,GAAGJ,EAAE,CAACK,eAAe,CAACP,GAAG,CAACQ,YAAY,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,CAAC;IAE7DvF,iBAAiB,CAACkE,SAAS,CAAC;IAC5B,IAAIW,QAAQ,EAAE;MACZzE,aAAa,CAAC,IAAI,CAAC;IACrB,CAAC,MAAM;MACLF,aAAa,CAAC,IAAI,CAAC;IACrB;IACAI,YAAY,CAAC;MAAEX,CAAC,EAAEyF,IAAI,CAACzF,CAAC;MAAEC,CAAC,EAAEwF,IAAI,CAACxF;IAAE,CAAC,CAAC;EACxC,CAAC;;EAED;EACA,MAAM4F,eAAe,GAAIrB,KAAK,IAAK;IACjC,IAAI,CAACtE,QAAQ,IAAK,CAACI,UAAU,IAAI,CAACE,UAAW,IAAI,CAACJ,cAAc,EAAE;IAElE,MAAM+E,GAAG,GAAGX,KAAK,CAACG,aAAa;IAC/B,MAAMU,EAAE,GAAGF,GAAG,CAACG,cAAc,CAAC,CAAC;IAC/BD,EAAE,CAACrF,CAAC,GAAGwE,KAAK,CAACe,OAAO;IACpBF,EAAE,CAACpF,CAAC,GAAGuE,KAAK,CAACgB,OAAO;IACpB,MAAMC,IAAI,GAAGJ,EAAE,CAACK,eAAe,CAACP,GAAG,CAACQ,YAAY,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,CAAC;IAE7D,MAAME,aAAa,GAAGzC,iBAAiB,CAACjD,cAAc,CAAC;IACvD,IAAI,CAAC0F,aAAa,EAAE;IAEpB,MAAMC,EAAE,GAAGN,IAAI,CAACzF,CAAC,GAAGU,SAAS,CAACV,CAAC;IAC/B,MAAMgG,EAAE,GAAGP,IAAI,CAACxF,CAAC,GAAGS,SAAS,CAACT,CAAC;IAE/B,IAAIK,UAAU,EAAE;MACd;MACAO,oBAAoB,CAACoF,IAAI,KAAK;QAC5B,GAAGA,IAAI;QACP,CAAC7F,cAAc,GAAG;UAChB,GAAG0F,aAAa;UAChB9F,CAAC,EAAEkG,IAAI,CAACC,GAAG,CAAC,CAAC,EAAED,IAAI,CAACE,GAAG,CAAC,IAAI,GAAGN,aAAa,CAAC3C,KAAK,EAAE2C,aAAa,CAAC9F,CAAC,GAAG+F,EAAE,CAAC,CAAC;UAC1E9F,CAAC,EAAEiG,IAAI,CAACC,GAAG,CAAC,CAAC,EAAED,IAAI,CAACE,GAAG,CAAC,IAAI,GAAGN,aAAa,CAAC1C,MAAM,EAAE0C,aAAa,CAAC7F,CAAC,GAAG+F,EAAE,CAAC;QAC5E;MACF,CAAC,CAAC,CAAC;IACL,CAAC,MAAM,IAAIxF,UAAU,EAAE;MACrB;MACAK,oBAAoB,CAACoF,IAAI,KAAK;QAC5B,GAAGA,IAAI;QACP,CAAC7F,cAAc,GAAG;UAChB,GAAG0F,aAAa;UAChB3C,KAAK,EAAE+C,IAAI,CAACC,GAAG,CAAC,EAAE,EAAEL,aAAa,CAAC3C,KAAK,GAAG4C,EAAE,CAAC;UAC7C3C,MAAM,EAAE8C,IAAI,CAACC,GAAG,CAAC,EAAE,EAAEL,aAAa,CAAC1C,MAAM,GAAG4C,EAAE;QAChD;MACF,CAAC,CAAC,CAAC;IACL;IAEArF,YAAY,CAAC;MAAEX,CAAC,EAAEyF,IAAI,CAACzF,CAAC;MAAEC,CAAC,EAAEwF,IAAI,CAACxF;IAAE,CAAC,CAAC;EACxC,CAAC;;EAED;EACA,MAAMoG,aAAa,GAAGA,CAAA,KAAM;IAC1B9F,aAAa,CAAC,KAAK,CAAC;IACpBE,aAAa,CAAC,KAAK,CAAC;EACtB,CAAC;EAED,oBACEtB,OAAA,CAACV,IAAI;IAAC6H,SAAS,EAAC,qDAAqD;IAAAC,QAAA,gBACnEpH,OAAA;MAAKmH,SAAS,EAAC,yCAAyC;MAAAC,QAAA,gBACtDpH,OAAA;QAAKmH,SAAS,EAAC,mDAAmD;QAAAC,QAAA,gBAChEpH,OAAA;UAAKmH,SAAS,EAAC,yBAAyB;UAAAC,QAAA,gBACtCpH,OAAA,CAACT,SAAS;YAAC4H,SAAS,EAAC;UAAuB;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,eAC/CxH,OAAA;YAAImH,SAAS,EAAC,6CAA6C;YAAAC,QAAA,EAAC;UAA2B;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACzF,CAAC,eAENxH,OAAA;UAAKmH,SAAS,EAAC,yBAAyB;UAAAC,QAAA,GACrC,CAACrG,QAAQ,iBACRf,OAAA;YAAKmH,SAAS,EAAC,iCAAiC;YAAAC,QAAA,gBAC9CpH,OAAA;cAAKmH,SAAS,EAAC,yBAAyB;cAAAC,QAAA,gBACtCpH,OAAA;gBAAKmH,SAAS,EAAC,wDAAwD;gBAACM,KAAK,EAAE;kBAAEC,OAAO,EAAE;gBAAI;cAAE;gBAAAL,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC,eACvGxH,OAAA;gBAAAoH,QAAA,EAAM;cAAQ;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAClB,CAAC,eACNxH,OAAA;cAAKmH,SAAS,EAAC,yBAAyB;cAAAC,QAAA,gBACtCpH,OAAA;gBAAKmH,SAAS,EAAC,sDAAsD;gBAACM,KAAK,EAAE;kBAAEC,OAAO,EAAE;gBAAI;cAAE;gBAAAL,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC,eACrGxH,OAAA;gBAAAoH,QAAA,EAAM;cAAQ;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAClB,CAAC,eACNxH,OAAA;cAAKmH,SAAS,EAAC,yBAAyB;cAAAC,QAAA,gBACtCpH,OAAA;gBAAKmH,SAAS,EAAC,uDAAuD;gBAACM,KAAK,EAAE;kBAAEC,OAAO,EAAE;gBAAI;cAAE;gBAAAL,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC,eACtGxH,OAAA;gBAAAoH,QAAA,EAAM;cAAU;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACpB,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CACN,eAEDxH,OAAA,CAACH,MAAM;YACL8H,OAAO,EAAEA,CAAA,KAAM;cACb3G,WAAW,CAAC,CAACD,QAAQ,CAAC;cACtBG,iBAAiB,CAAC,IAAI,CAAC;YACzB,CAAE;YACF0G,IAAI,EAAC,IAAI;YACTC,OAAO,EAAE9G,QAAQ,GAAG,SAAS,GAAG,SAAU;YAC1CoG,SAAS,EAAE,oCACTpG,QAAQ,GACJ,0CAA0C,GAC1C,yDAAyD,aACjD;YAAAqG,QAAA,EAEbrG,QAAQ,gBACPf,OAAA,CAAAE,SAAA;cAAAkH,QAAA,gBACEpH,OAAA,CAACN,CAAC;gBAACyH,SAAS,EAAC;cAAc;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,uBAEhC;YAAA,eAAE,CAAC,gBAEHxH,OAAA,CAAAE,SAAA;cAAAkH,QAAA,gBACEpH,OAAA,CAACR,KAAK;gBAAC2H,SAAS,EAAC;cAAc;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,mBAEpC;YAAA,eAAE;UACH;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACK,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,EAELzG,QAAQ,iBACPf,OAAA;QAAKmH,SAAS,EAAC,uDAAuD;QAAAC,QAAA,eACpEpH,OAAA;UAAKmH,SAAS,EAAC,mDAAmD;UAAAC,QAAA,gBAChEpH,OAAA;YAAKmH,SAAS,EAAC,oCAAoC;YAAAC,QAAA,gBACjDpH,OAAA;cAAGmH,SAAS,EAAC,gBAAgB;cAAAC,QAAA,EAAC;YAAmB;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC,eACrDxH,OAAA;cAAImH,SAAS,EAAC,yBAAyB;cAAAC,QAAA,gBACrCpH,OAAA;gBAAAoH,QAAA,EAAI;cAAqC;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eAC9CxH,OAAA;gBAAAoH,QAAA,EAAI;cAA+B;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eACxCxH,OAAA;gBAAAoH,QAAA,EAAI;cAAyD;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAChE,CAAC,EACJvG,cAAc,iBACbjB,OAAA;cAAGmH,SAAS,EAAC,8BAA8B;cAAAC,QAAA,GAAC,oBACxB,EAACnG,cAAc,EAChCiD,iBAAiB,CAACjD,cAAc,CAAC,iBAChCjB,OAAA;gBAAMmH,SAAS,EAAC,kBAAkB;gBAAAC,QAAA,GAAC,MAC7B,EAACL,IAAI,CAACe,KAAK,CAAC5D,iBAAiB,CAACjD,cAAc,CAAC,CAACJ,CAAC,CAAC,EAAC,OAClD,EAACkG,IAAI,CAACe,KAAK,CAAC5D,iBAAiB,CAACjD,cAAc,CAAC,CAACH,CAAC,CAAC,EAAC,OACjD,EAACiG,IAAI,CAACe,KAAK,CAAC5D,iBAAiB,CAACjD,cAAc,CAAC,CAAC+C,KAAK,CAAC,EAAC,OACrD,EAAC+C,IAAI,CAACe,KAAK,CAAC5D,iBAAiB,CAACjD,cAAc,CAAC,CAACgD,MAAM,CAAC,EAAC,GAC3D;cAAA;gBAAAoD,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CACP;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACA,CACJ;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACE,CAAC,eAENxH,OAAA;YAAKmH,SAAS,EAAC,YAAY;YAAAC,QAAA,gBACzBpH,OAAA,CAACH,MAAM;cACL8H,OAAO,EAAE9E,eAAgB;cACzB+E,IAAI,EAAC,IAAI;cACTT,SAAS,EAAC,wFAAwF;cAAAC,QAAA,gBAElGpH,OAAA,CAACP,IAAI;gBAAC0H,SAAS,EAAC;cAAc;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,WAEnC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eACTxH,OAAA,CAACH,MAAM;cACL8H,OAAO,EAAE9D,iBAAkB;cAC3B+D,IAAI,EAAC,IAAI;cACTC,OAAO,EAAC,SAAS;cACjBV,SAAS,EAAC,qGAAqG;cAAAC,QAAA,EAChH;YAED;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eACTxH,OAAA,CAACH,MAAM;cACL8H,OAAO,EAAEhE,gBAAiB;cAC1BiE,IAAI,EAAC,IAAI;cACTC,OAAO,EAAC,SAAS;cACjBV,SAAS,EAAC,kGAAkG;cAAAC,QAAA,EAC7G;YAED;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CACN;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC,eAENxH,OAAA;MAAKmH,SAAS,EAAC,UAAU;MAACM,KAAK,EAAE;QAAEM,eAAe,EAAE;MAAU,CAAE;MAAAX,QAAA,eAC9DpH,OAAA;QAAKmH,SAAS,EAAC,iBAAiB;QAACM,KAAK,EAAE;UAAEO,aAAa,EAAE;QAAM,CAAE;QAAAZ,QAAA,gBAC/DpH,OAAA;UACEiI,GAAG,EAAC,2KAA2K;UAC/KC,GAAG,EAAC,eAAe;UACnBf,SAAS,EAAC,+CAA+C;UACzDM,KAAK,EAAE;YAAEC,OAAO,EAAE;UAAK;QAAE;UAAAL,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC1B,CAAC,eAEFxH,OAAA;UACEmI,OAAO,EAAC,eAAe;UACvBhB,SAAS,EAAC,gCAAgC;UAC1CM,KAAK,EAAE;YAAEW,aAAa,EAAE;UAAO,CAAE;UACjCC,mBAAmB,EAAC,eAAe;UACnCC,WAAW,EAAE5B,eAAgB;UAC7B6B,SAAS,EAAErB,aAAc;UACzBsB,YAAY,EAAEtB,aAAc;UAAAE,QAAA,EAE3B7E,MAAM,CAACkG,OAAO,CAACvE,iBAAiB,CAAC,CAACI,GAAG,CAAC,CAAC,CAACc,SAAS,EAAEtB,MAAM,CAAC,KAAK;YAC9D,MAAMmB,MAAM,GAAG7E,OAAO,CAACkF,IAAI,CAACf,CAAC,IAAIA,CAAC,CAACC,aAAa,KAAKY,SAAS,CAAC;YAC/D,MAAMsD,KAAK,GAAG1D,cAAc,CAACC,MAAM,CAAC;YACpC,MAAM0D,SAAS,GAAG,CAAAlI,aAAa,aAAbA,aAAa,uBAAbA,aAAa,CAAE+D,aAAa,MAAKY,SAAS;YAC5D,MAAMwD,UAAU,GAAG3H,cAAc,KAAKmE,SAAS,IAAIrE,QAAQ;;YAE3D;YACA,MAAM8H,mBAAmB,GAAG5D,MAAM,IAAI3E,iBAAiB,CAACwI,QAAQ,CAAC7D,MAAM,CAAC8D,EAAE,CAAC;YAC3E,MAAMC,WAAW,GAAGH,mBAAmB,GAAG,SAAS,GAAGD,UAAU,GAAG,SAAS,GAAGD,SAAS,GAAG,MAAM,GAAG,0BAA0B;YAC9H,MAAMM,WAAW,GAAGJ,mBAAmB,GAAG,GAAG,GAAGD,UAAU,GAAG,GAAG,GAAGD,SAAS,GAAG,GAAG,GAAG,GAAG;;YAExF;YACA,MAAMO,SAAS,GAAG,CAAC/E,gBAAgB,IAAIC,qBAAqB,CAAC+E,GAAG,CAAC/D,SAAS,CAAC,IAAIrE,QAAQ;;YAEvF;YACA,MAAMqI,gBAAgB,GAAGnE,MAAM,IAAI3E,iBAAiB,CAACwI,QAAQ,CAAC7D,MAAM,CAAC8D,EAAE,CAAC;;YAExE;YACA,IAAI,CAACG,SAAS,IAAI,CAACnI,QAAQ,EAAE;cAC3B,OAAO,IAAI;YACb;;YAEA;YACA,IAAI2G,OAAO,GAAG,CAAC;YACf,IAAI,CAAC3G,QAAQ,EAAE;cACb,IAAIT,iBAAiB,CAACmC,MAAM,GAAG,CAAC,IAAI,CAAC2G,gBAAgB,EAAE;gBACrD;gBACA1B,OAAO,GAAG,IAAI;cAChB,CAAC,MAAM,IAAI,CAACwB,SAAS,EAAE;gBACrB;gBACAxB,OAAO,GAAG,IAAI;cAChB;YACF;YAEA,oBACE1H,OAAA;cAAmByH,KAAK,EAAE;gBAAEC;cAAQ,CAAE;cAAAN,QAAA,gBACpCpH,OAAA;gBACEa,CAAC,EAAEiD,MAAM,CAACjD,CAAE;gBACZC,CAAC,EAAEgD,MAAM,CAAChD,CAAE;gBACZkD,KAAK,EAAEF,MAAM,CAACE,KAAM;gBACpBC,MAAM,EAAEH,MAAM,CAACG,MAAO;gBACtBoF,IAAI,EAAEX,KAAM;gBACZY,MAAM,EAAEN,WAAY;gBACpBC,WAAW,EAAEA,WAAY;gBACzB9B,SAAS,EAAEpG,QAAQ,GAAG,aAAa,GAAG,gBAAiB;gBACvD0G,KAAK,EAAE;kBACLW,aAAa,EAAE,KAAK;kBACpBmB,MAAM,EAAEV,mBAAmB,GAAG,+DAA+D,GAAGD,UAAU,GAAG,8DAA8D,GAAGD,SAAS,GAAG,wDAAwD,GAAG,MAAM;kBAC3Pa,UAAU,EAAEzI,QAAQ,GAAG,MAAM,GAAG;gBAClC,CAAE;gBACF0I,YAAY,EAAG/G,CAAC,IAAK,CAAC3B,QAAQ,IAAIoE,iBAAiB,CAACC,SAAS,EAAE1C,CAAC,CAAE;gBAClE8F,YAAY,EAAEA,CAAA,KAAM,CAACzH,QAAQ,IAAIL,gBAAgB,CAAC,IAAI,CAAE;gBACxDiH,OAAO,EAAGjF,CAAC,IAAKkD,iBAAiB,CAACR,SAAS,EAAE1C,CAAC,CAAE;gBAChDgH,WAAW,EAAGhH,CAAC,IAAKoD,eAAe,CAACV,SAAS,EAAE1C,CAAC,EAAE,KAAK;cAAE;gBAAA2E,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC1D,CAAC,EAGDoB,UAAU,IAAI7H,QAAQ,iBACrBf,OAAA,CAAAE,SAAA;gBAAAkH,QAAA,gBAEEpH,OAAA;kBACEa,CAAC,EAAEiD,MAAM,CAACjD,CAAC,GAAGiD,MAAM,CAACE,KAAK,GAAG,EAAG;kBAChClD,CAAC,EAAEgD,MAAM,CAAChD,CAAC,GAAGgD,MAAM,CAACG,MAAM,GAAG,EAAG;kBACjCD,KAAK,EAAC,IAAI;kBACVC,MAAM,EAAC,IAAI;kBACXoF,IAAI,EAAC,SAAS;kBACdC,MAAM,EAAC,MAAM;kBACbL,WAAW,EAAC,GAAG;kBACf9B,SAAS,EAAC,oBAAoB;kBAC9BM,KAAK,EAAE;oBAAEW,aAAa,EAAE;kBAAM,CAAE;kBAChCsB,WAAW,EAAGhH,CAAC,IAAKoD,eAAe,CAACV,SAAS,EAAE1C,CAAC,EAAE,IAAI;gBAAE;kBAAA2E,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACzD,CAAC,eACFxH,OAAA,CAACJ,SAAS;kBACRiB,CAAC,EAAEiD,MAAM,CAACjD,CAAC,GAAGiD,MAAM,CAACE,KAAK,GAAG,EAAG;kBAChClD,CAAC,EAAEgD,MAAM,CAAChD,CAAC,GAAGgD,MAAM,CAACG,MAAM,GAAG,EAAG;kBACjCD,KAAK,EAAC,GAAG;kBACTC,MAAM,EAAC,GAAG;kBACVqF,MAAM,EAAC,MAAM;kBACbL,WAAW,EAAC,GAAG;kBACf9B,SAAS,EAAC;gBAAqB;kBAAAE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAChC,CAAC,eAGFxH,OAAA,CAACL,IAAI;kBACHkB,CAAC,EAAEiD,MAAM,CAACjD,CAAC,GAAGiD,MAAM,CAACE,KAAK,GAAC,CAAC,GAAG,CAAE;kBACjClD,CAAC,EAAEgD,MAAM,CAAChD,CAAC,GAAGgD,MAAM,CAACG,MAAM,GAAC,CAAC,GAAG,CAAE;kBAClCD,KAAK,EAAC,IAAI;kBACVC,MAAM,EAAC,IAAI;kBACXqF,MAAM,EAAC,SAAS;kBAChBD,IAAI,EAAC,MAAM;kBACXJ,WAAW,EAAC,GAAG;kBACf9B,SAAS,EAAC,qBAAqB;kBAC/BM,KAAK,EAAE;oBAAE8B,MAAM,EAAE;kBAAyC;gBAAE;kBAAAlC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC7D,CAAC;cAAA,eACF,CACH,EAGA,CAACzG,QAAQ,iBACRf,OAAA,CAAAE,SAAA;gBAAAkH,QAAA,gBACEpH,OAAA;kBACEa,CAAC,EAAEiD,MAAM,CAACjD,CAAC,GAAGiD,MAAM,CAACE,KAAK,GAAC,CAAE;kBAC7BlD,CAAC,EAAEgD,MAAM,CAAChD,CAAC,GAAGgD,MAAM,CAACG,MAAM,GAAC,CAAE;kBAC9B0F,UAAU,EAAC,QAAQ;kBACnBC,gBAAgB,EAAC,QAAQ;kBACzBP,IAAI,EAAC,SAAS;kBACdQ,QAAQ,EAAElB,SAAS,GAAG,IAAI,GAAG,IAAK;kBAClCmB,UAAU,EAAC,KAAK;kBAChBC,UAAU,EAAC,sCAAsC;kBACjD5C,SAAS,EAAC,iCAAiC;kBAC3CM,KAAK,EAAE;oBACLuC,UAAU,EAAE,uFAAuF;oBACnGR,UAAU,EAAE,iBAAiB;oBAC7BS,UAAU,EAAE;kBACd,CAAE;kBAAA7C,QAAA,EAEDhC;gBAAS;kBAAAiC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACN,CAAC,EAENmB,SAAS,IAAI1D,MAAM,iBAClBjF,OAAA;kBACEa,CAAC,EAAEiD,MAAM,CAACjD,CAAC,GAAGiD,MAAM,CAACE,KAAK,GAAC,CAAE;kBAC7BlD,CAAC,EAAEgD,MAAM,CAAChD,CAAC,GAAGgD,MAAM,CAACG,MAAM,GAAC,CAAC,GAAG,EAAG;kBACnC0F,UAAU,EAAC,QAAQ;kBACnBC,gBAAgB,EAAC,QAAQ;kBACzBP,IAAI,EAAEpE,MAAM,CAACC,iBAAiB,GAAG,CAAC,GAAG,SAAS,GAAG,SAAU;kBAC3D2E,QAAQ,EAAC,IAAI;kBACbC,UAAU,EAAC,MAAM;kBACjBC,UAAU,EAAC,uBAAuB;kBAClC5C,SAAS,EAAC,iCAAiC;kBAC3CM,KAAK,EAAE;oBAAEuC,UAAU,EAAE;kBAA8C,CAAE;kBAAA5C,QAAA,GAEpEnC,MAAM,CAACC,iBAAiB,CAACgF,OAAO,CAAC,CAAC,CAAC,EAAC,GACvC;gBAAA;kBAAA7C,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CACP;cAAA,eACD,CACH,EAGAoB,UAAU,IAAI7H,QAAQ,iBACrBf,OAAA;gBACEa,CAAC,EAAEiD,MAAM,CAACjD,CAAC,GAAGiD,MAAM,CAACE,KAAK,GAAC,CAAE;gBAC7BlD,CAAC,EAAEgD,MAAM,CAAChD,CAAC,GAAG,EAAG;gBACjB6I,UAAU,EAAC,QAAQ;gBACnBN,IAAI,EAAC,SAAS;gBACdQ,QAAQ,EAAC,IAAI;gBACbC,UAAU,EAAC,MAAM;gBACjBC,UAAU,EAAC,uBAAuB;gBAClC5C,SAAS,EAAC,iCAAiC;gBAC3CM,KAAK,EAAE;kBAAEuC,UAAU,EAAE;gBAA+B,CAAE;gBAAA5C,QAAA,GACvD,UACS,EAAChC,SAAS;cAAA;gBAAAiC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACd,CACP;YAAA,GAtHKpC,SAAS;cAAAiC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAuHd,CAAC;UAER,CAAC;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,EAEL/G,aAAa,IAAI,CAACM,QAAQ,iBACzBf,OAAA;MACEmH,SAAS,EAAC,yFAAyF;MACnGM,KAAK,EAAE;QACL/B,IAAI,EAAE,GAAG/E,eAAe,CAACE,CAAC,IAAI;QAC9B8E,GAAG,EAAE,GAAGhF,eAAe,CAACG,CAAC,IAAI;QAC7BqJ,SAAS,EAAE,wBAAwB;QACnCC,QAAQ,EAAE;MACZ,CAAE;MAAAhD,QAAA,eAEFpH,OAAA;QAAKmH,SAAS,EAAC,WAAW;QAAAC,QAAA,gBACxBpH,OAAA;UAAKmH,SAAS,EAAC,gFAAgF;UAAAC,QAAA,GAAC,UACtF,EAAC3G,aAAa,CAAC+D,aAAa;QAAA;UAAA6C,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACjC,CAAC,eACNxH,OAAA;UAAKmH,SAAS,EAAC,mCAAmC;UAAAC,QAAA,gBAChDpH,OAAA;YAAMmH,SAAS,EAAC,oCAAoC;YAAAC,QAAA,EAAC;UAAQ;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eACpExH,OAAA;YAAMmH,SAAS,EAAC,+CAA+C;YAAAC,QAAA,EAC5D3G,aAAa,CAAC4J,WAAW,iBAAIrK,OAAA;cAAMmH,SAAS,EAAC,sBAAsB;cAAAC,QAAA,EAAC;YAAU;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAClF,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACJ,CAAC,eACNxH,OAAA;UAAKmH,SAAS,EAAC,mCAAmC;UAAAC,QAAA,gBAChDpH,OAAA;YAAMmH,SAAS,EAAC,oCAAoC;YAAAC,QAAA,EAAC;UAAU;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eACtExH,OAAA;YAAMmH,SAAS,EAAC,oCAAoC;YAAAC,QAAA,GACjD3G,aAAa,CAAC6J,aAAa,EAAC,OAC/B;UAAA;YAAAjD,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACJ,CAAC,eACNxH,OAAA;UAAKmH,SAAS,EAAC,mCAAmC;UAAAC,QAAA,gBAChDpH,OAAA;YAAMmH,SAAS,EAAC,oCAAoC;YAAAC,QAAA,EAAC;UAAU;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eACtExH,OAAA;YAAMmH,SAAS,EAAC,oCAAoC;YAAAC,QAAA,GACjD3G,aAAa,CAAC8J,QAAQ,IAAIxD,IAAI,CAACyD,KAAK,CAAC/J,aAAa,CAAC6J,aAAa,GAAG,CAAC,CAAC,EAAC,WACzE;UAAA;YAAAjD,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACJ,CAAC,eACNxH,OAAA;UAAKmH,SAAS,EAAC,mCAAmC;UAAAC,QAAA,gBAChDpH,OAAA;YAAMmH,SAAS,EAAC,oCAAoC;YAAAC,QAAA,EAAC;UAAU;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eACtExH,OAAA;YAAMmH,SAAS,EAAC,oCAAoC;YAAAC,QAAA,EACjD3G,aAAa,CAACuC;UAAQ;YAAAqE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACnB,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACJ,CAAC,eACNxH,OAAA;UAAKmH,SAAS,EAAC,oCAAoC;UAAAC,QAAA,gBACjDpH,OAAA;YAAKmH,SAAS,EAAC,mCAAmC;YAAAC,QAAA,gBAChDpH,OAAA;cAAMmH,SAAS,EAAC,oCAAoC;cAAAC,QAAA,EAAC;YAAe;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,eAC3ExH,OAAA;cAAMmH,SAAS,EAAC,gDAAgD;cAAAC,QAAA,EAC7D3C,QAAQ,CAAChE,aAAa,CAACgK,aAAa;YAAC;cAAApD,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAClC,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACJ,CAAC,eACNxH,OAAA;YAAKmH,SAAS,EAAC,wCAAwC;YAAAC,QAAA,gBACrDpH,OAAA;cAAMmH,SAAS,EAAC,oCAAoC;cAAAC,QAAA,EAAC;YAAU;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,eACtExH,OAAA;cAAMmH,SAAS,EAAC,+CAA+C;cAAAC,QAAA,EAC5D3C,QAAQ,CAAChE,aAAa,CAACiK,eAAe;YAAC;cAAArD,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACpC,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACJ,CAAC,eACNxH,OAAA;YAAKmH,SAAS,EAAC,wCAAwC;YAAAC,QAAA,gBACrDpH,OAAA;cAAMmH,SAAS,EAAC,oCAAoC;cAAAC,QAAA,EAAC;YAAM;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,eAClExH,OAAA;cAAMmH,SAAS,EAAC,gDAAgD;cAAAC,QAAA,EAC7D3C,QAAQ,CAAChE,aAAa,CAACkK,OAAO;YAAC;cAAAtD,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC5B,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACJ,CAAC,eACNxH,OAAA;YAAKmH,SAAS,EAAC,sEAAsE;YAAAC,QAAA,gBACnFpH,OAAA;cAAMmH,SAAS,EAAC,kDAAkD;cAAAC,QAAA,EAAC;YAAO;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,eACjFxH,OAAA;cAAMmH,SAAS,EAAE,kCACf1G,aAAa,CAACyE,iBAAiB,GAAG,CAAC,GAAG,cAAc,GAAG,gBAAgB,EACtE;cAAAkC,QAAA,GACA3G,aAAa,CAACyE,iBAAiB,CAACgF,OAAO,CAAC,CAAC,CAAC,EAAC,GAC9C;YAAA;cAAA7C,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACJ,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CACN;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACG,CAAC;AAEX,CAAC;AAAChH,EAAA,CAnpBWL,eAAe;AAAAyK,EAAA,GAAfzK,eAAe;AAAA,IAAAyK,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}